{"format_version":"1.1","terraform_version":"1.2.3","planned_values":{"outputs":{"configure_kubectl":{"sensitive":false},"platform_team":{"sensitive":false},"private_subnets":{"sensitive":false},"public_subnets":{"sensitive":false},"team_riker":{"sensitive":false},"vpc_id":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.aws_controllers.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.aws_controllers.data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},{"address":"module.aws_controllers.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.aws_controllers.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}}],"address":"module.aws_controllers","child_modules":[{"resources":[{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].aws_iam_policy.aws_load_balancer_controller","mode":"managed","type":"aws_iam_policy","name":"aws_load_balancer_controller","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Allows lb controller to manage ALB and NLB","name_prefix":null,"path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].data.aws_iam_policy_document.aws_lb","mode":"data","type":"aws_iam_policy_document","name":"aws_lb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:DescribeAccountAttributes","ec2:DescribeAddresses","ec2:DescribeAvailabilityZones","ec2:DescribeCoipPools","ec2:DescribeInstances","ec2:DescribeInternetGateways","ec2:DescribeNetworkInterfaces","ec2:DescribeSecurityGroups","ec2:DescribeSubnets","ec2:DescribeTags","ec2:DescribeVpcs","ec2:GetCoipPoolUsage","elasticloadbalancing:DescribeListenerCertificates","elasticloadbalancing:DescribeListeners","elasticloadbalancing:DescribeLoadBalancerAttributes","elasticloadbalancing:DescribeLoadBalancers","elasticloadbalancing:DescribeRules","elasticloadbalancing:DescribeSSLPolicies","elasticloadbalancing:DescribeTags","elasticloadbalancing:DescribeTargetGroupAttributes","elasticloadbalancing:DescribeTargetGroups","elasticloadbalancing:DescribeTargetHealth","iam:CreateServiceLinkedRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["acm:DescribeCertificate","acm:ListCertificates","cognito-idp:DescribeUserPoolClient","iam:GetServerCertificate","iam:ListServerCertificates","shield:CreateProtection","shield:DeleteProtection","shield:DescribeProtection","shield:GetSubscriptionState","waf-regional:AssociateWebACL","waf-regional:DisassociateWebACL","waf-regional:GetWebACL","waf-regional:GetWebACLForResource","wafv2:AssociateWebACL","wafv2:DisassociateWebACL","wafv2:GetWebACL","wafv2:GetWebACLForResource"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:CreateSecurityGroup"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:CreateTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"},{"test":"StringEquals","values":["CreateSecurityGroup"],"variable":"ec2:CreateAction"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:CreateTags","ec2:DeleteTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/ingress.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:AddTags","elasticloadbalancing:DeleteTargetGroup","elasticloadbalancing:RemoveTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/ingress.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:CreateTags","ec2:DeleteTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"},{"test":"Null","values":["true"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:AuthorizeSecurityGroupIngress","ec2:DeleteSecurityGroup","ec2:RevokeSecurityGroupIngress"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:CreateLoadBalancer","elasticloadbalancing:CreateTargetGroup"],"condition":[{"test":"Null","values":["false"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:CreateListener","elasticloadbalancing:CreateRule","elasticloadbalancing:DeleteListener","elasticloadbalancing:DeleteRule"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"},{"test":"Null","values":["true"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:DeleteLoadBalancer","elasticloadbalancing:DeleteTargetGroup","elasticloadbalancing:ModifyLoadBalancerAttributes","elasticloadbalancing:ModifyTargetGroup","elasticloadbalancing:ModifyTargetGroupAttributes","elasticloadbalancing:SetIpAddressType","elasticloadbalancing:SetSecurityGroups","elasticloadbalancing:SetSubnets"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:DeregisterTargets","elasticloadbalancing:RegisterTargets"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:AddListenerCertificates","elasticloadbalancing:ModifyListener","elasticloadbalancing:ModifyRule","elasticloadbalancing:RemoveListenerCertificates","elasticloadbalancing:SetWebAcl"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false,false,false]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false,false,false]},{"actions":[false,false,false,false,false,false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}}],"address":"module.aws_controllers.module.aws_load_balancer_controller[0]","child_modules":[{"resources":[{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.helm_release.addon[0]","mode":"managed","type":"helm_release","name":"addon","index":0,"provider_name":"registry.terraform.io/hashicorp/helm","schema_version":0,"values":{"atomic":false,"chart":"aws-load-balancer-controller","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":"aws-load-balancer-controller Helm Chart for ingress resources","devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":"","lint":false,"max_history":0,"name":"aws-load-balancer-controller","namespace":"kube-system","pass_credentials":false,"postrender":[{"args":null,"binary_path":""}],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://aws.github.io/eks-charts","repository_ca_file":null,"repository_cert_file":"","repository_key_file":"","repository_password":"","repository_username":"","reset_values":false,"reuse_values":false,"set":[{"name":"serviceAccount.create","type":"","value":"false"},{"name":"serviceAccount.name","type":"","value":"aws-load-balancer-controller-sa"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":1200,"verify":false,"version":"1.4.1","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[{}],"set":[{},{}],"set_sensitive":[],"values":[]}}],"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon","child_modules":[{"resources":[{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role.irsa[0]","mode":"managed","type":"aws_iam_role","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"AWS IAM Role for the Kubernetes service account aws-load-balancer-controller-sa.","force_detach_policies":true,"max_session_duration":3600,"path":"/","permissions_boundary":""},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role_policy_attachment.irsa[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].kubernetes_service_account_v1.irsa[0]","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"automount_service_account_token":true,"image_pull_secret":[],"metadata":[{"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"},"name":"aws-load-balancer-controller-sa","namespace":"kube-system"}],"secret":[],"timeouts":null},"sensitive_values":{"image_pull_secret":[],"metadata":[{"annotations":{},"labels":{}}],"secret":[]}}],"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0]"}]}]}]},{"resources":[{"address":"module.eks_blueprints.data.aws_eks_cluster.cluster[0]","mode":"data","type":"aws_eks_cluster","name":"cluster","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},{"address":"module.eks_blueprints.data.http.eks_cluster_readiness[0]","mode":"data","type":"http","name":"eks_cluster_readiness","index":0,"provider_name":"registry.terraform.io/terraform-aws-modules/http","schema_version":0,"values":{"insecure":null,"request_headers":null,"timeout":600},"sensitive_values":{"response_headers":{}}},{"address":"module.eks_blueprints.kubernetes_config_map.aws_auth[0]","mode":"managed","type":"kubernetes_config_map","name":"aws_auth","index":0,"provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"binary_data":null,"metadata":[{"annotations":null,"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"Terraform","terraform.io/module":"terraform-aws-eks-blueprints"},"name":"aws-auth","namespace":"kube-system"}]},"sensitive_values":{"data":{},"metadata":[{"labels":{}}]}}],"address":"module.eks_blueprints","child_modules":[{"resources":[{"address":"module.eks_blueprints.module.aws_eks.aws_ec2_tag.cluster_primary_security_group[\"Blueprint\"]","mode":"managed","type":"aws_ec2_tag","name":"cluster_primary_security_group","index":"Blueprint","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"key":"Blueprint","value":"infrastructure"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks.aws_ec2_tag.cluster_primary_security_group[\"GithubRepo\"]","mode":"managed","type":"aws_ec2_tag","name":"cluster_primary_security_group","index":"GithubRepo","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"key":"GithubRepo","value":"github.com/aws-ia/terraform-aws-eks-blueprints"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","mode":"managed","type":"aws_eks_cluster","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"enabled_cluster_log_types":["api","audit","authenticator","controllerManager","scheduler"],"encryption_config":[{"provider":[{}],"resources":["secrets"]}],"kubernetes_network_config":[{"ip_family":"ipv4"}],"name":"infrastructure","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"timeouts":{"create":null,"delete":null,"update":null},"version":"1.21","vpc_config":[{"endpoint_private_access":false,"endpoint_public_access":true,"public_access_cidrs":["0.0.0.0/0"]}]},"sensitive_values":{"certificate_authority":[],"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[{"provider":[{}],"resources":[false]}],"identity":[],"kubernetes_network_config":[{}],"tags":{},"tags_all":{},"timeouts":{},"vpc_config":[{"public_access_cidrs":[false],"security_group_ids":[],"subnet_ids":[]}]}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_openid_connect_provider.oidc_provider[0]","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["sts.amazonaws.com"],"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-eks-irsa"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-eks-irsa"}},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role.this[0]","mode":"managed","type":"aws_iam_role","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"EKSClusterAssumeRole\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"infrastructure-cluster-role","path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role_policy_attachment.this[\"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","index":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"infrastructure-cluster-role"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role_policy_attachment.this[\"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","index":"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController","role":"infrastructure-cluster-role"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group.cluster[0]","mode":"managed","type":"aws_security_group","name":"cluster","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"EKS cluster security group","name_prefix":"infrastructure-cluster-","revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-cluster"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-cluster"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group.node[0]","mode":"managed","type":"aws_security_group","name":"node","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"EKS node shared security group","name_prefix":"infrastructure-node-","revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-node","kubernetes.io/cluster/infrastructure":"owned"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-node","kubernetes.io/cluster/infrastructure":"owned"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"egress_nodes_443\"]","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"egress_nodes_443","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Cluster API to node groups","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"egress_nodes_kubelet\"]","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"egress_nodes_kubelet","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Cluster API to node kubelets","from_port":10250,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":10250,"type":"egress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"ingress_nodes_443\"]","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"ingress_nodes_443","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node groups to cluster API","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_cluster_443\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_cluster_443","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node groups to cluster API","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_https\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_https","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress all HTTPS to internet","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"sensitive_values":{"cidr_blocks":[false],"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_ntp_tcp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_ntp_tcp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress NTP/TCP to internet","from_port":123,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":123,"type":"egress"},"sensitive_values":{"cidr_blocks":[false],"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_ntp_udp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_ntp_udp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress NTP/UDP to internet","from_port":123,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":false,"to_port":123,"type":"egress"},"sensitive_values":{"cidr_blocks":[false],"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_self_coredns_tcp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_self_coredns_tcp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":true,"to_port":53,"type":"egress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_self_coredns_udp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_self_coredns_udp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":true,"to_port":53,"type":"egress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_cluster_443\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_cluster_443","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Cluster API to node groups","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_cluster_kubelet\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_cluster_kubelet","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Cluster API to node kubelets","from_port":10250,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":10250,"type":"ingress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_self_coredns_tcp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_self_coredns_tcp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":true,"to_port":53,"type":"ingress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_self_coredns_udp\"]","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_self_coredns_udp","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":true,"to_port":53,"type":"ingress"},"sensitive_values":{"prefix_list_ids":[]}},{"address":"module.eks_blueprints.module.aws_eks.data.tls_certificate.this[0]","mode":"data","type":"tls_certificate","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"content":null,"verify_chain":null},"sensitive_values":{"certificates":[]}}],"address":"module.eks_blueprints.module.aws_eks"},{"resources":[{"address":"module.eks_blueprints.module.kms[0].aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"alias/infrastructure"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.kms[0].aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"infrastructure EKS cluster secret encryption key","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Allow access for all principals in the account that are authorized\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"kms:CallerAccount\": \"027500179340\",\n          \"kms:ViaService\": \"eks.ap-northeast-2.amazonaws.com\"\n        }\n      }\n    },\n    {\n      \"Sid\": \"Allow direct access to key metadata to the account\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:List*\",\n        \"kms:Get*\",\n        \"kms:Describe*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      }\n    },\n    {\n      \"Sid\": \"Allow access for Key Administrators\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/eks-blueprints-for-terraform-workshop-admin\"\n      }\n    },\n    {\n      \"Sid\": \"Allow use of the key\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      }\n    },\n    {\n      \"Sid\": \"Allow attachment of persistent resources\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:ListGrants\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      },\n      \"Condition\": {\n        \"Bool\": {\n          \"kms:GrantIsForAWSResource\": \"true\"\n        }\n      }\n    }\n  ]\n}","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.eks_blueprints.module.kms[0]"},{"resources":[{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_policy.platform_team_eks_access[0]","mode":"managed","type":"aws_iam_policy","name":"platform_team_eks_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Platform Team EKS Console Access","name_prefix":null,"path":"/","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.platform_team[\"admin\"]","mode":"managed","type":"aws_iam_role","name":"platform_team","index":"admin","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_access[\"team-riker\"]","mode":"managed","type":"aws_iam_role","name":"team_access","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_sa_irsa[\"team-riker\"]","mode":"managed","type":"aws_iam_role","name":"team_sa_irsa","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_iam_policy_document.platform_team_eks_access[0]","mode":"data","type":"aws_iam_policy_document","name":"platform_team_eks_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["eks:AccessKubernetesApi","eks:DescribeCluster","eks:DescribeNodegroup","eks:ListClusters","eks:ListFargateProfiles","eks:ListNodegroups","eks:ListUpdates","ssm:GetParameter"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"AllowPlatformTeamEKSAccess"},{"actions":["eks:ListClusters"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"AllowListClusters"}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_cluster_role.team[\"team-riker\"]","mode":"managed","type":"kubernetes_cluster_role","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"aggregation_rule":[],"metadata":[{"annotations":null,"labels":null,"name":"team-riker-team-cluster-role"}],"rule":[{"api_groups":[""],"non_resource_urls":null,"resource_names":null,"resources":["namespaces","nodes"],"verbs":["get","list","watch"]}]},"sensitive_values":{"aggregation_rule":[],"metadata":[{}],"rule":[{"api_groups":[false],"resources":[false,false],"verbs":[false,false,false]}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_cluster_role_binding.team[\"team-riker\"]","mode":"managed","type":"kubernetes_cluster_role_binding","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"labels":null,"name":"team-riker-team-cluster-role-binding"}],"role_ref":[{"api_group":"rbac.authorization.k8s.io","kind":"ClusterRole","name":"team-riker-team-cluster-role"}],"subject":[{"api_group":"rbac.authorization.k8s.io","kind":"Group","name":"team-riker-group","namespace":"default"}]},"sensitive_values":{"metadata":[{}],"role_ref":[{}],"subject":[{}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_namespace.team[\"team-riker\"]","mode":"managed","type":"kubernetes_namespace","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"generate_name":null,"labels":{"appName":"riker-team-app","billingCode":"example","branch":"example","domain":"example","environment":"dev","projectName":"project-riker","uuid":"example"},"name":"team-riker"}],"timeouts":null},"sensitive_values":{"metadata":[{"labels":{}}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_resource_quota.team_compute_quota[\"team-riker\"]","mode":"managed","type":"kubernetes_resource_quota","name":"team_compute_quota","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"compute-quota","namespace":"team-riker"}],"spec":[{"hard":{"limits.cpu":"20000m","limits.memory":"50Gi","requests.cpu":"10000m","requests.memory":"20Gi"},"scope_selector":[],"scopes":null}],"timeouts":null},"sensitive_values":{"metadata":[{}],"spec":[{"hard":{},"scope_selector":[]}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_resource_quota.team_object_quota[\"team-riker\"]","mode":"managed","type":"kubernetes_resource_quota","name":"team_object_quota","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"object-quota","namespace":"team-riker"}],"spec":[{"hard":{"pods":"20","secrets":"20","services":"20"},"scope_selector":[],"scopes":null}],"timeouts":null},"sensitive_values":{"metadata":[{}],"spec":[{"hard":{},"scope_selector":[]}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_role.team[\"team-riker\"]","mode":"managed","type":"kubernetes_role","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"team-riker-role","namespace":"team-riker"}],"rule":[{"api_groups":["*"],"resource_names":null,"resources":["configmaps","deployments","horizontalpodautoscalers","networkpolicies","pods","podtemplates","replicasets","secrets","serviceaccounts","services","statefulsets"],"verbs":["get","list","watch"]},{"api_groups":["*"],"resource_names":null,"resources":["resourcequotas"],"verbs":["get","list","watch"]}]},"sensitive_values":{"metadata":[{}],"rule":[{"api_groups":[false],"resources":[false,false,false,false,false,false,false,false,false,false,false],"verbs":[false,false,false]},{"api_groups":[false],"resources":[false],"verbs":[false,false,false]}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_role_binding.team[\"team-riker\"]","mode":"managed","type":"kubernetes_role_binding","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"labels":null,"name":"team-riker-role-binding","namespace":"team-riker"}],"role_ref":[{"api_group":"rbac.authorization.k8s.io","kind":"Role","name":"team-riker-role"}],"subject":[{"api_group":"rbac.authorization.k8s.io","kind":"Group","name":"team-riker-group","namespace":"team-riker"}]},"sensitive_values":{"metadata":[{}],"role_ref":[{}],"subject":[{}]}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_service_account.team[\"team-riker\"]","mode":"managed","type":"kubernetes_service_account","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"automount_service_account_token":true,"image_pull_secret":[],"metadata":[{"generate_name":null,"labels":null,"name":"team-riker-sa","namespace":"team-riker"}],"secret":[],"timeouts":null},"sensitive_values":{"image_pull_secret":[],"metadata":[{"annotations":{}}],"secret":[]}}],"address":"module.eks_blueprints.module.aws_eks_teams[0]"},{"resources":[{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_eks_node_group.managed_ng","mode":"managed","type":"aws_eks_node_group","name":"managed_ng","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"ami_type":"AL2_x86_64","capacity_type":"ON_DEMAND","disk_size":50,"force_update_version":null,"instance_types":["m5.xlarge"],"labels":null,"launch_template":[],"node_group_name_prefix":"managed-ondemand-","remote_access":[],"scaling_config":[{"desired_size":3,"max_size":3,"min_size":1}],"taint":[],"timeouts":{"create":"30m","delete":"30m","update":"2h"},"update_config":[{"max_unavailable":1,"max_unavailable_percentage":null}],"version":"1.21"},"sensitive_values":{"instance_types":[false],"launch_template":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags":{},"tags_all":{},"taint":[],"timeouts":{},"update_config":[{}]}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_instance_profile.managed_ng[0]","mode":"managed","type":"aws_iam_instance_profile","name":"managed_ng","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":null,"path":"/","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng[0]","mode":"managed","type":"aws_iam_role","name":"managed_ng","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"EKS Managed Node group IAM Role","force_detach_policies":true,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].data.aws_iam_policy_document.managed_ng_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"managed_ng_assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":null,"sid":"EKSWorkerAssumeRole"}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[{"identifiers":[false]}]}]}}],"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]"}]},{"resources":[{"address":"module.kubernetes-addons.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.kubernetes-addons.data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},{"address":"module.kubernetes-addons.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.kubernetes-addons.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}}],"address":"module.kubernetes-addons","child_modules":[{"resources":[{"address":"module.kubernetes-addons.module.argocd[0].helm_release.argocd_application[\"addons\"]","mode":"managed","type":"helm_release","name":"argocd_application","index":"addons","provider_name":"registry.terraform.io/hashicorp/helm","schema_version":0,"values":{"atomic":false,"chart":".terraform/modules/kubernetes-addons/modules/kubernetes-addons/argocd/argocd-application","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"addons","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":null,"repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"destination.server","type":"","value":"https://kubernetes.default.svc"},{"name":"name","type":"","value":"addons"},{"name":"project","type":"","value":"default"},{"name":"source.helm.releaseName","type":"","value":"addons"},{"name":"source.helm.values","type":""},{"name":"source.path","type":"","value":"chart"},{"name":"source.repoUrl","type":"","value":"https://github.com/flask-mario/eks-blueprints-add-ons.git"},{"name":"source.targetRevision","type":"","value":"HEAD"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"values":null,"verify":false,"version":"0.1.0","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[],"set":[{},{},{},{},{},{},{},{}],"set_sensitive":[]}},{"address":"module.kubernetes-addons.module.argocd[0].helm_release.argocd_application[\"workloads\"]","mode":"managed","type":"helm_release","name":"argocd_application","index":"workloads","provider_name":"registry.terraform.io/hashicorp/helm","schema_version":0,"values":{"atomic":false,"chart":".terraform/modules/kubernetes-addons/modules/kubernetes-addons/argocd/argocd-application","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"workloads","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":null,"repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"destination.server","type":"","value":"https://kubernetes.default.svc"},{"name":"name","type":"","value":"workloads"},{"name":"project","type":"","value":"default"},{"name":"source.helm.releaseName","type":"","value":"workloads"},{"name":"source.helm.values","type":""},{"name":"source.path","type":"","value":"envs/dev"},{"name":"source.repoUrl","type":"","value":"https://github.com/flask-mario/eks-blueprints-workloads.git"},{"name":"source.targetRevision","type":"","value":"HEAD"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"values":null,"verify":false,"version":"0.1.0","wait":true,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[],"set":[{},{},{},{},{},{},{},{}],"set_sensitive":[]}},{"address":"module.kubernetes-addons.module.argocd[0].kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_name":"registry.terraform.io/hashicorp/kubernetes","schema_version":0,"values":{"metadata":[{"annotations":null,"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"},"name":"argocd"}],"timeouts":null},"sensitive_values":{"metadata":[{"labels":{}}]}}],"address":"module.kubernetes-addons.module.argocd[0]","child_modules":[{"resources":[{"address":"module.kubernetes-addons.module.argocd[0].module.helm_addon.helm_release.addon[0]","mode":"managed","type":"helm_release","name":"addon","index":0,"provider_name":"registry.terraform.io/hashicorp/helm","schema_version":0,"values":{"atomic":false,"chart":"argo-cd","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":"The ArgoCD Helm Chart deployment configuration","devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":"","lint":false,"max_history":0,"name":"argo-cd","namespace":"argocd","pass_credentials":false,"postrender":[{"args":null,"binary_path":""}],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://argoproj.github.io/argo-helm","repository_ca_file":null,"repository_cert_file":"","repository_key_file":"","repository_password":"","repository_username":"","reset_values":false,"reuse_values":false,"set":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":1200,"values":["# see : https://github.com/argoproj/argo-helm/blob/main/charts/argo-cd/values.yaml#L1088\nserver:\n  service:\n    type: LoadBalancer\n"],"verify":false,"version":"3.33.3","wait":false,"wait_for_jobs":false},"sensitive_values":{"metadata":[],"postrender":[{}],"set":[],"set_sensitive":[],"values":[false]}}],"address":"module.kubernetes-addons.module.argocd[0].module.helm_addon"}]}]},{"resources":[{"address":"module.vpc.aws_default_network_acl.this[0]","mode":"managed","type":"aws_default_network_acl","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"subnet_ids":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"}},"sensitive_values":{"egress":[{},{}],"ingress":[{},{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_default_route_table.default[0]","mode":"managed","type":"aws_default_route_table","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"propagating_vgws":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"timeouts":{"create":"5m","update":"5m"}},"sensitive_values":{"route":[],"tags":{},"tags_all":{},"timeouts":{}}},{"address":"module.vpc.aws_default_security_group.this[0]","mode":"managed","type":"aws_default_security_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"}},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.private[2]","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[2]","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2b","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private[2]","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[2]","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"module.aws_controllers.data.aws_caller_identity.current","module_address":"module.aws_controllers","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"account_id":true,"arn":true,"id":true,"user_id":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.aws_controllers.data.aws_eks_cluster.eks_cluster","module_address":"module.aws_controllers","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"enabled_cluster_log_types":true,"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"name":true,"platform_version":true,"role_arn":true,"status":true,"tags":true,"version":true,"vpc_config":true},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.aws_controllers.data.aws_partition.current","module_address":"module.aws_controllers","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"dns_suffix":true,"id":true,"partition":true,"reverse_dns_prefix":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.aws_controllers.data.aws_region.current","module_address":"module.aws_controllers","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"description":true,"endpoint":true,"id":true,"name":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].aws_iam_policy.aws_load_balancer_controller","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0]","mode":"managed","type":"aws_iam_policy","name":"aws_load_balancer_controller","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allows lb controller to manage ALB and NLB","name_prefix":null,"path":"/","tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].data.aws_iam_policy_document.aws_lb","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0]","mode":"data","type":"aws_iam_policy_document","name":"aws_lb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:DescribeAccountAttributes","ec2:DescribeAddresses","ec2:DescribeAvailabilityZones","ec2:DescribeCoipPools","ec2:DescribeInstances","ec2:DescribeInternetGateways","ec2:DescribeNetworkInterfaces","ec2:DescribeSecurityGroups","ec2:DescribeSubnets","ec2:DescribeTags","ec2:DescribeVpcs","ec2:GetCoipPoolUsage","elasticloadbalancing:DescribeListenerCertificates","elasticloadbalancing:DescribeListeners","elasticloadbalancing:DescribeLoadBalancerAttributes","elasticloadbalancing:DescribeLoadBalancers","elasticloadbalancing:DescribeRules","elasticloadbalancing:DescribeSSLPolicies","elasticloadbalancing:DescribeTags","elasticloadbalancing:DescribeTargetGroupAttributes","elasticloadbalancing:DescribeTargetGroups","elasticloadbalancing:DescribeTargetHealth","iam:CreateServiceLinkedRole"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["acm:DescribeCertificate","acm:ListCertificates","cognito-idp:DescribeUserPoolClient","iam:GetServerCertificate","iam:ListServerCertificates","shield:CreateProtection","shield:DeleteProtection","shield:DescribeProtection","shield:GetSubscriptionState","waf-regional:AssociateWebACL","waf-regional:DisassociateWebACL","waf-regional:GetWebACL","waf-regional:GetWebACLForResource","wafv2:AssociateWebACL","wafv2:DisassociateWebACL","wafv2:GetWebACL","wafv2:GetWebACLForResource"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:CreateSecurityGroup"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:CreateTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"},{"test":"StringEquals","values":["CreateSecurityGroup"],"variable":"ec2:CreateAction"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:CreateTags","ec2:DeleteTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/ingress.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:AddTags","elasticloadbalancing:DeleteTargetGroup","elasticloadbalancing:RemoveTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/ingress.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:CreateTags","ec2:DeleteTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"},{"test":"Null","values":["true"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["ec2:AuthorizeSecurityGroupIngress","ec2:DeleteSecurityGroup","ec2:RevokeSecurityGroupIngress"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:CreateLoadBalancer","elasticloadbalancing:CreateTargetGroup"],"condition":[{"test":"Null","values":["false"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:CreateListener","elasticloadbalancing:CreateRule","elasticloadbalancing:DeleteListener","elasticloadbalancing:DeleteRule"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"},{"test":"Null","values":["true"],"variable":"aws:RequestTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:DeleteLoadBalancer","elasticloadbalancing:DeleteTargetGroup","elasticloadbalancing:ModifyLoadBalancerAttributes","elasticloadbalancing:ModifyTargetGroup","elasticloadbalancing:ModifyTargetGroupAttributes","elasticloadbalancing:SetIpAddressType","elasticloadbalancing:SetSecurityGroups","elasticloadbalancing:SetSubnets"],"condition":[{"test":"Null","values":["false"],"variable":"aws:ResourceTag/elbv2.k8s.aws/cluster"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""},{"actions":["elasticloadbalancing:DeregisterTargets","elasticloadbalancing:RegisterTargets"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":""},{"actions":["elasticloadbalancing:AddListenerCertificates","elasticloadbalancing:ModifyListener","elasticloadbalancing:ModifyRule","elasticloadbalancing:RemoveListenerCertificates","elasticloadbalancing:SetWebAcl"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":""}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[true,true,true]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[true,true,true]},{"actions":[false,false,false,false,false,false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false,false,false]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[],"resources":[false,false,false]},{"actions":[false,false,false,false,false,false,false,false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.helm_release.addon[0]","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon","mode":"managed","type":"helm_release","name":"addon","index":0,"provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":"aws-load-balancer-controller","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":"aws-load-balancer-controller Helm Chart for ingress resources","devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":"","lint":false,"max_history":0,"name":"aws-load-balancer-controller","namespace":"kube-system","pass_credentials":false,"postrender":[{"args":null,"binary_path":""}],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://aws.github.io/eks-charts","repository_ca_file":null,"repository_cert_file":"","repository_key_file":"","repository_password":"","repository_username":"","reset_values":false,"reuse_values":false,"set":[{"name":"serviceAccount.create","type":"","value":"false"},{"name":"serviceAccount.name","type":"","value":"aws-load-balancer-controller-sa"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":1200,"verify":false,"version":"1.4.1","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[{}],"set":[{},{}],"set_sensitive":[],"values":true},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[{}],"repository_password":true,"set":[{},{}],"set_sensitive":[],"values":[]}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role.irsa[0]","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0]","mode":"managed","type":"aws_iam_role","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"AWS IAM Role for the Kubernetes service account aws-load-balancer-controller-sa.","force_detach_policies":true,"max_session_duration":3600,"path":"/","permissions_boundary":""},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role_policy_attachment.irsa[0]","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"policy_arn":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].kubernetes_service_account_v1.irsa[0]","module_address":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0]","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","index":0,"provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"automount_service_account_token":true,"image_pull_secret":[],"metadata":[{"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"},"name":"aws-load-balancer-controller-sa","namespace":"kube-system"}],"secret":[],"timeouts":null},"after_unknown":{"default_secret_name":true,"id":true,"image_pull_secret":[],"metadata":[{"annotations":true,"generation":true,"labels":{},"resource_version":true,"uid":true}],"secret":[]},"before_sensitive":false,"after_sensitive":{"image_pull_secret":[],"metadata":[{"annotations":{},"labels":{}}],"secret":[]}}},{"address":"module.eks_blueprints.data.aws_eks_cluster.cluster[0]","module_address":"module.eks_blueprints","mode":"data","type":"aws_eks_cluster","name":"cluster","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"enabled_cluster_log_types":true,"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"name":true,"platform_version":true,"role_arn":true,"status":true,"tags":true,"version":true,"vpc_config":true},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.eks_blueprints.data.http.eks_cluster_readiness[0]","module_address":"module.eks_blueprints","mode":"data","type":"http","name":"eks_cluster_readiness","index":0,"provider_name":"registry.terraform.io/terraform-aws-modules/http","change":{"actions":["read"],"before":null,"after":{"insecure":null,"request_headers":null,"timeout":600},"after_unknown":{"body":true,"ca_certificate":true,"id":true,"response_headers":true,"url":true},"before_sensitive":false,"after_sensitive":{"response_headers":{}}},"action_reason":"read_because_config_unknown"},{"address":"module.eks_blueprints.kubernetes_config_map.aws_auth[0]","module_address":"module.eks_blueprints","mode":"managed","type":"kubernetes_config_map","name":"aws_auth","index":0,"provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"binary_data":null,"metadata":[{"annotations":null,"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"Terraform","terraform.io/module":"terraform-aws-eks-blueprints"},"name":"aws-auth","namespace":"kube-system"}]},"after_unknown":{"data":true,"id":true,"metadata":[{"generation":true,"labels":{},"resource_version":true,"uid":true}]},"before_sensitive":false,"after_sensitive":{"data":{},"metadata":[{"labels":{}}]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_ec2_tag.cluster_primary_security_group[\"Blueprint\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_ec2_tag","name":"cluster_primary_security_group","index":"Blueprint","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key":"Blueprint","value":"infrastructure"},"after_unknown":{"id":true,"resource_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_ec2_tag.cluster_primary_security_group[\"GithubRepo\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_ec2_tag","name":"cluster_primary_security_group","index":"GithubRepo","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key":"GithubRepo","value":"github.com/aws-ia/terraform-aws-eks-blueprints"},"after_unknown":{"id":true,"resource_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_eks_cluster","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"enabled_cluster_log_types":["api","audit","authenticator","controllerManager","scheduler"],"encryption_config":[{"provider":[{}],"resources":["secrets"]}],"kubernetes_network_config":[{"ip_family":"ipv4"}],"name":"infrastructure","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"timeouts":{"create":null,"delete":null,"update":null},"version":"1.21","vpc_config":[{"endpoint_private_access":false,"endpoint_public_access":true,"public_access_cidrs":["0.0.0.0/0"]}]},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[{"provider":[{"key_arn":true}],"resources":[false]}],"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":[{"service_ipv4_cidr":true}],"platform_version":true,"role_arn":true,"status":true,"tags":{},"tags_all":{},"timeouts":{},"vpc_config":[{"cluster_security_group_id":true,"public_access_cidrs":[false],"security_group_ids":true,"subnet_ids":true,"vpc_id":true}]},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"enabled_cluster_log_types":[false,false,false,false,false],"encryption_config":[{"provider":[{}],"resources":[false]}],"identity":[],"kubernetes_network_config":[{}],"tags":{},"tags_all":{},"timeouts":{},"vpc_config":[{"public_access_cidrs":[false],"security_group_ids":[],"subnet_ids":[]}]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_openid_connect_provider.oidc_provider[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["sts.amazonaws.com"],"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-eks-irsa"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-eks-irsa"}},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags":{},"tags_all":{},"thumbprint_list":true,"url":true},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role.this[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_iam_role","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"EKSClusterAssumeRole\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":true,"max_session_duration":3600,"name":"infrastructure-cluster-role","path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role_policy_attachment.this[\"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","index":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"infrastructure-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_iam_role_policy_attachment.this[\"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","index":"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSVPCResourceController","role":"infrastructure-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group.cluster[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group","name":"cluster","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"EKS cluster security group","name_prefix":"infrastructure-cluster-","revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-cluster"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-cluster"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group.node[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group","name":"node","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"EKS node shared security group","name_prefix":"infrastructure-node-","revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-node","kubernetes.io/cluster/infrastructure":"owned"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-node","kubernetes.io/cluster/infrastructure":"owned"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"egress_nodes_443\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"egress_nodes_443","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Cluster API to node groups","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"egress_nodes_kubelet\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"egress_nodes_kubelet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Cluster API to node kubelets","from_port":10250,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":10250,"type":"egress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.cluster[\"ingress_nodes_443\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"cluster","index":"ingress_nodes_443","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node groups to cluster API","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_cluster_443\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_cluster_443","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node groups to cluster API","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_https\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_https","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress all HTTPS to internet","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false],"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_ntp_tcp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_ntp_tcp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress NTP/TCP to internet","from_port":123,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":123,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false],"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_ntp_udp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_ntp_udp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Egress NTP/UDP to internet","from_port":123,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":false,"to_port":123,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false],"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_self_coredns_tcp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_self_coredns_tcp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":true,"to_port":53,"type":"egress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"egress_self_coredns_udp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"egress_self_coredns_udp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":true,"to_port":53,"type":"egress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_cluster_443\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_cluster_443","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Cluster API to node groups","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443,"type":"ingress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_cluster_kubelet\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_cluster_kubelet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Cluster API to node kubelets","from_port":10250,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":10250,"type":"ingress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_self_coredns_tcp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_self_coredns_tcp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"tcp","self":true,"to_port":53,"type":"ingress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.aws_security_group_rule.node[\"ingress_self_coredns_udp\"]","module_address":"module.eks_blueprints.module.aws_eks","mode":"managed","type":"aws_security_group_rule","name":"node","index":"ingress_self_coredns_udp","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Node to node CoreDNS","from_port":53,"ipv6_cidr_blocks":null,"prefix_list_ids":[],"protocol":"udp","self":true,"to_port":53,"type":"ingress"},"after_unknown":{"id":true,"prefix_list_ids":[],"security_group_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"prefix_list_ids":[]}}},{"address":"module.eks_blueprints.module.aws_eks.data.tls_certificate.this[0]","module_address":"module.eks_blueprints.module.aws_eks","mode":"data","type":"tls_certificate","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/tls","change":{"actions":["read"],"before":null,"after":{"content":null,"verify_chain":null},"after_unknown":{"certificates":true,"id":true,"url":true},"before_sensitive":false,"after_sensitive":{"certificates":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_eks_node_group.managed_ng","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_eks_node_group","name":"managed_ng","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami_type":"AL2_x86_64","capacity_type":"ON_DEMAND","disk_size":50,"force_update_version":null,"instance_types":["m5.xlarge"],"labels":null,"launch_template":[],"node_group_name_prefix":"managed-ondemand-","remote_access":[],"scaling_config":[{"desired_size":3,"max_size":3,"min_size":1}],"taint":[],"timeouts":{"create":"30m","delete":"30m","update":"2h"},"update_config":[{"max_unavailable":1,"max_unavailable_percentage":null}],"version":"1.21"},"after_unknown":{"arn":true,"cluster_name":true,"id":true,"instance_types":[false],"launch_template":[],"node_group_name":true,"node_role_arn":true,"release_version":true,"remote_access":[],"resources":true,"scaling_config":[{}],"status":true,"subnet_ids":true,"tags":true,"tags_all":true,"taint":[],"timeouts":{},"update_config":[{}]},"before_sensitive":false,"after_sensitive":{"instance_types":[false],"launch_template":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags":{},"tags_all":{},"taint":[],"timeouts":{},"update_config":[{}]}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_instance_profile.managed_ng[0]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_instance_profile","name":"managed_ng","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":null,"path":"/","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"name":true,"role":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng[0]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_role","name":"managed_ng","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"EKS Managed Node group IAM Role","force_detach_policies":true,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly\"]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy\"]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy\"]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role_policy_attachment.managed_ng[\"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore\"]","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","index":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].data.aws_iam_policy_document.managed_ng_assume_role_policy","module_address":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"]","mode":"data","type":"aws_iam_policy_document","name":"managed_ng_assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":null,"sid":"EKSWorkerAssumeRole"}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[{"identifiers":[false]}]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},"action_reason":"read_because_dependency_pending"},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_policy.platform_team_eks_access[0]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"aws_iam_policy","name":"platform_team_eks_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Platform Team EKS Console Access","name_prefix":null,"path":"/","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"id":true,"name":true,"policy":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.platform_team[\"admin\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"aws_iam_role","name":"platform_team","index":"admin","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_access[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"aws_iam_role","name":"team_access","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7\"]}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_sa_irsa[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"aws_iam_role","name":"team_sa_irsa","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_eks_cluster.eks_cluster","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"enabled_cluster_log_types":true,"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"name":true,"platform_version":true,"role_arn":true,"status":true,"tags":true,"version":true,"vpc_config":true},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_iam_policy_document.platform_team_eks_access[0]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"data","type":"aws_iam_policy_document","name":"platform_team_eks_access","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["eks:AccessKubernetesApi","eks:DescribeCluster","eks:DescribeNodegroup","eks:ListClusters","eks:ListFargateProfiles","eks:ListNodegroups","eks:ListUpdates","ssm:GetParameter"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"AllowPlatformTeamEKSAccess"},{"actions":["eks:ListClusters"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"AllowListClusters"}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_cluster_role.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_cluster_role","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"aggregation_rule":[],"metadata":[{"annotations":null,"labels":null,"name":"team-riker-team-cluster-role"}],"rule":[{"api_groups":[""],"non_resource_urls":null,"resource_names":null,"resources":["namespaces","nodes"],"verbs":["get","list","watch"]}]},"after_unknown":{"aggregation_rule":[],"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"rule":[{"api_groups":[false],"resources":[false,false],"verbs":[false,false,false]}]},"before_sensitive":false,"after_sensitive":{"aggregation_rule":[],"metadata":[{}],"rule":[{"api_groups":[false],"resources":[false,false],"verbs":[false,false,false]}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_cluster_role_binding.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_cluster_role_binding","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"labels":null,"name":"team-riker-team-cluster-role-binding"}],"role_ref":[{"api_group":"rbac.authorization.k8s.io","kind":"ClusterRole","name":"team-riker-team-cluster-role"}],"subject":[{"api_group":"rbac.authorization.k8s.io","kind":"Group","name":"team-riker-group","namespace":"default"}]},"after_unknown":{"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"role_ref":[{}],"subject":[{}]},"before_sensitive":false,"after_sensitive":{"metadata":[{}],"role_ref":[{}],"subject":[{}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_namespace.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_namespace","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"generate_name":null,"labels":{"appName":"riker-team-app","billingCode":"example","branch":"example","domain":"example","environment":"dev","projectName":"project-riker","uuid":"example"},"name":"team-riker"}],"timeouts":null},"after_unknown":{"id":true,"metadata":[{"generation":true,"labels":{},"resource_version":true,"uid":true}]},"before_sensitive":false,"after_sensitive":{"metadata":[{"labels":{}}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_resource_quota.team_compute_quota[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_resource_quota","name":"team_compute_quota","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"compute-quota","namespace":"team-riker"}],"spec":[{"hard":{"limits.cpu":"20000m","limits.memory":"50Gi","requests.cpu":"10000m","requests.memory":"20Gi"},"scope_selector":[],"scopes":null}],"timeouts":null},"after_unknown":{"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"spec":[{"hard":{},"scope_selector":[]}]},"before_sensitive":false,"after_sensitive":{"metadata":[{}],"spec":[{"hard":{},"scope_selector":[]}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_resource_quota.team_object_quota[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_resource_quota","name":"team_object_quota","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"object-quota","namespace":"team-riker"}],"spec":[{"hard":{"pods":"20","secrets":"20","services":"20"},"scope_selector":[],"scopes":null}],"timeouts":null},"after_unknown":{"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"spec":[{"hard":{},"scope_selector":[]}]},"before_sensitive":false,"after_sensitive":{"metadata":[{}],"spec":[{"hard":{},"scope_selector":[]}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_role.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_role","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"generate_name":null,"labels":null,"name":"team-riker-role","namespace":"team-riker"}],"rule":[{"api_groups":["*"],"resource_names":null,"resources":["configmaps","deployments","horizontalpodautoscalers","networkpolicies","pods","podtemplates","replicasets","secrets","serviceaccounts","services","statefulsets"],"verbs":["get","list","watch"]},{"api_groups":["*"],"resource_names":null,"resources":["resourcequotas"],"verbs":["get","list","watch"]}]},"after_unknown":{"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"rule":[{"api_groups":[false],"resources":[false,false,false,false,false,false,false,false,false,false,false],"verbs":[false,false,false]},{"api_groups":[false],"resources":[false],"verbs":[false,false,false]}]},"before_sensitive":false,"after_sensitive":{"metadata":[{}],"rule":[{"api_groups":[false],"resources":[false,false,false,false,false,false,false,false,false,false,false],"verbs":[false,false,false]},{"api_groups":[false],"resources":[false],"verbs":[false,false,false]}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_role_binding.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_role_binding","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"labels":null,"name":"team-riker-role-binding","namespace":"team-riker"}],"role_ref":[{"api_group":"rbac.authorization.k8s.io","kind":"Role","name":"team-riker-role"}],"subject":[{"api_group":"rbac.authorization.k8s.io","kind":"Group","name":"team-riker-group","namespace":"team-riker"}]},"after_unknown":{"id":true,"metadata":[{"generation":true,"resource_version":true,"uid":true}],"role_ref":[{}],"subject":[{}]},"before_sensitive":false,"after_sensitive":{"metadata":[{}],"role_ref":[{}],"subject":[{}]}}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_service_account.team[\"team-riker\"]","module_address":"module.eks_blueprints.module.aws_eks_teams[0]","mode":"managed","type":"kubernetes_service_account","name":"team","index":"team-riker","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"automount_service_account_token":true,"image_pull_secret":[],"metadata":[{"generate_name":null,"labels":null,"name":"team-riker-sa","namespace":"team-riker"}],"secret":[],"timeouts":null},"after_unknown":{"default_secret_name":true,"id":true,"image_pull_secret":[],"metadata":[{"annotations":true,"generation":true,"resource_version":true,"uid":true}],"secret":[]},"before_sensitive":false,"after_sensitive":{"image_pull_secret":[],"metadata":[{"annotations":{}}],"secret":[]}}},{"address":"module.eks_blueprints.module.kms[0].aws_kms_alias.this","module_address":"module.eks_blueprints.module.kms[0]","mode":"managed","type":"aws_kms_alias","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/infrastructure"},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"target_key_arn":true,"target_key_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.eks_blueprints.module.kms[0].aws_kms_key.this","module_address":"module.eks_blueprints.module.kms[0]","mode":"managed","type":"aws_kms_key","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"infrastructure EKS cluster secret encryption key","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Allow access for all principals in the account that are authorized\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"kms:CallerAccount\": \"027500179340\",\n          \"kms:ViaService\": \"eks.ap-northeast-2.amazonaws.com\"\n        }\n      }\n    },\n    {\n      \"Sid\": \"Allow direct access to key metadata to the account\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:List*\",\n        \"kms:Get*\",\n        \"kms:Describe*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      }\n    },\n    {\n      \"Sid\": \"Allow access for Key Administrators\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/eks-blueprints-for-terraform-workshop-admin\"\n      }\n    },\n    {\n      \"Sid\": \"Allow use of the key\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      }\n    },\n    {\n      \"Sid\": \"Allow attachment of persistent resources\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:ListGrants\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      },\n      \"Condition\": {\n        \"Bool\": {\n          \"kms:GrantIsForAWSResource\": \"true\"\n        }\n      }\n    }\n  ]\n}","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints"}},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.kubernetes-addons.data.aws_caller_identity.current","module_address":"module.kubernetes-addons","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"account_id":true,"arn":true,"id":true,"user_id":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.kubernetes-addons.data.aws_eks_cluster.eks_cluster","module_address":"module.kubernetes-addons","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"arn":true,"certificate_authority":true,"created_at":true,"enabled_cluster_log_types":true,"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"name":true,"platform_version":true,"role_arn":true,"status":true,"tags":true,"version":true,"vpc_config":true},"before_sensitive":false,"after_sensitive":{"certificate_authority":[],"enabled_cluster_log_types":[],"identity":[],"kubernetes_network_config":[],"tags":{},"vpc_config":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.kubernetes-addons.data.aws_partition.current","module_address":"module.kubernetes-addons","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"dns_suffix":true,"id":true,"partition":true,"reverse_dns_prefix":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.kubernetes-addons.data.aws_region.current","module_address":"module.kubernetes-addons","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"description":true,"endpoint":true,"id":true,"name":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.kubernetes-addons.module.argocd[0].helm_release.argocd_application[\"addons\"]","module_address":"module.kubernetes-addons.module.argocd[0]","mode":"managed","type":"helm_release","name":"argocd_application","index":"addons","provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":".terraform/modules/kubernetes-addons/modules/kubernetes-addons/argocd/argocd-application","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"addons","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":null,"repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"destination.server","type":"","value":"https://kubernetes.default.svc"},{"name":"name","type":"","value":"addons"},{"name":"project","type":"","value":"default"},{"name":"source.helm.releaseName","type":"","value":"addons"},{"name":"source.helm.values","type":""},{"name":"source.path","type":"","value":"chart"},{"name":"source.repoUrl","type":"","value":"https://github.com/flask-mario/eks-blueprints-add-ons.git"},{"name":"source.targetRevision","type":"","value":"HEAD"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"values":null,"verify":false,"version":"0.1.0","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[],"set":[{},{},{},{},{"value":true},{},{},{}],"set_sensitive":[]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[],"repository_password":true,"set":[{},{},{},{},{},{},{},{}],"set_sensitive":[]}}},{"address":"module.kubernetes-addons.module.argocd[0].helm_release.argocd_application[\"workloads\"]","module_address":"module.kubernetes-addons.module.argocd[0]","mode":"managed","type":"helm_release","name":"argocd_application","index":"workloads","provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":".terraform/modules/kubernetes-addons/modules/kubernetes-addons/argocd/argocd-application","cleanup_on_fail":false,"create_namespace":false,"dependency_update":false,"description":null,"devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":null,"lint":false,"max_history":0,"name":"workloads","namespace":"argocd","pass_credentials":false,"postrender":[],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":null,"repository_ca_file":null,"repository_cert_file":null,"repository_key_file":null,"repository_password":null,"repository_username":null,"reset_values":false,"reuse_values":false,"set":[{"name":"destination.server","type":"","value":"https://kubernetes.default.svc"},{"name":"name","type":"","value":"workloads"},{"name":"project","type":"","value":"default"},{"name":"source.helm.releaseName","type":"","value":"workloads"},{"name":"source.helm.values","type":""},{"name":"source.path","type":"","value":"envs/dev"},{"name":"source.repoUrl","type":"","value":"https://github.com/flask-mario/eks-blueprints-workloads.git"},{"name":"source.targetRevision","type":"","value":"HEAD"}],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":300,"values":null,"verify":false,"version":"0.1.0","wait":true,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[],"set":[{},{},{},{},{"value":true},{},{},{}],"set_sensitive":[]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[],"repository_password":true,"set":[{},{},{},{},{},{},{},{}],"set_sensitive":[]}}},{"address":"module.kubernetes-addons.module.argocd[0].kubernetes_namespace_v1.this","module_address":"module.kubernetes-addons.module.argocd[0]","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_name":"registry.terraform.io/hashicorp/kubernetes","change":{"actions":["create"],"before":null,"after":{"metadata":[{"annotations":null,"generate_name":null,"labels":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"},"name":"argocd"}],"timeouts":null},"after_unknown":{"id":true,"metadata":[{"generation":true,"labels":{},"resource_version":true,"uid":true}]},"before_sensitive":false,"after_sensitive":{"metadata":[{"labels":{}}]}}},{"address":"module.kubernetes-addons.module.argocd[0].module.helm_addon.helm_release.addon[0]","module_address":"module.kubernetes-addons.module.argocd[0].module.helm_addon","mode":"managed","type":"helm_release","name":"addon","index":0,"provider_name":"registry.terraform.io/hashicorp/helm","change":{"actions":["create"],"before":null,"after":{"atomic":false,"chart":"argo-cd","cleanup_on_fail":false,"create_namespace":true,"dependency_update":false,"description":"The ArgoCD Helm Chart deployment configuration","devel":null,"disable_crd_hooks":false,"disable_openapi_validation":false,"disable_webhooks":false,"force_update":false,"keyring":"","lint":false,"max_history":0,"name":"argo-cd","namespace":"argocd","pass_credentials":false,"postrender":[{"args":null,"binary_path":""}],"recreate_pods":false,"render_subchart_notes":true,"replace":false,"repository":"https://argoproj.github.io/argo-helm","repository_ca_file":null,"repository_cert_file":"","repository_key_file":"","repository_password":"","repository_username":"","reset_values":false,"reuse_values":false,"set":[],"set_sensitive":[],"skip_crds":false,"status":"deployed","timeout":1200,"values":["# see : https://github.com/argoproj/argo-helm/blob/main/charts/argo-cd/values.yaml#L1088\nserver:\n  service:\n    type: LoadBalancer\n"],"verify":false,"version":"3.33.3","wait":false,"wait_for_jobs":false},"after_unknown":{"id":true,"manifest":true,"metadata":true,"postrender":[{}],"set":[],"set_sensitive":[],"values":[false]},"before_sensitive":false,"after_sensitive":{"metadata":[],"postrender":[{}],"repository_password":true,"set":[],"set_sensitive":[],"values":[false]}}},{"address":"module.vpc.aws_default_network_acl.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_default_network_acl","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"egress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"ingress":[{"action":"allow","cidr_block":"","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"::/0","protocol":"-1","rule_no":101,"to_port":0},{"action":"allow","cidr_block":"0.0.0.0/0","from_port":0,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":"","protocol":"-1","rule_no":100,"to_port":0}],"subnet_ids":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"egress":[{},{}],"id":true,"ingress":[{},{}],"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{},{}],"ingress":[{},{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_default_route_table.default[0]","module_address":"module.vpc","mode":"managed","type":"aws_default_route_table","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"propagating_vgws":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"timeouts":{"create":"5m","update":"5m"}},"after_unknown":{"arn":true,"default_route_table_id":true,"id":true,"owner_id":true,"route":true,"tags":{},"tags_all":{},"timeouts":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"route":[],"tags":{},"tags_all":{},"timeouts":{}}}},{"address":"module.vpc.aws_default_security_group.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_default_security_group","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"revoke_rules_on_delete":false,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-default"}},"after_unknown":{"arn":true,"description":true,"egress":true,"id":true,"ingress":true,"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_eip.nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-ap-northeast-2a"}},"after_unknown":{"allocation_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route_table.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_subnet.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.10.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2b","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-private-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/internal-elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2a","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2b","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure-public-ap-northeast-2c","kubernetes.io/cluster/infrastructure":"shared","kubernetes.io/role/elb":"1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"},"tags_all":{"Blueprint":"infrastructure","GithubRepo":"github.com/aws-ia/terraform-aws-eks-blueprints","Name":"infrastructure"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"output_changes":{"configure_kubectl":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"platform_team":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"private_subnets":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"public_subnets":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"team_riker":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.2.3","values":{"root_module":{"resources":[{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["ap-northeast-2"],"id":"ap-northeast-2","names":["ap-northeast-2a","ap-northeast-2b","ap-northeast-2c","ap-northeast-2d"],"state":"available","zone_ids":["apne2-az1","apne2-az2","apne2-az3","apne2-az4"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false],"zone_ids":[false,false,false,false]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"027500179340","arn":"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7","id":"027500179340","user_id":"AROAQMZZDN6GIXUVGOP6K:i-010aab8cccaf907c7"},"sensitive_values":{}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Asia Pacific (Seoul)","endpoint":"ec2.ap-northeast-2.amazonaws.com","id":"ap-northeast-2","name":"ap-northeast-2"},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.eks_blueprints.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"027500179340","arn":"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7","id":"027500179340","user_id":"AROAQMZZDN6GIXUVGOP6K:i-010aab8cccaf907c7"},"sensitive_values":{}},{"address":"module.eks_blueprints.data.aws_iam_policy_document.eks_key","mode":"data","type":"aws_iam_policy_document","name":"eks_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2060413890","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Allow access for all principals in the account that are authorized\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"kms:CallerAccount\": \"027500179340\",\n          \"kms:ViaService\": \"eks.ap-northeast-2.amazonaws.com\"\n        }\n      }\n    },\n    {\n      \"Sid\": \"Allow direct access to key metadata to the account\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:List*\",\n        \"kms:Get*\",\n        \"kms:Describe*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:root\"\n      }\n    },\n    {\n      \"Sid\": \"Allow access for Key Administrators\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/eks-blueprints-for-terraform-workshop-admin\"\n      }\n    },\n    {\n      \"Sid\": \"Allow use of the key\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      }\n    },\n    {\n      \"Sid\": \"Allow attachment of persistent resources\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:RevokeGrant\",\n        \"kms:ListGrants\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::027500179340:role/infrastructure-cluster-role\"\n      },\n      \"Condition\": {\n        \"Bool\": {\n          \"kms:GrantIsForAWSResource\": \"true\"\n        }\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["kms:CreateGrant","kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"condition":[{"test":"StringEquals","values":["027500179340"],"variable":"kms:CallerAccount"},{"test":"StringEquals","values":["eks.ap-northeast-2.amazonaws.com"],"variable":"kms:ViaService"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::027500179340:root"],"type":"AWS"}],"resources":["*"],"sid":"Allow access for all principals in the account that are authorized"},{"actions":["kms:Describe*","kms:Get*","kms:List*","kms:RevokeGrant"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::027500179340:root"],"type":"AWS"}],"resources":["*"],"sid":"Allow direct access to key metadata to the account"},{"actions":["kms:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::027500179340:role/eks-blueprints-for-terraform-workshop-admin"],"type":"AWS"}],"resources":["*"],"sid":"Allow access for Key Administrators"},{"actions":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::027500179340:role/infrastructure-cluster-role"],"type":"AWS"}],"resources":["*"],"sid":"Allow use of the key"},{"actions":["kms:CreateGrant","kms:ListGrants","kms:RevokeGrant"],"condition":[{"test":"Bool","values":["true"],"variable":"kms:GrantIsForAWSResource"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::027500179340:role/infrastructure-cluster-role"],"type":"AWS"}],"resources":["*"],"sid":"Allow attachment of persistent resources"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false,false],"condition":[{"values":[false]},{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false,false,false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},{"address":"module.eks_blueprints.data.aws_iam_session_context.current","mode":"data","type":"aws_iam_session_context","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7","id":"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7","issuer_arn":"arn:aws:iam::027500179340:role/eks-blueprints-for-terraform-workshop-admin","issuer_id":"AROAQMZZDN6GIXUVGOP6K","issuer_name":"eks-blueprints-for-terraform-workshop-admin","session_name":"i-010aab8cccaf907c7"},"sensitive_values":{}},{"address":"module.eks_blueprints.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"module.eks_blueprints.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Asia Pacific (Seoul)","endpoint":"ec2.ap-northeast-2.amazonaws.com","id":"ap-northeast-2","name":"ap-northeast-2"},"sensitive_values":{}}],"address":"module.eks_blueprints","child_modules":[{"resources":[{"address":"module.eks_blueprints.module.aws_eks.data.aws_iam_policy_document.assume_role_policy[0]","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2764486067","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"EKSClusterAssumeRole\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"eks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["eks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":"EKSClusterAssumeRole"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.eks_blueprints.module.aws_eks.data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}}],"address":"module.eks_blueprints.module.aws_eks"},{"resources":[{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"027500179340","arn":"arn:aws:sts::027500179340:assumed-role/eks-blueprints-for-terraform-workshop-admin/i-010aab8cccaf907c7","id":"027500179340","user_id":"AROAQMZZDN6GIXUVGOP6K:i-010aab8cccaf907c7"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Asia Pacific (Seoul)","endpoint":"ec2.ap-northeast-2.amazonaws.com","id":"ap-northeast-2","name":"ap-northeast-2"},"sensitive_values":{}}],"address":"module.eks_blueprints.module.aws_eks_teams[0]"}]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0"},"helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","expressions":{"kubernetes":[{"cluster_ca_certificate":{"references":["module.eks_blueprints.eks_cluster_certificate_authority_data","module.eks_blueprints"]},"exec":[{"api_version":{"constant_value":"client.authentication.k8s.io/v1beta1"},"args":{"references":["module.eks_blueprints.eks_cluster_id","module.eks_blueprints"]},"command":{"constant_value":"aws"}}],"host":{"references":["module.eks_blueprints.eks_cluster_endpoint","module.eks_blueprints"]}}]}},"kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.14.0","expressions":{"apply_retry_count":{"constant_value":10},"cluster_ca_certificate":{"references":["module.eks_blueprints.eks_cluster_certificate_authority_data","module.eks_blueprints"]},"exec":[{"api_version":{"constant_value":"client.authentication.k8s.io/v1beta1"},"args":{"references":["module.eks_blueprints.eks_cluster_id","module.eks_blueprints"]},"command":{"constant_value":"aws"}}],"host":{"references":["module.eks_blueprints.eks_cluster_endpoint","module.eks_blueprints"]},"load_config_file":{"constant_value":false}}},"kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","expressions":{"cluster_ca_certificate":{"references":["module.eks_blueprints.eks_cluster_certificate_authority_data","module.eks_blueprints"]},"exec":[{"api_version":{"constant_value":"client.authentication.k8s.io/v1beta1"},"args":{"references":["module.eks_blueprints.eks_cluster_id","module.eks_blueprints"]},"command":{"constant_value":"aws"}}],"host":{"references":["module.eks_blueprints.eks_cluster_endpoint","module.eks_blueprints"]}}},"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon"},"module.aws_controllers.module.adot_collector_haproxy:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_haproxy"},"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_java.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.adot_collector_java.module.helm_addon"},"module.aws_controllers.module.adot_collector_java:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_java"},"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_memcached.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon"},"module.aws_controllers.module.adot_collector_memcached:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_memcached"},"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa"},"module.aws_controllers.module.adot_collector_nginx.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon"},"module.aws_controllers.module.adot_collector_nginx:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.adot_collector_nginx"},"module.aws_controllers.module.agones.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.agones.module.helm_addon.module.irsa"},"module.aws_controllers.module.agones.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.agones.module.helm_addon.module.irsa"},"module.aws_controllers.module.agones.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.agones.module.helm_addon"},"module.aws_controllers.module.agones:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.agones"},"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa"},"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa"},"module.aws_controllers.module.argo_rollouts.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.argo_rollouts.module.helm_addon"},"module.aws_controllers.module.argo_rollouts:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.argo_rollouts"},"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa"},"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa"},"module.aws_controllers.module.argocd:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.argocd"},"module.aws_controllers.module.argocd:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.argocd"},"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_cloudwatch_metrics:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_cloudwatch_metrics"},"module.aws_controllers.module.aws_cloudwatch_metrics:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_cloudwatch_metrics"},"module.aws_controllers.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_ebs_csi_driver.module.irsa_addon"},"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon"},"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon"},"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon"},"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon"},"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa"},"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon"},"module.aws_controllers.module.aws_vpc_cni.module.irsa_addon:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.aws_vpc_cni.module.irsa_addon"},"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa"},"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa"},"module.aws_controllers.module.cert_manager:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.cert_manager"},"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa"},"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa"},"module.aws_controllers.module.cluster_autoscaler.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon"},"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa"},"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa"},"module.aws_controllers.module.crossplane.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.crossplane.module.helm_addon"},"module.aws_controllers.module.crossplane:kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.14.0","module_address":"module.aws_controllers.module.crossplane"},"module.aws_controllers.module.crossplane:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.crossplane"},"module.aws_controllers.module.crossplane:time":{"name":"time","full_name":"registry.terraform.io/hashicorp/time","version_constraint":"\u003e= 0.7.0","module_address":"module.aws_controllers.module.crossplane"},"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa"},"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa"},"module.aws_controllers.module.external_dns.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.external_dns.module.helm_addon"},"module.aws_controllers.module.fargate_fluentbit:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.fargate_fluentbit"},"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa"},"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa"},"module.aws_controllers.module.ingress_nginx.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.ingress_nginx.module.helm_addon"},"module.aws_controllers.module.ingress_nginx:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.ingress_nginx"},"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa"},"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa"},"module.aws_controllers.module.karpenter.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.karpenter.module.helm_addon"},"module.aws_controllers.module.keda.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.keda.module.helm_addon.module.irsa"},"module.aws_controllers.module.keda.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.keda.module.helm_addon.module.irsa"},"module.aws_controllers.module.keda.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.keda.module.helm_addon"},"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa"},"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa"},"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon"},"module.aws_controllers.module.kubernetes_dashboard:kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.14.0","module_address":"module.aws_controllers.module.kubernetes_dashboard"},"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa"},"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa"},"module.aws_controllers.module.metrics_server.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.metrics_server.module.helm_addon"},"module.aws_controllers.module.metrics_server:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.metrics_server"},"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa"},"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa"},"module.aws_controllers.module.ondat.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.ondat.module.helm_addon"},"module.aws_controllers.module.ondat:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.ondat"},"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa"},"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa"},"module.aws_controllers.module.opentelemetry_operator.module.operator:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.opentelemetry_operator.module.operator"},"module.aws_controllers.module.opentelemetry_operator:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.opentelemetry_operator"},"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa"},"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa"},"module.aws_controllers.module.prometheus.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.prometheus.module.helm_addon"},"module.aws_controllers.module.prometheus:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.prometheus"},"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa"},"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa"},"module.aws_controllers.module.spark_k8s_operator.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon"},"module.aws_controllers.module.spark_k8s_operator:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.spark_k8s_operator"},"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.base:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.tetrate_istio.module.base"},"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.cni:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.tetrate_istio.module.cni"},"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.gateway:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.tetrate_istio.module.gateway"},"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa"},"module.aws_controllers.module.tetrate_istio.module.istiod:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.tetrate_istio.module.istiod"},"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa"},"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa"},"module.aws_controllers.module.traefik.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.traefik.module.helm_addon"},"module.aws_controllers.module.traefik:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.traefik"},"module.aws_controllers.module.vault:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.aws_controllers.module.vault"},"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa"},"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa"},"module.aws_controllers.module.vpa.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.vpa.module.helm_addon"},"module.aws_controllers.module.vpa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.vpa"},"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa"},"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa"},"module.aws_controllers.module.yunikorn.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.aws_controllers.module.yunikorn.module.helm_addon"},"module.aws_controllers.module.yunikorn:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.aws_controllers.module.yunikorn"},"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.module.user_data:cloudinit":{"name":"cloudinit","full_name":"registry.terraform.io/hashicorp/cloudinit","version_constraint":"\u003e= 2.0.0","module_address":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.module.user_data"},"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.module.user_data:cloudinit":{"name":"cloudinit","full_name":"registry.terraform.io/hashicorp/cloudinit","version_constraint":"\u003e= 2.0.0","module_address":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.module.user_data"},"module.eks_blueprints.module.aws_eks:tls":{"name":"tls","full_name":"registry.terraform.io/hashicorp/tls","version_constraint":"\u003e= 3.0.0","module_address":"module.eks_blueprints.module.aws_eks"},"module.eks_blueprints:http":{"name":"http","full_name":"registry.terraform.io/terraform-aws-modules/http","version_constraint":"2.4.1","module_address":"module.eks_blueprints"},"module.eks_blueprints:local":{"name":"local","full_name":"registry.terraform.io/hashicorp/local","version_constraint":"\u003e= 2.1.0","module_address":"module.eks_blueprints"},"module.eks_blueprints:null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"\u003e= 3.1.0","module_address":"module.eks_blueprints"},"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon"},"module.kubernetes-addons.module.adot_collector_haproxy:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_haproxy"},"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_java.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon"},"module.kubernetes-addons.module.adot_collector_java:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_java"},"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon"},"module.kubernetes-addons.module.adot_collector_memcached:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_memcached"},"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon"},"module.kubernetes-addons.module.adot_collector_nginx:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.adot_collector_nginx"},"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.agones.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.agones.module.helm_addon"},"module.kubernetes-addons.module.agones:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.agones"},"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.argo_rollouts.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon"},"module.kubernetes-addons.module.argo_rollouts:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.argo_rollouts"},"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.argocd:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.argocd"},"module.kubernetes-addons.module.argocd:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.argocd"},"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_cloudwatch_metrics:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_cloudwatch_metrics"},"module.kubernetes-addons.module.aws_cloudwatch_metrics:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_cloudwatch_metrics"},"module.kubernetes-addons.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_ebs_csi_driver.module.irsa_addon"},"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon"},"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon"},"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon"},"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon"},"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon"},"module.kubernetes-addons.module.aws_vpc_cni.module.irsa_addon:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.aws_vpc_cni.module.irsa_addon"},"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.cert_manager:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.cert_manager"},"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon"},"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.crossplane.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.crossplane.module.helm_addon"},"module.kubernetes-addons.module.crossplane:kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.14.0","module_address":"module.kubernetes-addons.module.crossplane"},"module.kubernetes-addons.module.crossplane:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.crossplane"},"module.kubernetes-addons.module.crossplane:time":{"name":"time","full_name":"registry.terraform.io/hashicorp/time","version_constraint":"\u003e= 0.7.0","module_address":"module.kubernetes-addons.module.crossplane"},"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.external_dns.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.external_dns.module.helm_addon"},"module.kubernetes-addons.module.fargate_fluentbit:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.fargate_fluentbit"},"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.ingress_nginx.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon"},"module.kubernetes-addons.module.ingress_nginx:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.ingress_nginx"},"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.karpenter.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.karpenter.module.helm_addon"},"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.keda.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.keda.module.helm_addon"},"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon"},"module.kubernetes-addons.module.kubernetes_dashboard:kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.14.0","module_address":"module.kubernetes-addons.module.kubernetes_dashboard"},"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.metrics_server.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.metrics_server.module.helm_addon"},"module.kubernetes-addons.module.metrics_server:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.metrics_server"},"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.ondat.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.ondat.module.helm_addon"},"module.kubernetes-addons.module.ondat:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.ondat"},"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa"},"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa"},"module.kubernetes-addons.module.opentelemetry_operator.module.operator:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.opentelemetry_operator.module.operator"},"module.kubernetes-addons.module.opentelemetry_operator:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.opentelemetry_operator"},"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.prometheus.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.prometheus.module.helm_addon"},"module.kubernetes-addons.module.prometheus:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.prometheus"},"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon"},"module.kubernetes-addons.module.spark_k8s_operator:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.spark_k8s_operator"},"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.base:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.tetrate_istio.module.base"},"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.cni:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.tetrate_istio.module.cni"},"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.gateway:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.tetrate_istio.module.gateway"},"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","module_address":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","module_address":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa"},"module.kubernetes-addons.module.tetrate_istio.module.istiod:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.tetrate_istio.module.istiod"},"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.traefik.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.traefik.module.helm_addon"},"module.kubernetes-addons.module.traefik:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.traefik"},"module.kubernetes-addons.module.vault:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","module_address":"module.kubernetes-addons.module.vault"},"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.vpa.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.vpa.module.helm_addon"},"module.kubernetes-addons.module.vpa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.vpa"},"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 3.72.0","module_address":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa"},"module.kubernetes-addons.module.yunikorn.module.helm_addon:helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.4.1","module_address":"module.kubernetes-addons.module.yunikorn.module.helm_addon"},"module.kubernetes-addons.module.yunikorn:kubernetes":{"name":"kubernetes","full_name":"registry.terraform.io/hashicorp/kubernetes","version_constraint":"\u003e= 2.10.0","module_address":"module.kubernetes-addons.module.yunikorn"}},"root_module":{"outputs":{"configure_kubectl":{"expression":{"references":["module.eks_blueprints.configure_kubectl","module.eks_blueprints"]},"description":"Configure kubectl: make sure you're logged in with the correct AWS profile and run the following command to update your kubeconfig"},"platform_team":{"expression":{"references":["module.eks_blueprints.teams","module.eks_blueprints"]},"description":"Role Arn of platform-team"},"private_subnets":{"expression":{"references":["module.vpc.private_subnets","module.vpc"]},"description":"List of IDs of private subnets"},"public_subnets":{"expression":{"references":["module.vpc.public_subnets","module.vpc"]},"description":"List of IDs of public subnets"},"team_riker":{"expression":{"references":["module.eks_blueprints.teams","module.eks_blueprints"]},"description":"Role Arn of team-riker"},"vpc_id":{"expression":{"references":["module.vpc.vpc_id","module.vpc"]},"description":"The ID of the VPC"}},"resources":[{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"aws_controllers":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints?ref=v4.0.7/modules/kubernetes-addons","expressions":{"eks_cluster_id":{"references":["module.eks_blueprints.eks_cluster_id","module.eks_blueprints"]},"enable_aws_for_fluentbit":{"constant_value":false},"enable_aws_load_balancer_controller":{"constant_value":true},"enable_karpenter":{"constant_value":false}},"module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"name":{"references":["var.eks_cluster_id"]}},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"adot_collector_haproxy":{"source":"./adot-collector-haproxy","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_haproxy_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_haproxy"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_java":{"source":"./adot-collector-java","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_java_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_java"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.aws_controllers.module.adot_collector_java:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.adot_collector_java.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_memcached":{"source":"./adot-collector-memcached","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_memcached_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_memcached"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.aws_controllers.module.adot_collector_memcached:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_nginx":{"source":"./adot-collector-nginx","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_nginx_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_nginx"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.aws_controllers.module.adot_collector_nginx:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"agones":{"source":"./agones","expressions":{"addon_context":{"references":["local.addon_context"]},"eks_worker_security_group_id":{"references":["var.eks_worker_security_group_id"]},"helm_config":{"references":["var.agones_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_agones"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_security_group_rule.agones_sg_ingress_rule","mode":"managed","type":"aws_security_group_rule","name":"agones_sg_ingress_rule","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"Allow UDP ingress from internet"},"from_port":{"references":["local.helm_config[\"gameserver_minport\"]","local.helm_config"]},"ipv6_cidr_blocks":{"constant_value":["::/0"]},"protocol":{"constant_value":"udp"},"security_group_id":{"references":["data.aws_security_group.eks_worker_group.id","data.aws_security_group.eks_worker_group"]},"to_port":{"references":["local.helm_config[\"gameserver_maxport\"]","local.helm_config"]},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.agones:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"data.aws_security_group.eks_worker_group","mode":"data","type":"aws_security_group","name":"eks_worker_group","provider_config_key":"aws","expressions":{"id":{"references":["var.eks_worker_security_group_id"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.agones.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.agones.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.agones.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.agones.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.agones.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"eks_worker_security_group_id":{"description":"EKS Worker Security Group ID"},"helm_config":{"default":{},"description":"Helm provider config for Agones GameServer"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"argo_rollouts":{"source":"./argo-rollouts","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.argo_rollouts_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_argo_rollouts"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.argo_rollouts:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.argo_rollouts.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Argo Rollouts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"argocd":{"source":"./argocd","expressions":{"addon_config":{"references":["local.argocd_addon_config"]},"addon_context":{"references":["local.addon_context"]},"admin_password_secret_name":{"references":["var.argocd_admin_password_secret_name"]},"applications":{"references":["var.argocd_applications"]},"helm_config":{"references":["var.argocd_helm_config"]}},"count_expression":{"references":["var.enable_argocd"]},"module":{"resources":[{"address":"helm_release.argocd_application","mode":"managed","type":"helm_release","name":"argocd_application","provider_config_key":"module.aws_controllers.module.argocd:helm","expressions":{"chart":{"references":["path.module"]},"name":{"references":["each.key"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"set":[{"name":{"constant_value":"name"},"value":{"references":["each.key"]}},{"name":{"constant_value":"project"},"value":{"references":["each.value.project","each.value"]}},{"name":{"constant_value":"source.repoUrl"},"value":{"references":["each.value.repo_url","each.value"]}},{"name":{"constant_value":"source.targetRevision"},"value":{"references":["each.value.target_revision","each.value"]}},{"name":{"constant_value":"source.path"},"value":{"references":["each.value.path","each.value"]}},{"name":{"constant_value":"source.helm.releaseName"},"value":{"references":["each.key"]}},{"name":{"constant_value":"source.helm.values"},"value":{"references":["each.value.repo_url","each.value","each.value.values","each.value","local.global_application_values","each.value.add_on_application","each.value","var.addon_config"]}},{"name":{"constant_value":"destination.server"},"value":{"references":["each.value.destination","each.value"]}}],"version":{"constant_value":"1.0.0"}},"schema_version":0,"for_each_expression":{"references":["var.applications","local.default_argocd_application"]},"depends_on":["module.helm_addon"]},{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.argocd:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"kubernetes_secret.argocd_gitops","mode":"managed","type":"kubernetes_secret","name":"argocd_gitops","provider_config_key":"module.aws_controllers.module.argocd:kubernetes","expressions":{"data":{"references":["each.value.repo_url","each.value","data.aws_secretsmanager_secret_version.ssh_key_version","each.key"]},"metadata":[{"labels":{"constant_value":{"argocd.argoproj.io/secret-type":"repository"}},"name":{"references":["each.key"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0,"for_each_expression":{"references":["var.applications"]},"depends_on":["module.helm_addon"]},{"address":"data.aws_secretsmanager_secret.admin_password","mode":"data","type":"aws_secretsmanager_secret","name":"admin_password","provider_config_key":"aws","expressions":{"name":{"references":["var.admin_password_secret_name"]}},"schema_version":0,"count_expression":{"references":["var.admin_password_secret_name"]}},{"address":"data.aws_secretsmanager_secret.ssh_key","mode":"data","type":"aws_secretsmanager_secret","name":"ssh_key","provider_config_key":"aws","expressions":{"name":{"references":["each.value.ssh_key_secret_name","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.applications"]}},{"address":"data.aws_secretsmanager_secret_version.admin_password_version","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_password_version","provider_config_key":"aws","expressions":{"secret_id":{"references":["data.aws_secretsmanager_secret.admin_password[0].id","data.aws_secretsmanager_secret.admin_password[0]","data.aws_secretsmanager_secret.admin_password"]}},"schema_version":0,"count_expression":{"references":["var.admin_password_secret_name"]}},{"address":"data.aws_secretsmanager_secret_version.ssh_key_version","mode":"data","type":"aws_secretsmanager_secret_version","name":"ssh_key_version","provider_config_key":"aws","expressions":{"secret_id":{"references":["data.aws_secretsmanager_secret.ssh_key","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.applications"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"set_sensitive_values":{"references":["local.set_sensitive"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.argocd:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.argocd.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_config":{"default":{},"description":"Configuration for managing add-ons via ArgoCD"},"addon_context":{"description":"Input configuration for the addon"},"admin_password_secret_name":{"default":"","description":"Name for a secret stored in AWS Secrets Manager that contains the admin password for ArgoCD."},"applications":{"default":{},"description":"ArgoCD Application config used to bootstrap a cluster."},"helm_config":{"default":{},"description":"ArgoCD Helm Chart Config values"}}}},"aws_cloudwatch_metrics":{"source":"./aws-cloudwatch-metrics","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.aws_cloudwatch_metrics_helm_config"]},"irsa_policies":{"references":["var.aws_cloudwatch_metrics_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_cloudwatch_metrics"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_cloudwatch_metrics:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config aws-cloudwatch-metrics."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_coredns":{"source":"./aws-coredns","expressions":{"addon_config":{"references":["var.amazon_eks_coredns_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_coredns"]},"module":{"resources":[{"address":"aws_eks_addon.coredns","mode":"managed","type":"aws_eks_addon","name":"coredns","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"coredns"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed CoreDNS Add-on config"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_ebs_csi_driver":{"source":"./aws-ebs-csi-driver","expressions":{"addon_config":{"references":["var.amazon_eks_aws_ebs_csi_driver_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_aws_ebs_csi_driver"]},"module":{"resources":[{"address":"aws_eks_addon.aws_ebs_csi_driver","mode":"managed","type":"aws_eks_addon","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"aws-ebs-csi-driver"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["local.create_irsa","module.irsa_addon[0].irsa_iam_role_arn","module.irsa_addon[0]","var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0},{"address":"aws_iam_policy.aws_ebs_csi_driver","mode":"managed","type":"aws_iam_policy","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS EBS CSI Driver"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_ebs_csi_driver[0].json","data.aws_iam_policy_document.aws_ebs_csi_driver[0]","data.aws_iam_policy_document.aws_ebs_csi_driver"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0,"count_expression":{"references":["local.create_irsa"]}},{"address":"data.aws_iam_policy_document.aws_ebs_csi_driver","mode":"data","type":"aws_iam_policy_document","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:CreateSnapshot","ec2:AttachVolume","ec2:DetachVolume","ec2:ModifyVolume","ec2:DescribeAvailabilityZones","ec2:DescribeInstances","ec2:DescribeSnapshots","ec2:DescribeTags","ec2:DescribeVolumes","ec2:DescribeVolumesModifications"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["CreateVolume","CreateSnapshot"]},"variable":{"constant_value":"ec2:CreateAction"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteTags"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"aws:RequestTag/CSIVolumeName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["owned"]},"variable":{"constant_value":"aws:RequestTag/kubernetes.io/cluster/*"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"ec2:ResourceTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"ec2:ResourceTag/CSIVolumeName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["owned"]},"variable":{"constant_value":"ec2:ResourceTag/kubernetes.io/cluster/*"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteSnapshot"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"ec2:ResourceTag/CSIVolumeSnapshotName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteSnapshot"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"ec2:ResourceTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0,"count_expression":{"references":["local.create_irsa"]}}],"module_calls":{"irsa_addon":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.aws_ebs_csi_driver[0].arn","aws_iam_policy.aws_ebs_csi_driver[0]","aws_iam_policy.aws_ebs_csi_driver","var.addon_config.additional_iam_policies","var.addon_config"]},"kubernetes_namespace":{"constant_value":"kube-system"},"kubernetes_service_account":{"constant_value":"ebs-csi-controller-sa"}},"count_expression":{"references":["local.create_irsa"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on config for EBS CSI Driver"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_efs_csi_driver":{"source":"./aws-efs-csi-driver","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.aws_efs_csi_driver_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_efs_csi_driver"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.aws_efs_csi_driver","mode":"managed","type":"aws_iam_policy","name":"aws_efs_csi_driver","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS EFS CSI Driver"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_efs_csi_driver.json","data.aws_iam_policy_document.aws_efs_csi_driver"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_efs_csi_driver","mode":"data","type":"aws_iam_policy_document","name":"aws_efs_csi_driver","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["elasticfilesystem:DescribeAccessPoints","elasticfilesystem:DescribeFileSystems"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticfilesystem:CreateAccessPoint"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/efs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticfilesystem:DeleteAccessPoint"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:ResourceTag/efs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the aws_efs_csi_driver."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_for_fluent_bit":{"source":"./aws-for-fluentbit","expressions":{"addon_context":{"references":["local.addon_context"]},"cw_log_group_kms_key_arn":{"references":["var.aws_for_fluentbit_cw_log_group_kms_key_arn"]},"cw_log_group_name":{"references":["var.aws_for_fluentbit_cw_log_group_name"]},"cw_log_group_retention":{"references":["var.aws_for_fluentbit_cw_log_group_retention"]},"helm_config":{"references":["var.aws_for_fluentbit_helm_config"]},"irsa_policies":{"references":["var.aws_for_fluentbit_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_for_fluentbit"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"cw_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.aws_for_fluent_bit.arn","aws_cloudwatch_log_group.aws_for_fluent_bit"]},"description":"AWS Fluent Bit CloudWatch Log Group ARN"},"cw_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.aws_for_fluent_bit.name","aws_cloudwatch_log_group.aws_for_fluent_bit"]},"description":"AWS Fluent Bit CloudWatch Log Group Name"}},"resources":[{"address":"aws_cloudwatch_log_group.aws_for_fluent_bit","mode":"managed","type":"aws_cloudwatch_log_group","name":"aws_for_fluent_bit","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.cw_log_group_kms_key_arn","module.kms[0].key_arn","module.kms[0]","var.cw_log_group_kms_key_arn"]},"name":{"references":["local.log_group_name"]},"retention_in_days":{"references":["var.cw_log_group_retention"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_iam_policy.aws_for_fluent_bit","mode":"managed","type":"aws_iam_policy","name":"aws_for_fluent_bit","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS for FluentBit"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.irsa.json","data.aws_iam_policy_document.irsa"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.irsa","mode":"data","type":"aws_iam_policy_document","name":"irsa","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]},"sid":{"constant_value":"PutLogEvents"}},{"actions":{"constant_value":["logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:CreateLogGroup"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]},"sid":{"constant_value":"CreateCWLogs"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.kms","mode":"data","type":"aws_iam_policy_document","name":"kms","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","data.aws_iam_session_context.current.issuer_arn","data.aws_iam_session_context.current"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Enable IAM User Permissions"}},{"actions":{"constant_value":["kms:Encrypt*","kms:Decrypt*","kms:ReEncrypt*","kms:GenerateDataKey*","kms:Describe*"]},"condition":[{"test":{"constant_value":"ArnEquals"},"values":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","local.log_group_name"]},"variable":{"constant_value":"kms:EncryptionContext:aws:logs:arn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.addon_context.aws_region_name","var.addon_context"]},"type":{"constant_value":"Service"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Enable Encryption for LogGroup"}}]},"schema_version":0},{"address":"data.aws_iam_session_context.current","mode":"data","type":"aws_iam_session_context","name":"current","provider_config_key":"aws","expressions":{"arn":{"references":["var.addon_context.aws_caller_identity_arn","var.addon_context"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}},"kms":{"source":"../../../modules/aws-kms","expressions":{"alias":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"description":{"constant_value":"EKS Workers FluentBit CloudWatch Log group KMS Key"},"policy":{"references":["data.aws_iam_policy_document.kms.json","data.aws_iam_policy_document.kms"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"count_expression":{"references":["var.cw_log_group_kms_key_arn"]},"module":{"outputs":{"key_arn":{"expression":{"references":["aws_kms_key.this.arn","aws_kms_key.this"]},"description":"The Amazon Resource Name (ARN) of the key."},"key_id":{"expression":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]},"description":"The globally unique identifier for the key."}},"resources":[{"address":"aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.alias"]},"target_key_id":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]}},"schema_version":0},{"address":"aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"policy":{"references":["var.policy"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"alias":{"description":"The display name of the alias. The name must start with the word 'alias' followed by a forward slash (alias/)"},"deletion_window_in_days":{"default":30,"description":"The waiting period, specified in number of days. After the waiting period ends, AWS KMS deletes the KMS key. If you specify a value, it must be between 7 and 30, inclusive. If you do not specify a value, it defaults to 30."},"description":{"description":"The description of the key."},"enable_key_rotation":{"default":true,"description":"Specifies whether annual key rotation is enabled."},"policy":{"description":"A valid KMS key policy JSON document. Although this is a key policy, not an IAM policy, an aws_iam_policy_document, in the form that designates a principal, can be used."},"tags":{"description":"A map of tags to assign to the object."}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"cw_log_group_kms_key_arn":{"default":null,"description":"FluentBit CloudWatch Log group KMS Key"},"cw_log_group_name":{"default":null,"description":"FluentBit CloudWatch Log group name"},"cw_log_group_retention":{"default":90,"description":"FluentBit CloudWatch Log group retention period"},"helm_config":{"default":{},"description":"Helm provider config aws_for_fluent_bit."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_kube_proxy":{"source":"./aws-kube-proxy","expressions":{"addon_config":{"references":["var.amazon_eks_kube_proxy_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_kube_proxy"]},"module":{"resources":[{"address":"aws_eks_addon.kube_proxy","mode":"managed","type":"aws_eks_addon","name":"kube_proxy","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"kube-proxy"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on config for Kube Proxy"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_load_balancer_controller":{"source":"./aws-load-balancer-controller","expressions":{"addon_context":{"references":["local.addon_context","local.amazon_container_image_registry_uris","data.aws_region.current.name","data.aws_region.current"]},"helm_config":{"references":["var.aws_load_balancer_controller_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_load_balancer_controller"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"ingress_name":{"expression":{"references":["local.helm_config[\"name\"]","local.helm_config"]},"description":"AWS LoadBalancer Controller Ingress Name"},"ingress_namespace":{"expression":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"description":"AWS LoadBalancer Controller Ingress Namespace"}},"resources":[{"address":"aws_iam_policy.aws_load_balancer_controller","mode":"managed","type":"aws_iam_policy","name":"aws_load_balancer_controller","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allows lb controller to manage ALB and NLB"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_lb.json","data.aws_iam_policy_document.aws_lb"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_lb","mode":"data","type":"aws_iam_policy_document","name":"aws_lb","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["iam:CreateServiceLinkedRole","ec2:DescribeAccountAttributes","ec2:DescribeAddresses","ec2:DescribeInternetGateways","ec2:DescribeAvailabilityZones","ec2:DescribeVpcs","ec2:DescribeSubnets","ec2:DescribeSecurityGroups","ec2:DescribeInstances","ec2:DescribeNetworkInterfaces","ec2:DescribeTags","ec2:GetCoipPoolUsage","ec2:DescribeCoipPools","elasticloadbalancing:DescribeLoadBalancers","elasticloadbalancing:DescribeLoadBalancerAttributes","elasticloadbalancing:DescribeListeners","elasticloadbalancing:DescribeListenerCertificates","elasticloadbalancing:DescribeSSLPolicies","elasticloadbalancing:DescribeRules","elasticloadbalancing:DescribeTargetGroups","elasticloadbalancing:DescribeTargetGroupAttributes","elasticloadbalancing:DescribeTargetHealth","elasticloadbalancing:DescribeTags"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["cognito-idp:DescribeUserPoolClient","acm:ListCertificates","acm:DescribeCertificate","iam:ListServerCertificates","iam:GetServerCertificate","waf-regional:GetWebACL","waf-regional:GetWebACLForResource","waf-regional:AssociateWebACL","waf-regional:DisassociateWebACL","wafv2:GetWebACL","wafv2:GetWebACLForResource","wafv2:AssociateWebACL","wafv2:DisassociateWebACL","shield:GetSubscriptionState","shield:DescribeProtection","shield:CreateProtection","shield:DeleteProtection"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateSecurityGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["CreateSecurityGroup"]},"variable":{"constant_value":"ec2:CreateAction"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags","ec2:DeleteTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/ingress.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags","elasticloadbalancing:DeleteTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/ingress.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags","ec2:DeleteTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"Null"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress","ec2:DeleteSecurityGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:CreateLoadBalancer","elasticloadbalancing:CreateTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:CreateListener","elasticloadbalancing:DeleteListener","elasticloadbalancing:CreateRule","elasticloadbalancing:DeleteRule"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:ModifyLoadBalancerAttributes","elasticloadbalancing:SetIpAddressType","elasticloadbalancing:SetSecurityGroups","elasticloadbalancing:SetSubnets","elasticloadbalancing:DeleteLoadBalancer","elasticloadbalancing:ModifyTargetGroup","elasticloadbalancing:ModifyTargetGroupAttributes","elasticloadbalancing:DeleteTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:RegisterTargets","elasticloadbalancing:DeregisterTargets"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:SetWebAcl","elasticloadbalancing:ModifyListener","elasticloadbalancing:AddListenerCertificates","elasticloadbalancing:RemoveListenerCertificates","elasticloadbalancing:ModifyRule"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon."},"helm_config":{"default":{},"description":"Helm provider config for the aws_load_balancer_controller."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_node_termination_handler":{"source":"./aws-node-termination-handler","expressions":{"addon_context":{"references":["local.addon_context"]},"autoscaling_group_names":{"references":["var.auto_scaling_group_names"]},"helm_config":{"references":["var.aws_node_termination_handler_helm_config"]},"irsa_policies":{"references":["var.aws_node_termination_handler_irsa_policies"]}},"count_expression":{"references":["var.enable_aws_node_termination_handler","var.auto_scaling_group_names"]},"module":{"resources":[{"address":"aws_autoscaling_group_tag.aws_node_termination_handler_tag","mode":"managed","type":"aws_autoscaling_group_tag","name":"aws_node_termination_handler_tag","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["var.autoscaling_group_names","count.index"]},"tag":[{"key":{"constant_value":"aws-node-termination-handler/managed"},"propagate_at_launch":{"constant_value":true},"value":{"constant_value":"true"}}]},"schema_version":0,"count_expression":{"references":["var.autoscaling_group_names"]}},{"address":"aws_autoscaling_lifecycle_hook.aws_node_termination_handler_hook","mode":"managed","type":"aws_autoscaling_lifecycle_hook","name":"aws_node_termination_handler_hook","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["var.autoscaling_group_names","count.index"]},"default_result":{"constant_value":"CONTINUE"},"heartbeat_timeout":{"constant_value":300},"lifecycle_transition":{"constant_value":"autoscaling:EC2_INSTANCE_TERMINATING"},"name":{"constant_value":"aws_node_termination_handler_hook"}},"schema_version":0,"count_expression":{"references":["var.autoscaling_group_names"]}},{"address":"aws_cloudwatch_event_rule.aws_node_termination_handler_rule","mode":"managed","type":"aws_cloudwatch_event_rule","name":"aws_node_termination_handler_rule","provider_config_key":"aws","expressions":{"event_pattern":{"references":["local.event_rules","count.index"]},"name":{"references":["local.event_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.event_rules"]}},{"address":"aws_cloudwatch_event_target.aws_node_termination_handler_rule_target","mode":"managed","type":"aws_cloudwatch_event_target","name":"aws_node_termination_handler_rule_target","provider_config_key":"aws","expressions":{"arn":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.arn","aws_sqs_queue.aws_node_termination_handler_queue"]},"rule":{"references":["aws_cloudwatch_event_rule.aws_node_termination_handler_rule","count.index"]}},"schema_version":1,"count_expression":{"references":["aws_cloudwatch_event_rule.aws_node_termination_handler_rule"]}},{"address":"aws_iam_policy.aws_node_termination_handler_irsa","mode":"managed","type":"aws_iam_policy","name":"aws_node_termination_handler_irsa","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM role policy for AWS Node Termination Handler"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.irsa_policy.json","data.aws_iam_policy_document.irsa_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_sqs_queue.aws_node_termination_handler_queue","mode":"managed","type":"aws_sqs_queue","name":"aws_node_termination_handler_queue","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":"300"},"name_prefix":{"constant_value":"aws_node_termination_handler"},"sqs_managed_sse_enabled":{"constant_value":true},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_sqs_queue_policy.aws_node_termination_handler_queue_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"aws_node_termination_handler_queue_policy","provider_config_key":"aws","expressions":{"policy":{"references":["data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document.json","data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document"]},"queue_url":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.id","aws_sqs_queue.aws_node_termination_handler_queue"]}},"schema_version":1},{"address":"data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document","mode":"data","type":"aws_iam_policy_document","name":"aws_node_termination_handler_queue_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:SendMessage"]},"principals":[{"identifiers":{"constant_value":["events.amazonaws.com","sqs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.arn","aws_sqs_queue.aws_node_termination_handler_queue"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.irsa_policy","mode":"data","type":"aws_iam_policy_document","name":"irsa_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["autoscaling:CompleteLifecycleAction","autoscaling:DescribeAutoScalingInstances","autoscaling:DescribeTags","ec2:DescribeInstances","sqs:DeleteMessage","sqs:ReceiveMessage"]},"resources":{"constant_value":["*"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"autoscaling_group_names":{"description":"EKS Node Group ASG names"},"helm_config":{"default":{},"description":"AWS Node Termination Handler Helm Chart Configuration"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"}}}},"aws_privateca_issuer":{"source":"./aws-privateca-issuer","expressions":{"addon_context":{"references":["local.addon_context"]},"aws_privateca_acmca_arn":{"references":["var.aws_privateca_acmca_arn"]},"helm_config":{"references":["var.aws_privateca_issuer_helm_config"]},"irsa_policies":{"references":["var.aws_privateca_issuer_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_privateca_issuer"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.aws_privateca_issuer","mode":"managed","type":"aws_iam_policy","name":"aws_privateca_issuer","provider_config_key":"aws","expressions":{"description":{"constant_value":"AWS PCA issuer IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"policy":{"references":["data.aws_iam_policy_document.aws_privateca_issuer.json","data.aws_iam_policy_document.aws_privateca_issuer"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_privateca_issuer","mode":"data","type":"aws_iam_policy_document","name":"aws_privateca_issuer","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["acm-pca:DescribeCertificateAuthority","acm-pca:GetCertificate","acm-pca:IssueCertificate"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.aws_privateca_acmca_arn"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"aws_privateca_acmca_arn":{"description":"ARN of AWS ACM PCA"},"helm_config":{"default":{},"description":"AWS PCA Issuer Helm Config"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_vpc_cni":{"source":"./aws-vpc-cni","expressions":{"addon_config":{"references":["var.amazon_eks_vpc_cni_config"]},"addon_context":{"references":["local.addon_context"]},"enable_ipv6":{"references":["var.enable_ipv6"]}},"count_expression":{"references":["var.enable_amazon_eks_vpc_cni"]},"module":{"resources":[{"address":"aws_eks_addon.vpc_cni","mode":"managed","type":"aws_eks_addon","name":"vpc_cni","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"vpc-cni"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["local.create_irsa","module.irsa_addon[0].irsa_iam_role_arn","module.irsa_addon[0]","var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0},{"address":"aws_iam_policy.cni_ipv6_policy","mode":"managed","type":"aws_iam_policy","name":"cni_ipv6_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM policy for EKS CNI to assign IPV6 addresses"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.ipv6_policy[0].json","data.aws_iam_policy_document.ipv6_policy[0]","data.aws_iam_policy_document.ipv6_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0,"count_expression":{"references":["local.create_irsa","var.enable_ipv6"]}},{"address":"data.aws_iam_policy_document.ipv6_policy","mode":"data","type":"aws_iam_policy_document","name":"ipv6_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:AssignIpv6Addresses","ec2:DescribeInstances","ec2:DescribeTags","ec2:DescribeNetworkInterfaces","ec2:DescribeInstanceTypes"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"IpV6"}},{"actions":{"constant_value":["ec2:CreateTags"]},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":"CreateTags"}}]},"schema_version":0,"count_expression":{"references":["var.enable_ipv6"]}}],"module_calls":{"irsa_addon":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["var.addon_context.aws_partition_id","var.addon_context","local.cni_ipv6_policy","var.addon_config.additional_iam_policies","var.addon_config"]},"kubernetes_namespace":{"constant_value":"kube-system"},"kubernetes_service_account":{"constant_value":"aws-node"}},"count_expression":{"references":["local.create_irsa"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_vpc_cni.module.irsa_addon:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.aws_vpc_cni.module.irsa_addon:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on"},"addon_context":{"description":"Input configuration for the addon"},"enable_ipv6":{"default":false,"description":"Enable IPV6 CNI policy"}}}},"cert_manager":{"source":"./cert-manager","expressions":{"addon_context":{"references":["local.addon_context"]},"domain_names":{"references":["var.cert_manager_domain_names"]},"helm_config":{"references":["var.cert_manager_helm_config"]},"install_letsencrypt_issuers":{"references":["var.cert_manager_install_letsencrypt_issuers"]},"irsa_policies":{"references":["var.cert_manager_irsa_policies"]},"letsencrypt_email":{"references":["var.cert_manager_letsencrypt_email"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_cert_manager"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.cert_manager","mode":"managed","type":"aws_iam_policy","name":"cert_manager","provider_config_key":"aws","expressions":{"description":{"constant_value":"cert-manager IAM policy."},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.cert_manager_iam_policy_document.json","data.aws_iam_policy_document.cert_manager_iam_policy_document"]}},"schema_version":0},{"address":"helm_release.cert_manager_ca","mode":"managed","type":"helm_release","name":"cert_manager_ca","provider_config_key":"module.aws_controllers.module.cert_manager:helm","expressions":{"chart":{"references":["path.module"]},"name":{"constant_value":"cert-manager-ca"},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"version":{"constant_value":"0.2.0"}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.helm_addon"]},{"address":"helm_release.cert_manager_letsencrypt","mode":"managed","type":"helm_release","name":"cert_manager_letsencrypt","provider_config_key":"module.aws_controllers.module.cert_manager:helm","expressions":{"chart":{"references":["path.module"]},"name":{"constant_value":"cert-manager-letsencrypt"},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"set":[{"name":{"constant_value":"email"},"type":{"constant_value":"string"},"value":{"references":["var.letsencrypt_email"]}},{"name":{"constant_value":"dnsZones"},"type":{"constant_value":"string"},"value":{"references":["var.domain_names"]}}],"version":{"constant_value":"0.1.0"}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops","var.install_letsencrypt_issuers"]},"depends_on":["module.helm_addon"]},{"address":"data.aws_iam_policy_document.cert_manager_iam_policy_document","mode":"data","type":"aws_iam_policy_document","name":"cert_manager_iam_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["route53:GetChange"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:route53:::change/*"]}},{"actions":{"constant_value":["route53:ListHostedZonesByName"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_route53_zone.selected","mode":"data","type":"aws_route53_zone","name":"selected","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.domain_names"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.cert_manager:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.cert_manager.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"domain_names":{"default":[],"description":"Domain names of the Route53 hosted zone to use with cert-manager."},"helm_config":{"default":{},"description":"cert-manager Helm chart configuration"},"install_letsencrypt_issuers":{"default":true,"description":"Install Let's Encrypt Cluster Issuers."},"irsa_policies":{"default":[],"description":"Additional IAM policies used for the add-on service account."},"letsencrypt_email":{"default":"","description":"Email address for expiration emails from Let's Encrypt."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"cluster_autoscaler":{"source":"./cluster-autoscaler","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.cluster_autoscaler_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_cluster_autoscaler"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.cluster_autoscaler","mode":"managed","type":"aws_iam_policy","name":"cluster_autoscaler","provider_config_key":"aws","expressions":{"description":{"constant_value":"Cluster Autoscaler IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"policy":{"references":["data.aws_iam_policy_document.cluster_autoscaler.json","data.aws_iam_policy_document.cluster_autoscaler"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.cluster_autoscaler","mode":"data","type":"aws_iam_policy_document","name":"cluster_autoscaler","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["autoscaling:DescribeAutoScalingGroups","autoscaling:DescribeAutoScalingInstances","autoscaling:DescribeLaunchConfigurations","autoscaling:DescribeTags","ec2:DescribeInstanceTypes","ec2:DescribeLaunchTemplateVersions","autoscaling:SetDesiredCapacity","autoscaling:TerminateInstanceInAutoScalingGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Cluster Autoscaler Helm Config"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"crossplane":{"source":"./crossplane","expressions":{"account_id":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"addon_context":{"references":["local.addon_context"]},"aws_partition":{"references":["data.aws_partition.current.id","data.aws_partition.current"]},"aws_provider":{"references":["var.crossplane_aws_provider"]},"helm_config":{"references":["var.crossplane_helm_config"]},"jet_aws_provider":{"references":["var.crossplane_jet_aws_provider"]}},"count_expression":{"references":["var.enable_crossplane"]},"module":{"resources":[{"address":"aws_iam_policy.aws_provider","mode":"managed","type":"aws_iam_policy","name":"aws_provider","provider_config_key":"aws","expressions":{"description":{"constant_value":"Crossplane AWS Provider IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.aws_provider_sa"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]}},{"address":"aws_iam_policy.jet_aws_provider","mode":"managed","type":"aws_iam_policy","name":"jet_aws_provider","provider_config_key":"aws","expressions":{"description":{"constant_value":"Crossplane Jet AWS Provider IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.jet_aws_provider_sa"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]}},{"address":"kubectl_manifest.aws_controller_config","mode":"managed","type":"kubectl_manifest","name":"aws_controller_config","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","var.addon_context.eks_cluster_id","var.addon_context","local.aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["module.helm_addon"]},{"address":"kubectl_manifest.aws_provider","mode":"managed","type":"kubectl_manifest","name":"aws_provider","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"wait":{"constant_value":true},"yaml_body":{"references":["path.module","var.aws_provider.provider_aws_version","var.aws_provider","local.aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["kubectl_manifest.aws_controller_config"]},{"address":"kubectl_manifest.aws_provider_config","mode":"managed","type":"kubectl_manifest","name":"aws_provider_config","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["kubectl_manifest.aws_provider","time_sleep.wait_30_seconds"]},{"address":"kubectl_manifest.jet_aws_controller_config","mode":"managed","type":"kubectl_manifest","name":"jet_aws_controller_config","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module","local.aws_current_partition","local.aws_current_account_id","var.addon_context.eks_cluster_id","var.addon_context","local.jet_aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["module.helm_addon"]},{"address":"kubectl_manifest.jet_aws_provider","mode":"managed","type":"kubectl_manifest","name":"jet_aws_provider","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"wait":{"constant_value":true},"yaml_body":{"references":["path.module","var.jet_aws_provider.provider_aws_version","var.jet_aws_provider","local.jet_aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["kubectl_manifest.jet_aws_controller_config"]},{"address":"kubectl_manifest.jet_aws_provider_config","mode":"managed","type":"kubectl_manifest","name":"jet_aws_provider_config","provider_config_key":"module.aws_controllers.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["kubectl_manifest.jet_aws_provider"]},{"address":"kubernetes_namespace_v1.crossplane","mode":"managed","type":"kubernetes_namespace_v1","name":"crossplane","provider_config_key":"module.aws_controllers.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.namespace"]}}]},"schema_version":0},{"address":"time_sleep.wait_30_seconds","mode":"managed","type":"time_sleep","name":"wait_30_seconds","provider_config_key":"module.aws_controllers.module.crossplane:time","expressions":{"create_duration":{"constant_value":"30s"}},"schema_version":0,"depends_on":["kubectl_manifest.aws_provider"]},{"address":"data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:Get*","s3:Put*","s3:CreateBucket","s3:ListBucket","s3:DeleteObject","s3:DeleteBucket","s3:DeleteObjectVersion"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":"VisualEditor0"}},{"actions":{"constant_value":["s3:ListAllMyBuckets"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"VisualEditor1"}}]},"schema_version":0}],"module_calls":{"aws_provider_irsa":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.aws_provider[0].arn","aws_iam_policy.aws_provider[0]","aws_iam_policy.aws_provider","var.aws_provider.additional_irsa_policies","var.aws_provider"]},"kubernetes_namespace":{"references":["local.namespace"]},"kubernetes_service_account":{"references":["local.aws_provider_sa"]}},"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubectl_manifest.aws_provider"]},"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.crossplane.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.crossplane"]},"jet_aws_provider_irsa":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.jet_aws_provider[0].arn","aws_iam_policy.jet_aws_provider[0]","aws_iam_policy.jet_aws_provider","var.jet_aws_provider.additional_irsa_policies","var.jet_aws_provider"]},"kubernetes_namespace":{"references":["local.namespace"]},"kubernetes_service_account":{"references":["local.jet_aws_provider_sa"]}},"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.crossplane:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubectl_manifest.jet_aws_provider"]}},"variables":{"account_id":{"description":"Current AWS Account ID"},"addon_context":{"description":"Input configuration for the addon"},"aws_partition":{"description":"AWS Identifier of the current partition e.g., aws or aws-cn"},"aws_provider":{"description":"AWS Provider config for Crossplane"},"helm_config":{"default":{},"description":"Helm provider config for the Argo Rollouts"},"jet_aws_provider":{"description":"AWS Provider Jet AWS config for Crossplane"}}}},"external_dns":{"source":"./external-dns","expressions":{"addon_context":{"references":["local.addon_context"]},"domain_name":{"references":["var.eks_cluster_domain"]},"helm_config":{"references":["var.external_dns_helm_config"]},"irsa_policies":{"references":["var.external_dns_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_external_dns"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with GitOps"},"zone_filter_ids":{"expression":{"references":["local.zone_filter_ids"]},"description":"Zone Filter Ids for the add-on"}},"resources":[{"address":"aws_iam_policy.external_dns","mode":"managed","type":"aws_iam_policy","name":"external_dns","provider_config_key":"aws","expressions":{"description":{"constant_value":"External DNS IAM policy."},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.external_dns_iam_policy_document.json","data.aws_iam_policy_document.external_dns_iam_policy_document"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.external_dns_iam_policy_document","mode":"data","type":"aws_iam_policy_document","name":"external_dns_iam_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["route53:ChangeResourceRecordSets","route53:ListResourceRecordSets"]},"effect":{"constant_value":"Allow"},"resources":{"references":["data.aws_route53_zone.selected.arn","data.aws_route53_zone.selected"]}},{"actions":{"constant_value":["route53:ListHostedZones"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_route53_zone.selected","mode":"data","type":"aws_route53_zone","name":"selected","provider_config_key":"aws","expressions":{"name":{"references":["var.domain_name"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.external_dns.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.external_dns.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"domain_name":{"description":"Domain name of the Route53 hosted zone to use with External DNS."},"helm_config":{"default":{},"description":"External DNS Helm Configuration"},"irsa_policies":{"description":"Additional IAM policies used for the add-on service account."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"fargate_fluentbit":{"source":"./fargate-fluentbit","expressions":{"addon_config":{"references":["var.fargate_fluentbit_addon_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_fargate_fluentbit"]},"module":{"resources":[{"address":"kubernetes_config_map.aws_logging","mode":"managed","type":"kubernetes_config_map","name":"aws_logging","provider_config_key":"module.aws_controllers.module.fargate_fluentbit:kubernetes","expressions":{"data":{"references":["local.config[\"parsers_conf\"]","local.config","local.config[\"filters_conf\"]","local.config","local.config[\"output_conf\"]","local.config"]},"metadata":[{"name":{"constant_value":"aws-logging"},"namespace":{"references":["kubernetes_namespace.aws_observability.id","kubernetes_namespace.aws_observability"]}}]},"schema_version":0},{"address":"kubernetes_namespace.aws_observability","mode":"managed","type":"kubernetes_namespace","name":"aws_observability","provider_config_key":"module.aws_controllers.module.fargate_fluentbit:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints","aws-observability":"enabled"}},"name":{"constant_value":"aws-observability"}}]},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Fargate fluentbit configuration"},"addon_context":{"description":"Input configuration for the addon"}}}},"ingress_nginx":{"source":"./ingress-nginx","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.ingress_nginx_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_ingress_nginx"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.ingress_nginx:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.ingress_nginx.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Ingress NGINX Helm Configuration"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"karpenter":{"source":"./karpenter","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.karpenter_helm_config"]},"irsa_policies":{"references":["var.karpenter_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]},"node_iam_instance_profile":{"references":["var.karpenter_node_iam_instance_profile"]}},"count_expression":{"references":["var.enable_karpenter"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.karpenter","mode":"managed","type":"aws_iam_policy","name":"karpenter","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for Karpenter"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.karpenter.json","data.aws_iam_policy_document.karpenter"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.karpenter","mode":"data","type":"aws_iam_policy_document","name":"karpenter","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:CreateLaunchTemplate","ec2:CreateFleet","ec2:RunInstances","ec2:CreateTags","iam:PassRole","ec2:DeleteLaunchTemplate","ec2:DescribeLaunchTemplates","ec2:DescribeInstances","ec2:DescribeSecurityGroups","ec2:DescribeSubnets","ec2:DescribeInstanceTypes","ec2:DescribeInstanceTypeOfferings","ec2:DescribeAvailabilityZones","ssm:GetParameter"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"Karpenter"}},{"actions":{"constant_value":["ec2:TerminateInstances"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*karpenter*"]},"variable":{"constant_value":"ec2:ResourceTag/Name"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ConditionalEC2Termination"}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.karpenter.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.karpenter.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Karpenter"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"node_iam_instance_profile":{"default":"","description":"Karpenter Node IAM Instance profile id"}}}},"keda":{"source":"./keda","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.keda_helm_config"]},"irsa_policies":{"references":["var.keda_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_keda"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.keda_irsa","mode":"managed","type":"aws_iam_policy","name":"keda_irsa","provider_config_key":"aws","expressions":{"description":{"constant_value":"KEDA IAM role policy for SQS and CloudWatch"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.keda_irsa.json","data.aws_iam_policy_document.keda_irsa"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.keda_irsa","mode":"data","type":"aws_iam_policy_document","name":"keda_irsa","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:GetQueueUrl","sqs:ListDeadLetterSourceQueues","sqs:ReceiveMessage","sqs:GetQueueAttributes","sqs:ListQueueTags","cloudwatch:DescribeAlarmHistory","cloudwatch:GetDashboard","cloudwatch:GetInsightRuleReport","cloudwatch:ListTagsForResource","cloudwatch:DescribeAlarms","cloudwatch:GetMetricStream"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]}},{"actions":{"constant_value":["cloudwatch:DescribeInsightRules","sqs:ListQueues","cloudwatch:GetMetricData","cloudwatch:ListMetricStreams","cloudwatch:DescribeAlarmsForMetric","cloudwatch:ListDashboards","cloudwatch:GetMetricStatistics","cloudwatch:GetMetricWidgetImage","cloudwatch:ListMetrics","cloudwatch:DescribeAnomalyDetectors"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.keda.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.keda.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.keda.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.keda.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.keda.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the KEDA"},"irsa_policies":{"default":[],"description":"IAM Policy ARN list for any IRSA policies"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"kubernetes_dashboard":{"source":"./kubernetes-dashboard","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.kubernetes_dashboard_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_kubernetes_dashboard"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubectl_manifest.sa_config","mode":"managed","type":"kubectl_manifest","name":"sa_config","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard:kubectl","expressions":{"yaml_body":{"references":["path.module","local.service_account_name","local.helm_config[\"namespace\"]","local.helm_config"]}},"schema_version":1,"depends_on":["module.helm_addon"]}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Kubernetes Dashboard"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"metrics_server":{"source":"./metrics-server","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.metrics_server_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_metrics_server"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.metrics_server:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0,"count_expression":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.metrics_server.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.metrics_server.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Metrics Server"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"ondat":{"source":"ondat/ondat-addon/eksblueprints","expressions":{"addon_context":{"references":["local.addon_context"]},"admin_password":{"references":["var.ondat_admin_password"]},"admin_username":{"references":["var.ondat_admin_username"]},"create_cluster":{"references":["var.ondat_create_cluster"]},"etcd_ca":{"references":["var.ondat_etcd_ca"]},"etcd_cert":{"references":["var.ondat_etcd_cert"]},"etcd_endpoints":{"references":["var.ondat_etcd_endpoints"]},"etcd_key":{"references":["var.ondat_etcd_key"]},"helm_config":{"references":["var.ondat_helm_config"]},"irsa_policies":{"references":["var.ondat_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_ondat"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace.storageos","mode":"managed","type":"kubernetes_namespace","name":"storageos","provider_config_key":"module.aws_controllers.module.ondat:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app":"storageos"}},"name":{"constant_value":"storageos"}}]},"schema_version":0},{"address":"kubernetes_secret.etcd","mode":"managed","type":"kubernetes_secret","name":"etcd","provider_config_key":"module.aws_controllers.module.ondat:kubernetes","expressions":{"data":{"references":["var.etcd_ca","var.etcd_cert","var.etcd_key"]},"metadata":[{"labels":{"constant_value":{"app":"storageos"}},"name":{"constant_value":"storageos-etcd"},"namespace":{"references":["local.namespace"]}}],"type":{"constant_value":"kubernetes.io/storageos"}},"schema_version":0,"count_expression":{"references":["var.create_cluster"]}},{"address":"data.aws_eks_cluster.eks","mode":"data","type":"aws_eks_cluster","name":"eks","provider_config_key":"aws","expressions":{"name":{"references":["local.eks_cluster_id"]}},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"helm_addon":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v4.0.1","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_sensitive_values":{"references":["local.set_sensitive_values"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.ondat.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.ondat.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"admin_password":{"default":"storageos","description":"Password for the Ondat admin user","sensitive":true},"admin_username":{"default":"storageos","description":"Username for the Ondat admin user"},"create_cluster":{"default":true,"description":"Determines if the StorageOSCluster and secrets should be created"},"etcd_ca":{"default":"","description":"The PEM encoded CA for Ondat's etcd"},"etcd_cert":{"default":"","description":"The PEM encoded client certificate for Ondat's etcd"},"etcd_endpoints":{"default":["https://storageos-etcd.storageos.svc.cluster.local:2379"],"description":"A list of etcd endpoints for Ondat"},"etcd_key":{"default":"","description":"The PEM encoded client key for Ondat's etcd","sensitive":true},"helm_config":{"default":{},"description":"Helm provider config for the ondat addon"},"irsa_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_policies":{"default":[],"description":"IAM policy ARNs for Ondat IRSA"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}},"version_constraint":"0.0.4"},"opentelemetry_operator":{"source":"./opentelemetry-operator","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.opentelemetry_operator_helm_config"]}},"count_expression":{"references":["var.enable_opentelemetry_operator"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.prometheus","mode":"managed","type":"kubernetes_namespace_v1","name":"prometheus","provider_config_key":"module.aws_controllers.module.opentelemetry_operator:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"operator":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.opentelemetry_operator.module.operator:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.opentelemetry_operator.module.operator.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for ADOT Operator AddOn"}}}},"prometheus":{"source":"./prometheus","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"enable_amazon_prometheus":{"references":["var.enable_amazon_prometheus"]},"helm_config":{"references":["var.prometheus_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_prometheus"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.ingest","mode":"managed","type":"aws_iam_policy","name":"ingest","provider_config_key":"aws","expressions":{"description":{"constant_value":"Set up the permission policy that grants ingest (remote write) permissions for AMP workspace"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.ingest.json","data.aws_iam_policy_document.ingest"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.enable_amazon_prometheus"]}},{"address":"aws_iam_policy.query","mode":"managed","type":"aws_iam_policy","name":"query","provider_config_key":"aws","expressions":{"description":{"constant_value":"Set up the permission policy that grants query permissions for AMP workspace"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.query.json","data.aws_iam_policy_document.query"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.enable_amazon_prometheus"]}},{"address":"kubernetes_namespace_v1.prometheus","mode":"managed","type":"kubernetes_namespace_v1","name":"prometheus","provider_config_key":"module.aws_controllers.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.ingest","mode":"data","type":"aws_iam_policy_document","name":"ingest","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["aps:RemoteWrite","aps:GetSeries","aps:GetLabels","aps:GetMetricMetadata"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.query","mode":"data","type":"aws_iam_policy_document","name":"query","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["aps:QueryMetrics","aps:GetSeries","aps:GetLabels","aps:GetMetricMetadata"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.amp_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.prometheus.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]},"irsa_amp_ingest":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.ingest[0].arn","aws_iam_policy.ingest[0]","aws_iam_policy.ingest"]},"kubernetes_namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"kubernetes_service_account":{"references":["local.amazon_prometheus_ingest_service_account"]}},"count_expression":{"references":["var.enable_amazon_prometheus"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]},"irsa_amp_query":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.query[0].arn","aws_iam_policy.query[0]","aws_iam_policy.query"]},"kubernetes_namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"kubernetes_service_account":{"constant_value":"amp-query"}},"count_expression":{"references":["var.enable_amazon_prometheus"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.prometheus:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"enable_amazon_prometheus":{"default":false,"description":"Enable AWS Managed Prometheus service"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"spark_k8s_operator":{"source":"./spark-k8s-operator","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.spark_k8s_operator_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_spark_k8s_operator"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.spark_k8s_operator:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Spark K8s Operator"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"tetrate_istio":{"source":"tetratelabs/tetrate-istio-addon/eksblueprints","expressions":{"addon_context":{"references":["local.addon_context"]},"base_helm_config":{"references":["var.tetrate_istio_base_helm_config"]},"cni_helm_config":{"references":["var.tetrate_istio_cni_helm_config"]},"distribution":{"references":["var.tetrate_istio_distribution"]},"distribution_version":{"references":["var.tetrate_istio_version"]},"gateway_helm_config":{"references":["var.tetrate_istio_gateway_helm_config"]},"install_base":{"references":["var.tetrate_istio_install_base"]},"install_cni":{"references":["var.tetrate_istio_install_cni"]},"install_gateway":{"references":["var.tetrate_istio_install_gateway"]},"install_istiod":{"references":["var.tetrate_istio_install_istiod"]},"istiod_helm_config":{"references":["var.tetrate_istio_istiod_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_tetrate_istio"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"module_calls":{"base":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.base_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_base"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.base:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.base.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}},"cni":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.cni_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_cni"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.cni:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.cni.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.base"]},"gateway":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.gateway_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_gateway"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.gateway:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.gateway.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.istiod"]},"istiod":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.istiod_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_istiod"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.istiod:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.tetrate_istio.module.istiod.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.cni"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"base_helm_config":{"default":{},"description":"Istio `base` Helm Chart Configuration"},"cni_helm_config":{"default":{},"description":"Istio `cni` Helm Chart Configuration"},"distribution":{"default":"TID","description":"Istio distribution"},"distribution_version":{"default":"","description":"Istio version"},"gateway_helm_config":{"default":{},"description":"Istio `gateway` Helm Chart Configuration"},"install_base":{"default":true,"description":"Install Istio `base` Helm Chart"},"install_cni":{"default":true,"description":"Install Istio `cni` Helm Chart"},"install_gateway":{"default":true,"description":"Install Istio `gateway` Helm Chart"},"install_istiod":{"default":true,"description":"Install Istio `istiod` Helm Chart"},"istiod_helm_config":{"default":{},"description":"Istio `istiod` Helm Chart Configuration"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}},"version_constraint":"0.0.7"},"traefik":{"source":"./traefik","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.traefik_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_traefik"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.aws_controllers.module.traefik:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.traefik.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.traefik.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Traefik"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"vault":{"source":"hashicorp/hashicorp-vault-eks-addon/aws","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.vault_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_vault"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"merged_helm_config":{"expression":{"references":["local.helm_config"]},"description":"(merged) Helm Config for HashiCorp Vault"}},"resources":[{"address":"helm_release.vault","mode":"managed","type":"helm_release","name":"vault","provider_config_key":"module.aws_controllers.module.vault:helm","expressions":{"atomic":{"references":["local.helm_config[\"atomic\"]","local.helm_config"]},"chart":{"references":["local.helm_config[\"chart\"]","local.helm_config"]},"cleanup_on_fail":{"references":["local.helm_config[\"cleanup_on_fail\"]","local.helm_config"]},"create_namespace":{"references":["local.helm_config[\"create_namespace\"]","local.helm_config"]},"dependency_update":{"references":["local.helm_config[\"dependency_update\"]","local.helm_config"]},"description":{"references":["local.helm_config[\"description\"]","local.helm_config"]},"disable_openapi_validation":{"references":["local.helm_config[\"disable_openapi_validation\"]","local.helm_config"]},"disable_webhooks":{"references":["local.helm_config[\"disable_webhooks\"]","local.helm_config"]},"force_update":{"references":["local.helm_config[\"force_update\"]","local.helm_config"]},"keyring":{"references":["local.helm_config[\"keyring\"]","local.helm_config"]},"lint":{"references":["local.helm_config[\"lint\"]","local.helm_config"]},"max_history":{"references":["local.helm_config[\"max_history\"]","local.helm_config"]},"name":{"references":["local.helm_config[\"name\"]","local.helm_config"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"postrender":[{"binary_path":{"references":["local.helm_config[\"postrender\"]","local.helm_config"]}}],"recreate_pods":{"references":["local.helm_config[\"recreate_pods\"]","local.helm_config"]},"render_subchart_notes":{"references":["local.helm_config[\"render_subchart_notes\"]","local.helm_config"]},"replace":{"references":["local.helm_config[\"replace\"]","local.helm_config"]},"repository":{"references":["local.helm_config[\"repository\"]","local.helm_config"]},"repository_ca_file":{"references":["local.helm_config[\"repository_ca_file\"]","local.helm_config"]},"repository_cert_file":{"references":["local.helm_config[\"repository_cert_file\"]","local.helm_config"]},"repository_key_file":{"references":["local.helm_config[\"repository_key_file\"]","local.helm_config"]},"repository_password":{"references":["local.helm_config[\"repository_password\"]","local.helm_config"]},"repository_username":{"references":["local.helm_config[\"repository_username\"]","local.helm_config"]},"reset_values":{"references":["local.helm_config[\"reset_values\"]","local.helm_config"]},"reuse_values":{"references":["local.helm_config[\"reuse_values\"]","local.helm_config"]},"skip_crds":{"references":["local.helm_config[\"skip_crds\"]","local.helm_config"]},"timeout":{"references":["local.helm_config[\"timeout\"]","local.helm_config"]},"values":{"references":["local.helm_config[\"values\"]","local.helm_config"]},"verify":{"references":["local.helm_config[\"verify\"]","local.helm_config"]},"version":{"references":["local.helm_config[\"version\"]","local.helm_config"]},"wait":{"references":["local.helm_config[\"wait\"]","local.helm_config"]},"wait_for_jobs":{"references":["local.helm_config[\"wait_for_jobs\"]","local.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon."},"helm_config":{"default":{},"description":"HashiCorp Vault Helm chart configuration."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"vault_namespace":{"default":"vault","description":"Kubernetes Namespace to deploy HashiCorp Vault in"}}},"version_constraint":"0.9.0"},"vpa":{"source":"./vpa","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.vpa_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_vpa"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.vpa","mode":"managed","type":"kubernetes_namespace_v1","name":"vpa","provider_config_key":"module.aws_controllers.module.vpa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.vpa.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.vpa.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.vpa"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for VPA"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"yunikorn":{"source":"./yunikorn","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.yunikorn_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_yunikorn"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.yunikorn","mode":"managed","type":"kubernetes_namespace_v1","name":"yunikorn","provider_config_key":"module.aws_controllers.module.yunikorn:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.aws_controllers.module.yunikorn.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.aws_controllers.module.yunikorn.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.yunikorn"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Yunikorn"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}}},"variables":{"adot_collector_haproxy_helm_config":{"default":{},"description":"ADOT Collector HAProxy Helm Chart config"},"adot_collector_java_helm_config":{"default":{},"description":"ADOT Collector Java Helm Chart config"},"adot_collector_memcached_helm_config":{"default":{},"description":"ADOT Collector Memcached Helm Chart config"},"adot_collector_nginx_helm_config":{"default":{},"description":"ADOT Collector Nginx Helm Chart config"},"agones_helm_config":{"default":{},"description":"Agones GameServer Helm Chart config"},"amazon_eks_aws_ebs_csi_driver_config":{"default":{},"description":"configMap for AWS EBS CSI Driver add-on"},"amazon_eks_coredns_config":{"default":{},"description":"ConfigMap for Amazon CoreDNS EKS add-on"},"amazon_eks_kube_proxy_config":{"default":{},"description":"ConfigMap for Amazon EKS Kube-Proxy add-on"},"amazon_eks_vpc_cni_config":{"default":{},"description":"ConfigMap of Amazon EKS VPC CNI add-on"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"AWS Managed Prometheus WorkSpace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"AWS Managed Prometheus WorkSpace Region"},"argo_rollouts_helm_config":{"default":null,"description":"Argo Rollouts Helm Chart config"},"argocd_admin_password_secret_name":{"default":"","description":"Name for a secret stored in AWS Secrets Manager that contains the admin password."},"argocd_applications":{"default":{},"description":"Argo CD Applications config to bootstrap the cluster"},"argocd_helm_config":{"default":{},"description":"Argo CD Kubernetes add-on config"},"argocd_manage_add_ons":{"default":false,"description":"Enable managing add-on configuration via ArgoCD"},"auto_scaling_group_names":{"default":[],"description":"List of self-managed node groups autoscaling group names"},"aws_cloudwatch_metrics_helm_config":{"default":{},"description":"AWS CloudWatch Metrics Helm Chart config"},"aws_cloudwatch_metrics_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_efs_csi_driver_helm_config":{"default":{},"description":"AWS EFS CSI driver Helm Chart config"},"aws_for_fluentbit_cw_log_group_kms_key_arn":{"default":null,"description":"FluentBit CloudWatch Log group KMS Key"},"aws_for_fluentbit_cw_log_group_name":{"default":null,"description":"FluentBit CloudWatch Log group name"},"aws_for_fluentbit_cw_log_group_retention":{"default":90,"description":"FluentBit CloudWatch Log group retention period"},"aws_for_fluentbit_helm_config":{"default":{},"description":"AWS for FluentBit Helm Chart config"},"aws_for_fluentbit_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_load_balancer_controller_helm_config":{"default":{},"description":"AWS Load Balancer Controller Helm Chart config"},"aws_node_termination_handler_helm_config":{"default":{},"description":"AWS Node Termination Handler Helm Chart config"},"aws_node_termination_handler_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_privateca_acmca_arn":{"default":"","description":"ARN of AWS ACM PCA"},"aws_privateca_issuer_helm_config":{"default":{},"description":"PCA Issuer Helm Chart config"},"aws_privateca_issuer_irsa_policies":{"default":[],"description":"IAM policy ARNs for AWS ACM PCA IRSA"},"cert_manager_domain_names":{"default":[],"description":"Domain names of the Route53 hosted zone to use with cert-manager."},"cert_manager_helm_config":{"default":{},"description":"Cert Manager Helm Chart config"},"cert_manager_install_letsencrypt_issuers":{"default":true,"description":"Install Let's Encrypt Cluster Issuers."},"cert_manager_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"cert_manager_letsencrypt_email":{"default":"","description":"Email address for expiration emails from Let's Encrypt."},"cluster_autoscaler_helm_config":{"default":{},"description":"Cluster Autoscaler Helm Chart config"},"crossplane_aws_provider":{"default":{"additional_irsa_policies":[],"enable":false,"provider_aws_version":"v0.24.1"},"description":"AWS Provider config for Crossplane"},"crossplane_helm_config":{"default":null,"description":"Crossplane Helm Chart config"},"crossplane_jet_aws_provider":{"default":{"additional_irsa_policies":[],"enable":false,"provider_aws_version":"v0.24.1"},"description":"AWS Provider Jet AWS config for Crossplane"},"eks_cluster_domain":{"default":"","description":"The domain for the EKS cluster."},"eks_cluster_id":{"description":"EKS Cluster Id"},"eks_worker_security_group_id":{"default":"","description":"EKS Worker Security group Id created by EKS module"},"enable_adot_collector_haproxy":{"default":false,"description":"Enable metrics for HAProxy workloads"},"enable_adot_collector_java":{"default":false,"description":"Enable metrics for JMX workloads"},"enable_adot_collector_memcached":{"default":false,"description":"Enable metrics for Memcached workloads"},"enable_adot_collector_nginx":{"default":false,"description":"Enable metrics for Nginx workloads"},"enable_agones":{"default":false,"description":"Enable Agones GamServer add-on"},"enable_amazon_eks_aws_ebs_csi_driver":{"default":false,"description":"Enable EKS Managed AWS EBS CSI Driver add-on"},"enable_amazon_eks_coredns":{"default":false,"description":"Enable CoreDNS add-on"},"enable_amazon_eks_kube_proxy":{"default":false,"description":"Enable Kube Proxy add-on"},"enable_amazon_eks_vpc_cni":{"default":false,"description":"Enable VPC CNI add-on"},"enable_amazon_prometheus":{"default":false,"description":"Enable AWS Managed Prometheus service"},"enable_argo_rollouts":{"default":false,"description":"Enable Argo Rollouts add-on"},"enable_argocd":{"default":false,"description":"Enable Argo CD Kubernetes add-on"},"enable_aws_cloudwatch_metrics":{"default":false,"description":"Enable AWS CloudWatch Metrics add-on for Container Insights"},"enable_aws_efs_csi_driver":{"default":false,"description":"Enable AWS EFS CSI driver add-on"},"enable_aws_for_fluentbit":{"default":false,"description":"Enable AWS for FluentBit add-on"},"enable_aws_load_balancer_controller":{"default":false,"description":"Enable AWS Load Balancer Controller add-on"},"enable_aws_node_termination_handler":{"default":false,"description":"Enable AWS Node Termination Handler add-on"},"enable_aws_privateca_issuer":{"default":false,"description":"Enable PCA Issuer"},"enable_cert_manager":{"default":false,"description":"Enable Cert Manager add-on"},"enable_cluster_autoscaler":{"default":false,"description":"Enable Cluster autoscaler add-on"},"enable_crossplane":{"default":false,"description":"Enable Crossplane add-on"},"enable_external_dns":{"default":false,"description":"External DNS add-on."},"enable_fargate_fluentbit":{"default":false,"description":"Enable Fargate FluentBit add-on"},"enable_ingress_nginx":{"default":false,"description":"Enable Ingress Nginx add-on"},"enable_ipv6":{"default":false,"description":"Enable Ipv6 network. Attaches new VPC CNI policy to the IRSA role"},"enable_karpenter":{"default":false,"description":"Enable Karpenter autoscaler add-on"},"enable_keda":{"default":false,"description":"Enable KEDA Event-based autoscaler add-on"},"enable_kubernetes_dashboard":{"default":false,"description":"Enable Kubernetes Dashboard add-on"},"enable_metrics_server":{"default":false,"description":"Enable metrics server add-on"},"enable_ondat":{"default":false,"description":"Enable Ondat add-on"},"enable_opentelemetry_operator":{"default":false,"description":"Enable opentelemetry operator add-on"},"enable_prometheus":{"default":false,"description":"Enable Community Prometheus add-on"},"enable_spark_k8s_operator":{"default":false,"description":"Enable Spark on K8s Operator add-on"},"enable_tetrate_istio":{"default":false,"description":"Enable Tetrate Istio add-on"},"enable_traefik":{"default":false,"description":"Enable Traefik add-on"},"enable_vault":{"default":false,"description":"Enable HashiCorp Vault add-on"},"enable_vpa":{"default":false,"description":"Enable Vertical Pod Autoscaler add-on"},"enable_yunikorn":{"default":false,"description":"Enable Apache YuniKorn K8s scheduler add-on"},"external_dns_helm_config":{"default":{},"description":"External DNS Helm Chart config"},"external_dns_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"fargate_fluentbit_addon_config":{"default":{},"description":"Fargate fluentbit add-on config"},"ingress_nginx_helm_config":{"default":{},"description":"Ingress Nginx Helm Chart config"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM permissions boundary for IRSA roles"},"irsa_iam_role_path":{"default":"/","description":"IAM role path for IRSA roles"},"karpenter_helm_config":{"default":{},"description":"Karpenter autoscaler add-on config"},"karpenter_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"karpenter_node_iam_instance_profile":{"default":"","description":"Karpenter Node IAM Instance profile id"},"keda_helm_config":{"default":{},"description":"KEDA Event-based autoscaler add-on config"},"keda_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"kubernetes_dashboard_helm_config":{"default":null,"description":"Kubernetes Dashboard Helm Chart config"},"metrics_server_helm_config":{"default":{},"description":"Metrics Server Helm Chart config"},"ondat_admin_password":{"default":"storageos","description":"Password for Ondat admin user","sensitive":true},"ondat_admin_username":{"default":"storageos","description":"Username for Ondat admin user"},"ondat_create_cluster":{"default":true,"description":"Create cluster resources"},"ondat_etcd_ca":{"default":null,"description":"CA content for Ondat etcd"},"ondat_etcd_cert":{"default":null,"description":"Certificate content for Ondat etcd"},"ondat_etcd_endpoints":{"default":[],"description":"List of etcd endpoints for Ondat"},"ondat_etcd_key":{"default":null,"description":"Private key content for Ondat etcd","sensitive":true},"ondat_helm_config":{"default":{},"description":"Ondat Helm Chart config"},"ondat_irsa_policies":{"default":[],"description":"IAM policy ARNs for Ondat IRSA"},"opentelemetry_operator_helm_config":{"default":{},"description":"Opentelemetry Operator Helm Chart config"},"prometheus_helm_config":{"default":{},"description":"Community Prometheus Helm Chart config"},"spark_k8s_operator_helm_config":{"default":{},"description":"Spark on K8s Operator Helm Chart config"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit`,`XYZ`)"},"tetrate_istio_base_helm_config":{"default":{},"description":"Istio `base` Helm Chart config"},"tetrate_istio_cni_helm_config":{"default":{},"description":"Istio `cni` Helm Chart config"},"tetrate_istio_distribution":{"default":"TID","description":"Istio distribution"},"tetrate_istio_gateway_helm_config":{"default":{},"description":"Istio `gateway` Helm Chart config"},"tetrate_istio_install_base":{"default":true,"description":"Install Istio `base` Helm Chart"},"tetrate_istio_install_cni":{"default":true,"description":"Install Istio `cni` Helm Chart"},"tetrate_istio_install_gateway":{"default":true,"description":"Install Istio `gateway` Helm Chart"},"tetrate_istio_install_istiod":{"default":true,"description":"Install Istio `istiod` Helm Chart"},"tetrate_istio_istiod_helm_config":{"default":{},"description":"Istio `istiod` Helm Chart config"},"tetrate_istio_version":{"default":"","description":"Istio version"},"traefik_helm_config":{"default":{},"description":"Traefik Helm Chart config"},"vault_helm_config":{"default":null,"description":"HashiCorp Vault Helm Chart config"},"vpa_helm_config":{"default":null,"description":"VPA Helm Chart config"},"yunikorn_helm_config":{"default":null,"description":"YuniKorn Helm Chart config"}}},"depends_on":["module.eks_blueprints.managed_node_groups"]},"eks_blueprints":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints?ref=v4.0.7","expressions":{"application_teams":{"references":["data.aws_caller_identity.current.arn","data.aws_caller_identity.current"]},"cluster_name":{"references":["local.name"]},"cluster_version":{"references":["local.cluster_version"]},"managed_node_groups":{"references":["module.vpc.private_subnets","module.vpc"]},"platform_teams":{"references":["data.aws_caller_identity.current.arn","data.aws_caller_identity.current"]},"private_subnet_ids":{"references":["module.vpc.private_subnets","module.vpc"]},"tags":{"references":["local.tags"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"amazon_prometheus_workspace_endpoint":{"expression":{"references":["var.create_eks","var.enable_amazon_prometheus","module.aws_managed_prometheus[0].amazon_prometheus_workspace_endpoint","module.aws_managed_prometheus[0]"]},"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_id":{"expression":{"references":["var.create_eks","var.enable_amazon_prometheus","module.aws_managed_prometheus[0].amazon_prometheus_workspace_id","module.aws_managed_prometheus[0]"]},"description":"Amazon Managed Prometheus Workspace ID"},"cluster_primary_security_group_id":{"expression":{"references":["module.aws_eks.cluster_primary_security_group_id","module.aws_eks"]},"description":"Cluster security group that was created by Amazon EKS for the cluster. Managed node groups use this security group for control-plane-to-data-plane communication. Referred to as 'Cluster security group' in the EKS console"},"cluster_security_group_arn":{"expression":{"references":["module.aws_eks.cluster_security_group_arn","module.aws_eks"]},"description":"Amazon Resource Name (ARN) of the cluster security group"},"cluster_security_group_id":{"expression":{"references":["module.aws_eks.cluster_security_group_id","module.aws_eks"]},"description":"EKS Control Plane Security Group ID"},"configure_kubectl":{"expression":{"references":["local.context.aws_region_name","local.context","module.aws_eks.cluster_id","module.aws_eks"]},"description":"Configure kubectl: make sure you're logged in with the correct AWS profile and run the following command to update your kubeconfig"},"eks_cluster_certificate_authority_data":{"expression":{"references":["module.aws_eks.cluster_certificate_authority_data","module.aws_eks"]},"description":"Base64 encoded certificate data required to communicate with the cluster"},"eks_cluster_endpoint":{"expression":{"references":["module.aws_eks.cluster_endpoint","module.aws_eks"]},"description":"Endpoint for your Kubernetes API server"},"eks_cluster_id":{"expression":{"references":["module.aws_eks.cluster_id","module.aws_eks"]},"description":"Amazon EKS Cluster Name"},"eks_cluster_status":{"expression":{"references":["module.aws_eks.cluster_status","module.aws_eks"]},"description":"Amazon EKS Cluster Status"},"eks_cluster_version":{"expression":{"references":["module.aws_eks.cluster_version","module.aws_eks"]},"description":"The Kubernetes version for the cluster"},"eks_oidc_issuer_url":{"expression":{"references":["module.aws_eks.cluster_oidc_issuer_url","module.aws_eks"]},"description":"The URL on the EKS cluster OIDC Issuer"},"eks_oidc_provider_arn":{"expression":{"references":["module.aws_eks.oidc_provider_arn","module.aws_eks"]},"description":"The ARN of the OIDC Provider if `enable_irsa = true`."},"emr_on_eks_role_arn":{"expression":{"references":["var.create_eks","var.enable_emr_on_eks","var.emr_on_eks_teams","module.emr_on_eks"]},"description":"IAM execution role ARN for EMR on EKS"},"emr_on_eks_role_id":{"expression":{"references":["var.create_eks","var.enable_emr_on_eks","var.emr_on_eks_teams","module.emr_on_eks"]},"description":"IAM execution role ID for EMR on EKS"},"fargate_profiles":{"expression":{"references":["var.create_eks","var.fargate_profiles","module.aws_eks_fargate_profiles"]},"description":"Outputs from EKS Fargate profiles groups "},"fargate_profiles_aws_auth_config_map":{"expression":{"references":["local.fargate_profiles_aws_auth_config_map"]},"description":"Fargate profiles AWS auth map"},"fargate_profiles_iam_role_arns":{"expression":{"references":["var.create_eks","var.fargate_profiles","var.fargate_profiles","module.aws_eks_fargate_profiles"]},"description":"IAM role arn's for Fargate Profiles"},"managed_node_group_arn":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"Managed node group arn"},"managed_node_group_aws_auth_config_map":{"expression":{"references":["local.managed_node_group_aws_auth_config_map"]},"description":"Managed node groups AWS auth map"},"managed_node_group_iam_instance_profile_arns":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"IAM instance profile arn's of managed node groups"},"managed_node_group_iam_instance_profile_id":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"IAM instance profile id of managed node groups"},"managed_node_group_iam_role_arns":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"IAM role arn's of managed node groups"},"managed_node_group_iam_role_names":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"IAM role names of managed node groups"},"managed_node_groups":{"expression":{"references":["var.create_eks","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"Outputs from EKS Managed node groups "},"managed_node_groups_id":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"EKS Managed node groups id"},"managed_node_groups_status":{"expression":{"references":["var.create_eks","var.managed_node_groups","var.managed_node_groups","module.aws_eks_managed_node_groups"]},"description":"EKS Managed node groups status"},"oidc_provider":{"expression":{"references":["module.aws_eks.oidc_provider","module.aws_eks"]},"description":"The OpenID Connect identity provider (issuer URL without leading `https://`)"},"self_managed_node_group_autoscaling_groups":{"expression":{"references":["var.create_eks","var.self_managed_node_groups","var.self_managed_node_groups","module.aws_eks_self_managed_node_groups"]},"description":"Autoscaling group names of self managed node groups"},"self_managed_node_group_aws_auth_config_map":{"expression":{"references":["local.self_managed_node_group_aws_auth_config_map"]},"description":"Self managed node groups AWS auth map"},"self_managed_node_group_iam_instance_profile_id":{"expression":{"references":["var.create_eks","var.self_managed_node_groups","var.self_managed_node_groups","module.aws_eks_self_managed_node_groups"]},"description":"IAM instance profile id of managed node groups"},"self_managed_node_group_iam_role_arns":{"expression":{"references":["var.create_eks","var.self_managed_node_groups","var.self_managed_node_groups","module.aws_eks_self_managed_node_groups"]},"description":"IAM role arn's of self managed node groups"},"self_managed_node_groups":{"expression":{"references":["var.create_eks","var.self_managed_node_groups","module.aws_eks_self_managed_node_groups"]},"description":"Outputs from EKS Self-managed node groups "},"teams":{"expression":{"references":["var.create_eks","var.platform_teams","var.application_teams","module.aws_eks_teams"]},"description":"Outputs from EKS Fargate profiles groups "},"windows_node_group_aws_auth_config_map":{"expression":{"references":["local.windows_node_group_aws_auth_config_map"]},"description":"Windows node groups AWS auth map"},"worker_node_security_group_arn":{"expression":{"references":["module.aws_eks.node_security_group_arn","module.aws_eks"]},"description":"Amazon Resource Name (ARN) of the worker node shared security group"},"worker_node_security_group_id":{"expression":{"references":["module.aws_eks.node_security_group_id","module.aws_eks"]},"description":"ID of the worker node shared security group"}},"resources":[{"address":"kubernetes_config_map.amazon_vpc_cni","mode":"managed","type":"kubernetes_config_map","name":"amazon_vpc_cni","provider_config_key":"kubernetes","expressions":{"data":{"references":["var.enable_windows_support"]},"metadata":[{"name":{"constant_value":"amazon-vpc-cni"},"namespace":{"constant_value":"kube-system"}}]},"schema_version":0,"count_expression":{"references":["var.enable_windows_support"]},"depends_on":["module.aws_eks.cluster_id","data.http.eks_cluster_readiness[0]"]},{"address":"kubernetes_config_map.aws_auth","mode":"managed","type":"kubernetes_config_map","name":"aws_auth","provider_config_key":"kubernetes","expressions":{"data":{"references":["local.managed_node_group_aws_auth_config_map","local.self_managed_node_group_aws_auth_config_map","local.windows_node_group_aws_auth_config_map","local.fargate_profiles_aws_auth_config_map","local.emr_on_eks_config_map","local.application_teams_config_map","local.platform_teams_config_map","var.map_roles","var.map_users","var.map_accounts"]},"metadata":[{"labels":{"references":["var.aws_auth_additional_labels"]},"name":{"constant_value":"aws-auth"},"namespace":{"constant_value":"kube-system"}}]},"schema_version":0,"count_expression":{"references":["var.create_eks"]},"depends_on":["module.aws_eks.cluster_id","data.http.eks_cluster_readiness[0]"]},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_eks_cluster.cluster","mode":"data","type":"aws_eks_cluster","name":"cluster","provider_config_key":"aws","expressions":{"name":{"references":["module.aws_eks.cluster_id","module.aws_eks"]}},"schema_version":0,"count_expression":{"references":["var.create_eks"]}},{"address":"data.aws_iam_policy_document.eks_key","mode":"data","type":"aws_iam_policy_document","name":"eks_key","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:Encrypt","kms:Decrypt","kms:ReEncrypt*","kms:GenerateDataKey*","kms:CreateGrant","kms:DescribeKey"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["local.context.aws_caller_identity_account_id","local.context"]},"variable":{"constant_value":"kms:CallerAccount"}},{"test":{"constant_value":"StringEquals"},"values":{"references":["local.context.aws_region_name","local.context"]},"variable":{"constant_value":"kms:ViaService"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.context.aws_partition_id","local.context","local.context.aws_caller_identity_account_id","local.context"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Allow access for all principals in the account that are authorized"}},{"actions":{"constant_value":["kms:Describe*","kms:Get*","kms:List*","kms:RevokeGrant"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.context.aws_partition_id","local.context","local.context.aws_caller_identity_account_id","local.context"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Allow direct access to key metadata to the account"}},{"actions":{"constant_value":["kms:*"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.cluster_kms_key_additional_admin_arns","data.aws_iam_session_context.current.issuer_arn","data.aws_iam_session_context.current"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Allow access for Key Administrators"}},{"actions":{"constant_value":["kms:Encrypt","kms:Decrypt","kms:ReEncrypt*","kms:GenerateDataKey*","kms:DescribeKey"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.cluster_iam_role_arn"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Allow use of the key"}},{"actions":{"constant_value":["kms:CreateGrant","kms:ListGrants","kms:RevokeGrant"]},"condition":[{"test":{"constant_value":"Bool"},"values":{"constant_value":["true"]},"variable":{"constant_value":"kms:GrantIsForAWSResource"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.cluster_iam_role_arn"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Allow attachment of persistent resources"}}]},"schema_version":0},{"address":"data.aws_iam_session_context.current","mode":"data","type":"aws_iam_session_context","name":"current","provider_config_key":"aws","expressions":{"arn":{"references":["data.aws_caller_identity.current.arn","data.aws_caller_identity.current"]}},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.http.eks_cluster_readiness","mode":"data","type":"http","name":"eks_cluster_readiness","provider_config_key":"module.eks_blueprints:http","expressions":{"ca_certificate":{"references":["data.aws_eks_cluster.cluster[0].certificate_authority[0].data","data.aws_eks_cluster.cluster[0].certificate_authority[0]","data.aws_eks_cluster.cluster[0].certificate_authority","data.aws_eks_cluster.cluster[0]","data.aws_eks_cluster.cluster"]},"timeout":{"references":["var.eks_readiness_timeout"]},"url":{"references":["data.aws_eks_cluster.cluster[0].endpoint","data.aws_eks_cluster.cluster[0]","data.aws_eks_cluster.cluster"]}},"schema_version":0,"count_expression":{"references":["var.create_eks"]}}],"module_calls":{"aws_eks":{"source":"terraform-aws-modules/eks/aws","expressions":{"attach_cluster_encryption_policy":{"constant_value":false},"cloudwatch_log_group_kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"cloudwatch_log_group_retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"cluster_additional_security_group_ids":{"references":["var.cluster_additional_security_group_ids"]},"cluster_enabled_log_types":{"references":["var.cluster_enabled_log_types"]},"cluster_encryption_config":{"references":["var.cluster_encryption_config","module.kms[0].key_arn","module.kms[0]","var.cluster_kms_key_arn","var.cluster_encryption_config"]},"cluster_endpoint_private_access":{"references":["var.cluster_endpoint_private_access"]},"cluster_endpoint_public_access":{"references":["var.cluster_endpoint_public_access"]},"cluster_endpoint_public_access_cidrs":{"references":["var.cluster_endpoint_public_access_cidrs"]},"cluster_identity_providers":{"references":["var.cluster_identity_providers"]},"cluster_ip_family":{"references":["var.cluster_ip_family"]},"cluster_name":{"references":["var.cluster_name"]},"cluster_security_group_additional_rules":{"references":["var.cluster_security_group_additional_rules"]},"cluster_security_group_tags":{"references":["var.cluster_security_group_tags"]},"cluster_service_ipv4_cidr":{"references":["var.cluster_service_ipv4_cidr"]},"cluster_timeouts":{"references":["var.cluster_timeouts"]},"cluster_version":{"references":["var.cluster_version"]},"create":{"references":["var.create_eks"]},"create_cloudwatch_log_group":{"references":["var.create_cloudwatch_log_group"]},"create_cluster_security_group":{"constant_value":true},"create_iam_role":{"references":["var.create_iam_role"]},"create_node_security_group":{"references":["var.create_node_security_group"]},"custom_oidc_thumbprints":{"references":["var.custom_oidc_thumbprints"]},"enable_irsa":{"references":["var.enable_irsa"]},"iam_role_additional_policies":{"references":["var.iam_role_additional_policies"]},"iam_role_arn":{"references":["var.iam_role_arn"]},"iam_role_name":{"references":["local.cluster_iam_role_name"]},"iam_role_path":{"references":["var.iam_role_path"]},"iam_role_permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"iam_role_use_name_prefix":{"constant_value":false},"node_security_group_additional_rules":{"references":["var.node_security_group_additional_rules"]},"node_security_group_tags":{"references":["var.node_security_group_tags"]},"openid_connect_audiences":{"references":["var.openid_connect_audiences"]},"subnet_ids":{"references":["var.private_subnet_ids"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc_id"]}},"module":{"outputs":{"aws_auth_configmap_yaml":{"expression":{"references":["path.module","module.eks_managed_node_group","module.self_managed_node_group","module.self_managed_node_group","module.fargate_profile"]},"description":"Formatted yaml output for base aws-auth configmap containing roles used in cluster node groups/fargate profiles"},"cloudwatch_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.this[0].arn","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"Arn of cloudwatch log group created"},"cloudwatch_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.this[0].name","aws_cloudwatch_log_group.this[0]","aws_cloudwatch_log_group.this"]},"description":"Name of cloudwatch log group created"},"cluster_addons":{"expression":{"references":["aws_eks_addon.this"]},"description":"Map of attribute maps for all EKS cluster addons enabled"},"cluster_arn":{"expression":{"references":["aws_eks_cluster.this[0].arn","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"The Amazon Resource Name (ARN) of the cluster"},"cluster_certificate_authority_data":{"expression":{"references":["aws_eks_cluster.this[0].certificate_authority[0].data","aws_eks_cluster.this[0].certificate_authority[0]","aws_eks_cluster.this[0].certificate_authority","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"Base64 encoded certificate data required to communicate with the cluster"},"cluster_endpoint":{"expression":{"references":["aws_eks_cluster.this[0].endpoint","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"Endpoint for your Kubernetes API server"},"cluster_iam_role_arn":{"expression":{"references":["aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"IAM role ARN of the EKS cluster"},"cluster_iam_role_name":{"expression":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"IAM role name of the EKS cluster"},"cluster_iam_role_unique_id":{"expression":{"references":["aws_iam_role.this[0].unique_id","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"Stable and unique string identifying the IAM role"},"cluster_id":{"expression":{"references":["aws_eks_cluster.this[0].id","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"The name/id of the EKS cluster. Will block on cluster creation until the cluster is really ready"},"cluster_identity_providers":{"expression":{"references":["aws_eks_identity_provider_config.this"]},"description":"Map of attribute maps for all EKS identity providers enabled"},"cluster_oidc_issuer_url":{"expression":{"references":["aws_eks_cluster.this[0].identity[0].oidc[0].issuer","aws_eks_cluster.this[0].identity[0].oidc[0]","aws_eks_cluster.this[0].identity[0].oidc","aws_eks_cluster.this[0].identity[0]","aws_eks_cluster.this[0].identity","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"The URL on the EKS cluster for the OpenID Connect identity provider"},"cluster_platform_version":{"expression":{"references":["aws_eks_cluster.this[0].platform_version","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"Platform version for the cluster"},"cluster_primary_security_group_id":{"expression":{"references":["aws_eks_cluster.this[0].vpc_config[0].cluster_security_group_id","aws_eks_cluster.this[0].vpc_config[0]","aws_eks_cluster.this[0].vpc_config","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"Cluster security group that was created by Amazon EKS for the cluster. Managed node groups use this security group for control-plane-to-data-plane communication. Referred to as 'Cluster security group' in the EKS console"},"cluster_security_group_arn":{"expression":{"references":["aws_security_group.cluster[0].arn","aws_security_group.cluster[0]","aws_security_group.cluster"]},"description":"Amazon Resource Name (ARN) of the cluster security group"},"cluster_security_group_id":{"expression":{"references":["aws_security_group.cluster[0].id","aws_security_group.cluster[0]","aws_security_group.cluster"]},"description":"ID of the cluster security group"},"cluster_status":{"expression":{"references":["aws_eks_cluster.this[0].status","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"Status of the EKS cluster. One of `CREATING`, `ACTIVE`, `DELETING`, `FAILED`"},"cluster_version":{"expression":{"references":["aws_eks_cluster.this[0].version","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"The Kubernetes version for the cluster"},"eks_managed_node_groups":{"expression":{"references":["module.eks_managed_node_group"]},"description":"Map of attribute maps for all EKS managed node groups created"},"eks_managed_node_groups_autoscaling_group_names":{"expression":{"references":["module.eks_managed_node_group"]},"description":"List of the autoscaling group names created by EKS managed node groups"},"fargate_profiles":{"expression":{"references":["module.fargate_profile"]},"description":"Map of attribute maps for all EKS Fargate Profiles created"},"node_security_group_arn":{"expression":{"references":["aws_security_group.node[0].arn","aws_security_group.node[0]","aws_security_group.node"]},"description":"Amazon Resource Name (ARN) of the node shared security group"},"node_security_group_id":{"expression":{"references":["aws_security_group.node[0].id","aws_security_group.node[0]","aws_security_group.node"]},"description":"ID of the node shared security group"},"oidc_provider":{"expression":{"references":["aws_eks_cluster.this[0].identity[0].oidc[0].issuer","aws_eks_cluster.this[0].identity[0].oidc[0]","aws_eks_cluster.this[0].identity[0].oidc","aws_eks_cluster.this[0].identity[0]","aws_eks_cluster.this[0].identity","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"description":"The OpenID Connect identity provider (issuer URL without leading `https://`)"},"oidc_provider_arn":{"expression":{"references":["aws_iam_openid_connect_provider.oidc_provider[0].arn","aws_iam_openid_connect_provider.oidc_provider[0]","aws_iam_openid_connect_provider.oidc_provider"]},"description":"The ARN of the OIDC Provider if `enable_irsa = true`"},"self_managed_node_groups":{"expression":{"references":["module.self_managed_node_group"]},"description":"Map of attribute maps for all self managed node groups created"},"self_managed_node_groups_autoscaling_group_names":{"expression":{"references":["module.self_managed_node_group"]},"description":"List of the autoscaling group names created by self-managed node groups"}},"resources":[{"address":"aws_cloudwatch_log_group.this","mode":"managed","type":"aws_cloudwatch_log_group","name":"this","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.cluster_name"]},"retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["local.create","var.create_cloudwatch_log_group"]}},{"address":"aws_ec2_tag.cluster_primary_security_group","mode":"managed","type":"aws_ec2_tag","name":"cluster_primary_security_group","provider_config_key":"aws","expressions":{"key":{"references":["each.key"]},"resource_id":{"references":["aws_eks_cluster.this[0].vpc_config[0].cluster_security_group_id","aws_eks_cluster.this[0].vpc_config[0]","aws_eks_cluster.this[0].vpc_config","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"value":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.tags","var.cluster_tags","local.create"]}},{"address":"aws_eks_addon.this","mode":"managed","type":"aws_eks_addon","name":"this","provider_config_key":"aws","expressions":{"addon_name":{"references":["each.value.name","each.value","each.key"]},"addon_version":{"references":["each.value"]},"cluster_name":{"references":["aws_eks_cluster.this[0].name","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"resolve_conflicts":{"references":["each.value"]},"service_account_role_arn":{"references":["each.value"]},"tags":{"references":["var.tags"]}},"schema_version":0,"for_each_expression":{"references":["var.cluster_addons","local.create"]},"depends_on":["module.fargate_profile","module.eks_managed_node_group","module.self_managed_node_group"]},{"address":"aws_eks_cluster.this","mode":"managed","type":"aws_eks_cluster","name":"this","provider_config_key":"aws","expressions":{"enabled_cluster_log_types":{"references":["var.cluster_enabled_log_types"]},"kubernetes_network_config":[{"ip_family":{"references":["var.cluster_ip_family"]},"service_ipv4_cidr":{"references":["var.cluster_service_ipv4_cidr"]}}],"name":{"references":["var.cluster_name"]},"role_arn":{"references":["aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this","var.iam_role_arn"]},"tags":{"references":["var.tags","var.cluster_tags"]},"timeouts":{"create":{"references":["var.cluster_timeouts"]},"delete":{"references":["var.cluster_timeouts"]},"update":{"references":["var.cluster_timeouts"]}},"version":{"references":["var.cluster_version"]},"vpc_config":[{"endpoint_private_access":{"references":["var.cluster_endpoint_private_access"]},"endpoint_public_access":{"references":["var.cluster_endpoint_public_access"]},"public_access_cidrs":{"references":["var.cluster_endpoint_public_access_cidrs"]},"security_group_ids":{"references":["var.cluster_additional_security_group_ids","local.cluster_security_group_id"]},"subnet_ids":{"references":["var.subnet_ids"]}}]},"schema_version":0,"count_expression":{"references":["local.create"]},"depends_on":["aws_iam_role_policy_attachment.this","aws_security_group_rule.cluster","aws_security_group_rule.node","aws_cloudwatch_log_group.this"]},{"address":"aws_eks_identity_provider_config.this","mode":"managed","type":"aws_eks_identity_provider_config","name":"this","provider_config_key":"aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.this[0].name","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"oidc":[{"client_id":{"references":["each.value.client_id","each.value"]},"groups_claim":{"references":["each.value"]},"groups_prefix":{"references":["each.value"]},"identity_provider_config_name":{"references":["each.value.identity_provider_config_name","each.value","each.key"]},"issuer_url":{"references":["each.value.issuer_url","each.value"]},"required_claims":{"references":["each.value"]},"username_claim":{"references":["each.value"]},"username_prefix":{"references":["each.value"]}}],"tags":{"references":["var.tags"]}},"schema_version":0,"for_each_expression":{"references":["var.cluster_identity_providers","local.create"]}},{"address":"aws_iam_openid_connect_provider.oidc_provider","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_provider","provider_config_key":"aws","expressions":{"client_id_list":{"references":["data.aws_partition.current.dns_suffix","data.aws_partition.current","var.openid_connect_audiences"]},"tags":{"references":["var.cluster_name","var.tags"]},"thumbprint_list":{"references":["data.tls_certificate.this[0].certificates[0].sha1_fingerprint","data.tls_certificate.this[0].certificates[0]","data.tls_certificate.this[0].certificates","data.tls_certificate.this[0]","data.tls_certificate.this","var.custom_oidc_thumbprints"]},"url":{"references":["aws_eks_cluster.this[0].identity[0].oidc[0].issuer","aws_eks_cluster.this[0].identity[0].oidc[0]","aws_eks_cluster.this[0].identity[0].oidc","aws_eks_cluster.this[0].identity[0]","aws_eks_cluster.this[0].identity","aws_eks_cluster.this[0]","aws_eks_cluster.this"]}},"schema_version":0,"count_expression":{"references":["local.create","var.enable_irsa"]}},{"address":"aws_iam_policy.cluster_encryption","mode":"managed","type":"aws_iam_policy","name":"cluster_encryption","provider_config_key":"aws","expressions":{"description":{"references":["var.cluster_encryption_policy_description"]},"name":{"references":["var.cluster_encryption_policy_use_name_prefix","local.cluster_encryption_policy_name"]},"name_prefix":{"references":["var.cluster_encryption_policy_use_name_prefix","local.cluster_encryption_policy_name"]},"path":{"references":["var.cluster_encryption_policy_path"]},"policy":{"references":["var.cluster_encryption_config"]},"tags":{"references":["var.tags","var.cluster_encryption_policy_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role","var.attach_cluster_encryption_policy","var.cluster_encryption_config"]}},{"address":"aws_iam_policy.cni_ipv6_policy","mode":"managed","type":"aws_iam_policy","name":"cni_ipv6_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM policy for EKS CNI to assign IPV6 addresses"},"name":{"constant_value":"AmazonEKS_CNI_IPv6_Policy"},"policy":{"references":["data.aws_iam_policy_document.cni_ipv6_policy[0].json","data.aws_iam_policy_document.cni_ipv6_policy[0]","data.aws_iam_policy_document.cni_ipv6_policy"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_cni_ipv6_iam_policy"]}},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy[0].json","data.aws_iam_policy_document.assume_role_policy[0]","data.aws_iam_policy_document.assume_role_policy"]},"description":{"references":["var.iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name","var.prefix_separator"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role"]}},{"address":"aws_iam_role_policy_attachment.cluster_encryption","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cluster_encryption","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.cluster_encryption[0].arn","aws_iam_policy.cluster_encryption[0]","aws_iam_policy.cluster_encryption"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]}},"schema_version":0,"count_expression":{"references":["local.create_iam_role","var.attach_cluster_encryption_policy","var.cluster_encryption_config"]}},{"address":"aws_iam_role_policy_attachment.this","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["local.create_iam_role","local.policy_arn_prefix","local.policy_arn_prefix","var.iam_role_additional_policies"]}},{"address":"aws_security_group.cluster","mode":"managed","type":"aws_security_group","name":"cluster","provider_config_key":"aws","expressions":{"description":{"references":["var.cluster_security_group_description"]},"name":{"references":["var.cluster_security_group_use_name_prefix","local.cluster_sg_name"]},"name_prefix":{"references":["var.cluster_security_group_use_name_prefix","local.cluster_sg_name","var.prefix_separator"]},"tags":{"references":["var.tags","local.cluster_sg_name","var.cluster_security_group_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_cluster_sg"]}},{"address":"aws_security_group.node","mode":"managed","type":"aws_security_group","name":"node","provider_config_key":"aws","expressions":{"description":{"references":["var.node_security_group_description"]},"name":{"references":["var.node_security_group_use_name_prefix","local.node_sg_name"]},"name_prefix":{"references":["var.node_security_group_use_name_prefix","local.node_sg_name","var.prefix_separator"]},"tags":{"references":["var.tags","local.node_sg_name","var.cluster_name","var.node_security_group_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_node_sg"]}},{"address":"aws_security_group_rule.cluster","mode":"managed","type":"aws_security_group_rule","name":"cluster","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"ipv6_cidr_blocks":{"references":["each.value.ipv6_cidr_blocks","each.value"]},"prefix_list_ids":{"references":["each.value.prefix_list_ids","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.cluster[0].id","aws_security_group.cluster[0]","aws_security_group.cluster"]},"self":{"references":["each.value.self","each.value"]},"source_security_group_id":{"references":["each.value.source_security_group_id","each.value","each.value.source_node_security_group","each.value","local.node_security_group_id"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["local.cluster_security_group_rules","var.cluster_security_group_additional_rules","local.create_cluster_sg"]}},{"address":"aws_security_group_rule.node","mode":"managed","type":"aws_security_group_rule","name":"node","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"ipv6_cidr_blocks":{"references":["each.value.ipv6_cidr_blocks","each.value"]},"prefix_list_ids":{"references":["each.value.prefix_list_ids","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.node[0].id","aws_security_group.node[0]","aws_security_group.node"]},"self":{"references":["each.value.self","each.value"]},"source_security_group_id":{"references":["each.value.source_security_group_id","each.value","each.value.source_cluster_security_group","each.value","local.cluster_security_group_id"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["local.node_security_group_rules","var.node_security_group_additional_rules","local.create_node_sg"]}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["local.dns_suffix"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSClusterAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create","var.create_iam_role"]}},{"address":"data.aws_iam_policy_document.cni_ipv6_policy","mode":"data","type":"aws_iam_policy_document","name":"cni_ipv6_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:AssignIpv6Addresses","ec2:DescribeInstances","ec2:DescribeTags","ec2:DescribeNetworkInterfaces","ec2:DescribeInstanceTypes"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AssignDescribe"}},{"actions":{"constant_value":["ec2:CreateTags"]},"resources":{"constant_value":["arn:aws:ec2:*:*:network-interface/*"]},"sid":{"constant_value":"CreateTags"}}]},"schema_version":0,"count_expression":{"references":["var.create","var.create_cni_ipv6_iam_policy"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.tls_certificate.this","mode":"data","type":"tls_certificate","name":"this","provider_config_key":"module.eks_blueprints.module.aws_eks:tls","expressions":{"url":{"references":["aws_eks_cluster.this[0].identity[0].oidc[0].issuer","aws_eks_cluster.this[0].identity[0].oidc[0]","aws_eks_cluster.this[0].identity[0].oidc","aws_eks_cluster.this[0].identity[0]","aws_eks_cluster.this[0].identity","aws_eks_cluster.this[0]","aws_eks_cluster.this"]}},"schema_version":0,"count_expression":{"references":["local.create","var.enable_irsa"]}}],"module_calls":{"eks_managed_node_group":{"source":"./modules/eks-managed-node-group","expressions":{"ami_id":{"references":["each.value.ami_id","each.value","var.eks_managed_node_group_defaults.ami_id","var.eks_managed_node_group_defaults"]},"ami_release_version":{"references":["each.value.ami_release_version","each.value","var.eks_managed_node_group_defaults.ami_release_version","var.eks_managed_node_group_defaults"]},"ami_type":{"references":["each.value.ami_type","each.value","var.eks_managed_node_group_defaults.ami_type","var.eks_managed_node_group_defaults"]},"block_device_mappings":{"references":["each.value.block_device_mappings","each.value","var.eks_managed_node_group_defaults.block_device_mappings","var.eks_managed_node_group_defaults"]},"bootstrap_extra_args":{"references":["each.value.bootstrap_extra_args","each.value","var.eks_managed_node_group_defaults.bootstrap_extra_args","var.eks_managed_node_group_defaults"]},"capacity_reservation_specification":{"references":["each.value.capacity_reservation_specification","each.value","var.eks_managed_node_group_defaults.capacity_reservation_specification","var.eks_managed_node_group_defaults"]},"capacity_type":{"references":["each.value.capacity_type","each.value","var.eks_managed_node_group_defaults.capacity_type","var.eks_managed_node_group_defaults"]},"cluster_auth_base64":{"references":["aws_eks_cluster.this[0].certificate_authority[0].data","aws_eks_cluster.this[0].certificate_authority[0]","aws_eks_cluster.this[0].certificate_authority","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_endpoint":{"references":["aws_eks_cluster.this[0].endpoint","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_ip_family":{"references":["var.cluster_ip_family"]},"cluster_name":{"references":["aws_eks_cluster.this[0].name","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_primary_security_group_id":{"references":["each.value.attach_cluster_primary_security_group","each.value","var.eks_managed_node_group_defaults.attach_cluster_primary_security_group","var.eks_managed_node_group_defaults","aws_eks_cluster.this[0].vpc_config[0].cluster_security_group_id","aws_eks_cluster.this[0].vpc_config[0]","aws_eks_cluster.this[0].vpc_config","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_security_group_id":{"references":["local.cluster_security_group_id"]},"cluster_service_ipv4_cidr":{"references":["var.cluster_service_ipv4_cidr"]},"cluster_version":{"references":["each.value.cluster_version","each.value","var.eks_managed_node_group_defaults.cluster_version","var.eks_managed_node_group_defaults","aws_eks_cluster.this[0].version","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cpu_options":{"references":["each.value.cpu_options","each.value","var.eks_managed_node_group_defaults.cpu_options","var.eks_managed_node_group_defaults"]},"create":{"references":["each.value.create","each.value"]},"create_iam_role":{"references":["each.value.create_iam_role","each.value","var.eks_managed_node_group_defaults.create_iam_role","var.eks_managed_node_group_defaults"]},"create_launch_template":{"references":["each.value.create_launch_template","each.value","var.eks_managed_node_group_defaults.create_launch_template","var.eks_managed_node_group_defaults"]},"create_security_group":{"references":["each.value.create_security_group","each.value","var.eks_managed_node_group_defaults.create_security_group","var.eks_managed_node_group_defaults"]},"credit_specification":{"references":["each.value.credit_specification","each.value","var.eks_managed_node_group_defaults.credit_specification","var.eks_managed_node_group_defaults"]},"desired_size":{"references":["each.value.desired_size","each.value","var.eks_managed_node_group_defaults.desired_size","var.eks_managed_node_group_defaults"]},"disable_api_termination":{"references":["each.value.disable_api_termination","each.value","var.eks_managed_node_group_defaults.disable_api_termination","var.eks_managed_node_group_defaults"]},"disk_size":{"references":["each.value.disk_size","each.value","var.eks_managed_node_group_defaults.disk_size","var.eks_managed_node_group_defaults"]},"ebs_optimized":{"references":["each.value.ebs_optimized","each.value","var.eks_managed_node_group_defaults.ebs_optimized","var.eks_managed_node_group_defaults"]},"elastic_gpu_specifications":{"references":["each.value.elastic_gpu_specifications","each.value","var.eks_managed_node_group_defaults.elastic_gpu_specifications","var.eks_managed_node_group_defaults"]},"elastic_inference_accelerator":{"references":["each.value.elastic_inference_accelerator","each.value","var.eks_managed_node_group_defaults.elastic_inference_accelerator","var.eks_managed_node_group_defaults"]},"enable_bootstrap_user_data":{"references":["each.value.enable_bootstrap_user_data","each.value","var.eks_managed_node_group_defaults.enable_bootstrap_user_data","var.eks_managed_node_group_defaults"]},"enable_monitoring":{"references":["each.value.enable_monitoring","each.value","var.eks_managed_node_group_defaults.enable_monitoring","var.eks_managed_node_group_defaults"]},"enclave_options":{"references":["each.value.enclave_options","each.value","var.eks_managed_node_group_defaults.enclave_options","var.eks_managed_node_group_defaults"]},"force_update_version":{"references":["each.value.force_update_version","each.value","var.eks_managed_node_group_defaults.force_update_version","var.eks_managed_node_group_defaults"]},"iam_role_additional_policies":{"references":["each.value.iam_role_additional_policies","each.value","var.eks_managed_node_group_defaults.iam_role_additional_policies","var.eks_managed_node_group_defaults"]},"iam_role_arn":{"references":["each.value.iam_role_arn","each.value","var.eks_managed_node_group_defaults.iam_role_arn","var.eks_managed_node_group_defaults"]},"iam_role_attach_cni_policy":{"references":["each.value.iam_role_attach_cni_policy","each.value","var.eks_managed_node_group_defaults.iam_role_attach_cni_policy","var.eks_managed_node_group_defaults"]},"iam_role_description":{"references":["each.value.iam_role_description","each.value","var.eks_managed_node_group_defaults.iam_role_description","var.eks_managed_node_group_defaults"]},"iam_role_name":{"references":["each.value.iam_role_name","each.value","var.eks_managed_node_group_defaults.iam_role_name","var.eks_managed_node_group_defaults"]},"iam_role_path":{"references":["each.value.iam_role_path","each.value","var.eks_managed_node_group_defaults.iam_role_path","var.eks_managed_node_group_defaults"]},"iam_role_permissions_boundary":{"references":["each.value.iam_role_permissions_boundary","each.value","var.eks_managed_node_group_defaults.iam_role_permissions_boundary","var.eks_managed_node_group_defaults"]},"iam_role_tags":{"references":["each.value.iam_role_tags","each.value","var.eks_managed_node_group_defaults.iam_role_tags","var.eks_managed_node_group_defaults"]},"iam_role_use_name_prefix":{"references":["each.value.iam_role_use_name_prefix","each.value","var.eks_managed_node_group_defaults.iam_role_use_name_prefix","var.eks_managed_node_group_defaults"]},"instance_market_options":{"references":["each.value.instance_market_options","each.value","var.eks_managed_node_group_defaults.instance_market_options","var.eks_managed_node_group_defaults"]},"instance_types":{"references":["each.value.instance_types","each.value","var.eks_managed_node_group_defaults.instance_types","var.eks_managed_node_group_defaults"]},"kernel_id":{"references":["each.value.kernel_id","each.value","var.eks_managed_node_group_defaults.kernel_id","var.eks_managed_node_group_defaults"]},"key_name":{"references":["each.value.key_name","each.value","var.eks_managed_node_group_defaults.key_name","var.eks_managed_node_group_defaults"]},"labels":{"references":["each.value.labels","each.value","var.eks_managed_node_group_defaults.labels","var.eks_managed_node_group_defaults"]},"launch_template_default_version":{"references":["each.value.launch_template_default_version","each.value","var.eks_managed_node_group_defaults.launch_template_default_version","var.eks_managed_node_group_defaults"]},"launch_template_description":{"references":["each.value.launch_template_description","each.value","var.eks_managed_node_group_defaults.launch_template_description","var.eks_managed_node_group_defaults","each.value.name","each.value","each.key"]},"launch_template_name":{"references":["each.value.launch_template_name","each.value","var.eks_managed_node_group_defaults.launch_template_name","var.eks_managed_node_group_defaults","each.key"]},"launch_template_tags":{"references":["each.value.launch_template_tags","each.value","var.eks_managed_node_group_defaults.launch_template_tags","var.eks_managed_node_group_defaults"]},"launch_template_use_name_prefix":{"references":["each.value.launch_template_use_name_prefix","each.value","var.eks_managed_node_group_defaults.launch_template_use_name_prefix","var.eks_managed_node_group_defaults"]},"launch_template_version":{"references":["each.value.launch_template_version","each.value","var.eks_managed_node_group_defaults.launch_template_version","var.eks_managed_node_group_defaults"]},"license_specifications":{"references":["each.value.license_specifications","each.value","var.eks_managed_node_group_defaults.license_specifications","var.eks_managed_node_group_defaults"]},"max_size":{"references":["each.value.max_size","each.value","var.eks_managed_node_group_defaults.max_size","var.eks_managed_node_group_defaults"]},"metadata_options":{"references":["each.value.metadata_options","each.value","var.eks_managed_node_group_defaults.metadata_options","var.eks_managed_node_group_defaults","local.metadata_options"]},"min_size":{"references":["each.value.min_size","each.value","var.eks_managed_node_group_defaults.min_size","var.eks_managed_node_group_defaults"]},"name":{"references":["each.value.name","each.value","each.key"]},"network_interfaces":{"references":["each.value.network_interfaces","each.value","var.eks_managed_node_group_defaults.network_interfaces","var.eks_managed_node_group_defaults"]},"placement":{"references":["each.value.placement","each.value","var.eks_managed_node_group_defaults.placement","var.eks_managed_node_group_defaults"]},"platform":{"references":["each.value.platform","each.value","var.eks_managed_node_group_defaults.platform","var.eks_managed_node_group_defaults"]},"post_bootstrap_user_data":{"references":["each.value.post_bootstrap_user_data","each.value","var.eks_managed_node_group_defaults.post_bootstrap_user_data","var.eks_managed_node_group_defaults"]},"pre_bootstrap_user_data":{"references":["each.value.pre_bootstrap_user_data","each.value","var.eks_managed_node_group_defaults.pre_bootstrap_user_data","var.eks_managed_node_group_defaults"]},"ram_disk_id":{"references":["each.value.ram_disk_id","each.value","var.eks_managed_node_group_defaults.ram_disk_id","var.eks_managed_node_group_defaults"]},"remote_access":{"references":["each.value.remote_access","each.value","var.eks_managed_node_group_defaults.remote_access","var.eks_managed_node_group_defaults"]},"security_group_description":{"references":["each.value.security_group_description","each.value","var.eks_managed_node_group_defaults.security_group_description","var.eks_managed_node_group_defaults"]},"security_group_name":{"references":["each.value.security_group_name","each.value","var.eks_managed_node_group_defaults.security_group_name","var.eks_managed_node_group_defaults"]},"security_group_rules":{"references":["each.value.security_group_rules","each.value","var.eks_managed_node_group_defaults.security_group_rules","var.eks_managed_node_group_defaults"]},"security_group_tags":{"references":["each.value.security_group_tags","each.value","var.eks_managed_node_group_defaults.security_group_tags","var.eks_managed_node_group_defaults"]},"security_group_use_name_prefix":{"references":["each.value.security_group_use_name_prefix","each.value","var.eks_managed_node_group_defaults.security_group_use_name_prefix","var.eks_managed_node_group_defaults"]},"subnet_ids":{"references":["each.value.subnet_ids","each.value","var.eks_managed_node_group_defaults.subnet_ids","var.eks_managed_node_group_defaults","var.subnet_ids"]},"tags":{"references":["var.tags","each.value.tags","each.value","var.eks_managed_node_group_defaults.tags","var.eks_managed_node_group_defaults"]},"taints":{"references":["each.value.taints","each.value","var.eks_managed_node_group_defaults.taints","var.eks_managed_node_group_defaults"]},"timeouts":{"references":["each.value.timeouts","each.value","var.eks_managed_node_group_defaults.timeouts","var.eks_managed_node_group_defaults"]},"update_config":{"references":["each.value.update_config","each.value","var.eks_managed_node_group_defaults.update_config","var.eks_managed_node_group_defaults"]},"update_launch_template_default_version":{"references":["each.value.update_launch_template_default_version","each.value","var.eks_managed_node_group_defaults.update_launch_template_default_version","var.eks_managed_node_group_defaults"]},"use_name_prefix":{"references":["each.value.use_name_prefix","each.value","var.eks_managed_node_group_defaults.use_name_prefix","var.eks_managed_node_group_defaults"]},"user_data_template_path":{"references":["each.value.user_data_template_path","each.value","var.eks_managed_node_group_defaults.user_data_template_path","var.eks_managed_node_group_defaults"]},"vpc_id":{"references":["each.value.vpc_id","each.value","var.eks_managed_node_group_defaults.vpc_id","var.eks_managed_node_group_defaults","var.vpc_id"]},"vpc_security_group_ids":{"references":["local.node_security_group_id","each.value.vpc_security_group_ids","each.value","var.eks_managed_node_group_defaults.vpc_security_group_ids","var.eks_managed_node_group_defaults"]}},"for_each_expression":{"references":["var.eks_managed_node_groups","var.create"]},"module":{"outputs":{"iam_role_arn":{"expression":{"references":["aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this","var.iam_role_arn"]},"description":"The Amazon Resource Name (ARN) specifying the IAM role"},"iam_role_name":{"expression":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"The name of the IAM role"},"iam_role_unique_id":{"expression":{"references":["aws_iam_role.this[0].unique_id","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"Stable and unique string identifying the IAM role"},"launch_template_arn":{"expression":{"references":["aws_launch_template.this[0].arn","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The ARN of the launch template"},"launch_template_id":{"expression":{"references":["aws_launch_template.this[0].id","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The ID of the launch template"},"launch_template_latest_version":{"expression":{"references":["aws_launch_template.this[0].latest_version","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The latest version of the launch template"},"node_group_arn":{"expression":{"references":["aws_eks_node_group.this[0].arn","aws_eks_node_group.this[0]","aws_eks_node_group.this"]},"description":"Amazon Resource Name (ARN) of the EKS Node Group"},"node_group_autoscaling_group_names":{"expression":{"references":["aws_eks_node_group.this[0].resources","aws_eks_node_group.this[0]","aws_eks_node_group.this"]},"description":"List of the autoscaling group names"},"node_group_id":{"expression":{"references":["aws_eks_node_group.this[0].id","aws_eks_node_group.this[0]","aws_eks_node_group.this"]},"description":"EKS Cluster name and EKS Node Group name separated by a colon (`:`)"},"node_group_resources":{"expression":{"references":["aws_eks_node_group.this[0].resources","aws_eks_node_group.this[0]","aws_eks_node_group.this"]},"description":"List of objects containing information about underlying resources"},"node_group_status":{"expression":{"references":["aws_eks_node_group.this[0].arn","aws_eks_node_group.this[0]","aws_eks_node_group.this"]},"description":"Status of the EKS Node Group"},"security_group_arn":{"expression":{"references":["aws_security_group.this[0].arn","aws_security_group.this[0]","aws_security_group.this"]},"description":"Amazon Resource Name (ARN) of the security group"},"security_group_id":{"expression":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"description":"ID of the security group"}},"resources":[{"address":"aws_eks_node_group.this","mode":"managed","type":"aws_eks_node_group","name":"this","provider_config_key":"aws","expressions":{"ami_type":{"references":["var.ami_id","var.ami_type"]},"capacity_type":{"references":["var.capacity_type"]},"cluster_name":{"references":["var.cluster_name"]},"disk_size":{"references":["local.use_custom_launch_template","var.disk_size"]},"force_update_version":{"references":["var.force_update_version"]},"instance_types":{"references":["var.instance_types"]},"labels":{"references":["var.labels"]},"node_group_name":{"references":["var.use_name_prefix","var.name"]},"node_group_name_prefix":{"references":["var.use_name_prefix","var.name"]},"node_role_arn":{"references":["var.create_iam_role","aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this","var.iam_role_arn"]},"release_version":{"references":["var.ami_id","var.ami_release_version"]},"scaling_config":[{"desired_size":{"references":["var.desired_size"]},"max_size":{"references":["var.max_size"]},"min_size":{"references":["var.min_size"]}}],"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["var.tags","var.name"]},"timeouts":{"create":{"references":["var.timeouts"]},"delete":{"references":["var.timeouts"]},"update":{"references":["var.timeouts"]}},"version":{"references":["var.ami_id","var.cluster_version"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy[0].json","data.aws_iam_policy_document.assume_role_policy[0]","data.aws_iam_policy_document.assume_role_policy"]},"description":{"references":["var.iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_role"]}},{"address":"aws_iam_role_policy_attachment.this","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_iam_role","local.iam_role_policy_prefix","local.iam_role_policy_prefix","var.iam_role_attach_cni_policy","local.cni_policy","var.iam_role_additional_policies"]}},{"address":"aws_launch_template.this","mode":"managed","type":"aws_launch_template","name":"this","provider_config_key":"aws","expressions":{"default_version":{"references":["var.launch_template_default_version"]},"description":{"references":["var.launch_template_description"]},"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"image_id":{"references":["var.ami_id"]},"kernel_id":{"references":["var.kernel_id"]},"key_name":{"references":["var.key_name"]},"name":{"references":["var.launch_template_use_name_prefix","local.launch_template_name_int"]},"name_prefix":{"references":["var.launch_template_use_name_prefix","local.launch_template_name_int"]},"ram_disk_id":{"references":["var.ram_disk_id"]},"tags":{"references":["var.tags"]},"update_default_version":{"references":["var.update_launch_template_default_version"]},"user_data":{"references":["module.user_data.user_data","module.user_data"]},"vpc_security_group_ids":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this","var.cluster_primary_security_group_id","var.vpc_security_group_ids"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_launch_template"]},"depends_on":["aws_security_group_rule.this","aws_iam_role_policy_attachment.this"]},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["var.security_group_description"]},"name":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"name_prefix":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"tags":{"references":["var.tags","local.security_group_name","var.security_group_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_security_group"]}},{"address":"aws_security_group_rule.this","mode":"managed","type":"aws_security_group_rule","name":"this","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"ipv6_cidr_blocks":{"references":["each.value.ipv6_cidr_blocks","each.value"]},"prefix_list_ids":{"references":["each.value.prefix_list_ids","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"self":{"references":["each.value.self","each.value"]},"source_security_group_id":{"references":["each.value.source_security_group_id","each.value","each.value.source_cluster_security_group","each.value","var.cluster_security_group_id"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["var.security_group_rules","local.create_security_group"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["data.aws_partition.current.dns_suffix","data.aws_partition.current"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSNodeAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_role"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"user_data":{"source":"../_user_data","expressions":{"bootstrap_extra_args":{"references":["var.bootstrap_extra_args"]},"cluster_auth_base64":{"references":["var.cluster_auth_base64"]},"cluster_endpoint":{"references":["var.cluster_endpoint"]},"cluster_name":{"references":["var.cluster_name"]},"cluster_service_ipv4_cidr":{"references":["var.cluster_service_ipv4_cidr"]},"create":{"references":["var.create"]},"enable_bootstrap_user_data":{"references":["var.enable_bootstrap_user_data"]},"platform":{"references":["var.platform"]},"post_bootstrap_user_data":{"references":["var.post_bootstrap_user_data"]},"pre_bootstrap_user_data":{"references":["var.pre_bootstrap_user_data"]},"user_data_template_path":{"references":["var.user_data_template_path"]}},"module":{"outputs":{"user_data":{"expression":{"references":["local.platform","var.platform"]},"description":"Base64 encoded user data rendered for the provided inputs"}},"resources":[{"address":"data.cloudinit_config.linux_eks_managed_node_group","mode":"data","type":"cloudinit_config","name":"linux_eks_managed_node_group","provider_config_key":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.module.user_data:cloudinit","expressions":{"base64_encode":{"constant_value":true},"boundary":{"constant_value":"//"},"gzip":{"constant_value":false},"part":[{"content":{"references":["var.pre_bootstrap_user_data"]},"content_type":{"constant_value":"text/x-shellscript"}}]},"schema_version":0,"count_expression":{"references":["var.create","var.platform","var.is_eks_managed_node_group","var.enable_bootstrap_user_data","var.pre_bootstrap_user_data","var.user_data_template_path"]}}],"variables":{"bootstrap_extra_args":{"default":"","description":"Additional arguments passed to the bootstrap script. When `platform` = `bottlerocket`; these are additional [settings](https://github.com/bottlerocket-os/bottlerocket#settings) that are provided to the Bottlerocket user data"},"cluster_auth_base64":{"default":"","description":"Base64 encoded CA of associated EKS cluster"},"cluster_endpoint":{"default":"","description":"Endpoint of associated EKS cluster"},"cluster_name":{"default":"","description":"Name of the EKS cluster"},"cluster_service_ipv4_cidr":{"default":null,"description":"The CIDR block to assign Kubernetes service IP addresses from. If you don't specify a block, Kubernetes assigns addresses from either the 10.100.0.0/16 or 172.20.0.0/16 CIDR blocks"},"create":{"default":true,"description":"Determines whether to create user-data or not"},"enable_bootstrap_user_data":{"default":false,"description":"Determines whether the bootstrap configurations are populated within the user data template"},"is_eks_managed_node_group":{"default":true,"description":"Determines whether the user data is used on nodes in an EKS managed node group. Used to determine if user data will be appended or not"},"platform":{"default":"linux","description":"Identifies if the OS platform is `bottlerocket`, `linux`, or `windows` based"},"post_bootstrap_user_data":{"default":"","description":"User data that is appended to the user data script after of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"pre_bootstrap_user_data":{"default":"","description":"User data that is injected into the user data script ahead of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"user_data_template_path":{"default":"","description":"Path to a local, custom user data template file to use when rendering user data"}}}}},"variables":{"ami_id":{"default":"","description":"The AMI from which to launch the instance. If not supplied, EKS will use its own default image"},"ami_release_version":{"default":null,"description":"AMI version of the EKS Node Group. Defaults to latest version for Kubernetes version"},"ami_type":{"default":null,"description":"Type of Amazon Machine Image (AMI) associated with the EKS Node Group. Valid values are `AL2_x86_64`, `AL2_x86_64_GPU`, `AL2_ARM_64`, `CUSTOM`, `BOTTLEROCKET_ARM_64`, `BOTTLEROCKET_x86_64`"},"block_device_mappings":{"default":{},"description":"Specify volumes to attach to the instance besides the volumes specified by the AMI"},"bootstrap_extra_args":{"default":"","description":"Additional arguments passed to the bootstrap script. When `platform` = `bottlerocket`; these are additional [settings](https://github.com/bottlerocket-os/bottlerocket#settings) that are provided to the Bottlerocket user data"},"capacity_reservation_specification":{"default":null,"description":"Targeting for EC2 capacity reservations"},"capacity_type":{"default":"ON_DEMAND","description":"Type of capacity associated with the EKS Node Group. Valid values: `ON_DEMAND`, `SPOT`"},"cluster_auth_base64":{"default":"","description":"Base64 encoded CA of associated EKS cluster"},"cluster_endpoint":{"default":"","description":"Endpoint of associated EKS cluster"},"cluster_ip_family":{"default":null,"description":"The IP family used to assign Kubernetes pod and service addresses. Valid values are `ipv4` (default) and `ipv6`"},"cluster_name":{"default":null,"description":"Name of associated EKS cluster"},"cluster_primary_security_group_id":{"default":null,"description":"The ID of the EKS cluster primary security group to associate with the instance(s). This is the security group that is automatically created by the EKS service"},"cluster_security_group_id":{"default":null,"description":"Cluster control plane security group ID"},"cluster_service_ipv4_cidr":{"default":null,"description":"The CIDR block to assign Kubernetes service IP addresses from. If you don't specify a block, Kubernetes assigns addresses from either the 10.100.0.0/16 or 172.20.0.0/16 CIDR blocks"},"cluster_version":{"default":null,"description":"Kubernetes version. Defaults to EKS Cluster Kubernetes version"},"cpu_options":{"default":null,"description":"The CPU options for the instance"},"create":{"default":true,"description":"Determines whether to create EKS managed node group or not"},"create_iam_role":{"default":true,"description":"Determines whether an IAM role is created or to use an existing IAM role"},"create_launch_template":{"default":true,"description":"Determines whether to create a launch template or not. If set to `false`, EKS will use its own default launch template"},"create_security_group":{"default":true,"description":"Determines whether to create a security group"},"credit_specification":{"default":null,"description":"Customize the credit specification of the instance"},"desired_size":{"default":1,"description":"Desired number of instances/nodes"},"disable_api_termination":{"default":null,"description":"If true, enables EC2 instance termination protection"},"disk_size":{"default":null,"description":"Disk size in GiB for nodes. Defaults to `20`"},"ebs_optimized":{"default":null,"description":"If true, the launched EC2 instance(s) will be EBS-optimized"},"elastic_gpu_specifications":{"default":null,"description":"The elastic GPU to attach to the instance"},"elastic_inference_accelerator":{"default":null,"description":"Configuration block containing an Elastic Inference Accelerator to attach to the instance"},"enable_bootstrap_user_data":{"default":false,"description":"Determines whether the bootstrap configurations are populated within the user data template"},"enable_monitoring":{"default":true,"description":"Enables/disables detailed monitoring"},"enclave_options":{"default":null,"description":"Enable Nitro Enclaves on launched instances"},"force_update_version":{"default":null,"description":"Force version update if existing pods are unable to be drained due to a pod disruption budget issue"},"iam_role_additional_policies":{"default":[],"description":"Additional policies to be added to the IAM role"},"iam_role_arn":{"default":null,"description":"Existing IAM role ARN for the node group. Required if `create_iam_role` is set to `false`"},"iam_role_attach_cni_policy":{"default":true,"description":"Whether to attach the `AmazonEKS_CNI_Policy`/`AmazonEKS_CNI_IPv6_Policy` IAM policy to the IAM IAM role. WARNING: If set `false` the permissions must be assigned to the `aws-node` DaemonSet pods via another method or nodes will not be able to join the cluster"},"iam_role_description":{"default":null,"description":"Description of the role"},"iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"iam_role_use_name_prefix":{"default":"true","description":"Determines whether the IAM role name (`iam_role_name`) is used as a prefix"},"instance_market_options":{"default":null,"description":"The market (purchasing) option for the instance"},"instance_types":{"default":null,"description":"Set of instance types associated with the EKS Node Group. Defaults to `[\"t3.medium\"]`"},"kernel_id":{"default":null,"description":"The kernel ID"},"key_name":{"default":null,"description":"The key name that should be used for the instance(s)"},"labels":{"default":null,"description":"Key-value map of Kubernetes labels. Only labels that are applied with the EKS API are managed by this argument. Other Kubernetes labels applied to the EKS Node Group will not be managed"},"launch_template_default_version":{"default":null,"description":"Default version of the launch template"},"launch_template_description":{"default":null,"description":"Description of the launch template"},"launch_template_name":{"default":"","description":"Launch template name - either to be created (`var.create_launch_template` = `true`) or existing (`var.create_launch_template` = `false`)"},"launch_template_tags":{"default":{},"description":"A map of additional tags to add to the tag_specifications of launch template created"},"launch_template_use_name_prefix":{"default":true,"description":"Determines whether to use `launch_template_name` as is or create a unique name beginning with the `launch_template_name` as the prefix"},"launch_template_version":{"default":null,"description":"Launch template version number. The default is `$Default`"},"license_specifications":{"default":null,"description":"A list of license specifications to associate with"},"max_size":{"default":3,"description":"Maximum number of instances/nodes"},"metadata_options":{"default":{"http_endpoint":"enabled","http_put_response_hop_limit":"2","http_tokens":"required"},"description":"Customize the metadata options for the instance"},"min_size":{"default":0,"description":"Minimum number of instances/nodes"},"name":{"default":"","description":"Name of the EKS managed node group"},"network_interfaces":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"placement":{"default":null,"description":"The placement of the instance"},"platform":{"default":"linux","description":"Identifies if the OS platform is `bottlerocket` or `linux` based; `windows` is not supported"},"post_bootstrap_user_data":{"default":"","description":"User data that is appended to the user data script after of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"pre_bootstrap_user_data":{"default":"","description":"User data that is injected into the user data script ahead of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"ram_disk_id":{"default":null,"description":"The ID of the ram disk"},"remote_access":{"default":{},"description":"Configuration block with remote access settings"},"security_group_description":{"default":"EKS managed node group security group","description":"Description for the security group created"},"security_group_name":{"default":null,"description":"Name to use on security group created"},"security_group_rules":{"default":{},"description":"List of security group rules to add to the security group created"},"security_group_tags":{"default":{},"description":"A map of additional tags to add to the security group created"},"security_group_use_name_prefix":{"default":"true","description":"Determines whether the security group name (`security_group_name`) is used as a prefix"},"subnet_ids":{"default":null,"description":"Identifiers of EC2 Subnets to associate with the EKS Node Group. These subnets must have the following resource tag: `kubernetes.io/cluster/CLUSTER_NAME`"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"taints":{"default":{},"description":"The Kubernetes taints to be applied to the nodes in the node group. Maximum of 50 taints per node group"},"timeouts":{"default":{},"description":"Create, update, and delete timeout configurations for the node group"},"update_config":{"default":{},"description":"Configuration block of settings for max unavailable resources during node group updates"},"update_launch_template_default_version":{"default":true,"description":"Whether to update the launch templates default version on each update. Conflicts with `launch_template_default_version`"},"use_name_prefix":{"default":true,"description":"Determines whether to use `name` as is or create a unique name beginning with the `name` as the prefix"},"user_data_template_path":{"default":"","description":"Path to a local, custom user data template file to use when rendering user data"},"vpc_id":{"default":null,"description":"ID of the VPC where the security group/nodes will be provisioned"},"vpc_security_group_ids":{"default":[],"description":"A list of security group IDs to associate"}}}},"fargate_profile":{"source":"./modules/fargate-profile","expressions":{"cluster_ip_family":{"references":["var.cluster_ip_family"]},"cluster_name":{"references":["aws_eks_cluster.this[0].name","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"create":{"references":["each.value.create","each.value"]},"create_iam_role":{"references":["each.value.create_iam_role","each.value","var.fargate_profile_defaults.create_iam_role","var.fargate_profile_defaults"]},"iam_role_additional_policies":{"references":["each.value.iam_role_additional_policies","each.value","var.fargate_profile_defaults.iam_role_additional_policies","var.fargate_profile_defaults"]},"iam_role_arn":{"references":["each.value.iam_role_arn","each.value","var.fargate_profile_defaults.iam_role_arn","var.fargate_profile_defaults"]},"iam_role_attach_cni_policy":{"references":["each.value.iam_role_attach_cni_policy","each.value","var.fargate_profile_defaults.iam_role_attach_cni_policy","var.fargate_profile_defaults"]},"iam_role_description":{"references":["each.value.iam_role_description","each.value","var.fargate_profile_defaults.iam_role_description","var.fargate_profile_defaults"]},"iam_role_name":{"references":["each.value.iam_role_name","each.value","var.fargate_profile_defaults.iam_role_name","var.fargate_profile_defaults"]},"iam_role_path":{"references":["each.value.iam_role_path","each.value","var.fargate_profile_defaults.iam_role_path","var.fargate_profile_defaults"]},"iam_role_permissions_boundary":{"references":["each.value.iam_role_permissions_boundary","each.value","var.fargate_profile_defaults.iam_role_permissions_boundary","var.fargate_profile_defaults"]},"iam_role_tags":{"references":["each.value.iam_role_tags","each.value","var.fargate_profile_defaults.iam_role_tags","var.fargate_profile_defaults"]},"iam_role_use_name_prefix":{"references":["each.value.iam_role_use_name_prefix","each.value","var.fargate_profile_defaults.iam_role_use_name_prefix","var.fargate_profile_defaults"]},"name":{"references":["each.value.name","each.value","each.key"]},"selectors":{"references":["each.value.selectors","each.value","var.fargate_profile_defaults.selectors","var.fargate_profile_defaults"]},"subnet_ids":{"references":["each.value.subnet_ids","each.value","var.fargate_profile_defaults.subnet_ids","var.fargate_profile_defaults","var.subnet_ids"]},"tags":{"references":["var.tags","each.value.tags","each.value","var.fargate_profile_defaults.tags","var.fargate_profile_defaults"]},"timeouts":{"references":["each.value.timeouts","each.value","var.fargate_profile_defaults.timeouts","var.fargate_profile_defaults"]}},"for_each_expression":{"references":["var.fargate_profiles","var.create"]},"module":{"outputs":{"fargate_profile_arn":{"expression":{"references":["aws_eks_fargate_profile.this[0].arn","aws_eks_fargate_profile.this[0]","aws_eks_fargate_profile.this"]},"description":"Amazon Resource Name (ARN) of the EKS Fargate Profile"},"fargate_profile_id":{"expression":{"references":["aws_eks_fargate_profile.this[0].id","aws_eks_fargate_profile.this[0]","aws_eks_fargate_profile.this"]},"description":"EKS Cluster name and EKS Fargate Profile name separated by a colon (`:`)"},"fargate_profile_pod_execution_role_arn":{"expression":{"references":["aws_eks_fargate_profile.this[0].pod_execution_role_arn","aws_eks_fargate_profile.this[0]","aws_eks_fargate_profile.this"]},"description":"Amazon Resource Name (ARN) of the EKS Fargate Profile Pod execution role ARN"},"fargate_profile_status":{"expression":{"references":["aws_eks_fargate_profile.this[0].status","aws_eks_fargate_profile.this[0]","aws_eks_fargate_profile.this"]},"description":"Status of the EKS Fargate Profile"},"iam_role_arn":{"expression":{"references":["aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this","var.iam_role_arn"]},"description":"The Amazon Resource Name (ARN) specifying the IAM role"},"iam_role_name":{"expression":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"The name of the IAM role"},"iam_role_unique_id":{"expression":{"references":["aws_iam_role.this[0].unique_id","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"Stable and unique string identifying the IAM role"}},"resources":[{"address":"aws_eks_fargate_profile.this","mode":"managed","type":"aws_eks_fargate_profile","name":"this","provider_config_key":"aws","expressions":{"cluster_name":{"references":["var.cluster_name"]},"fargate_profile_name":{"references":["var.name"]},"pod_execution_role_arn":{"references":["var.create_iam_role","aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this","var.iam_role_arn"]},"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy[0].json","data.aws_iam_policy_document.assume_role_policy[0]","data.aws_iam_policy_document.assume_role_policy"]},"description":{"references":["var.iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_role"]}},{"address":"aws_iam_role_policy_attachment.this","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_iam_role","local.iam_role_policy_prefix","var.iam_role_attach_cni_policy","local.cni_policy","var.iam_role_additional_policies"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["eks-fargate-pods.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_role"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"cluster_ip_family":{"default":null,"description":"The IP family used to assign Kubernetes pod and service addresses. Valid values are `ipv4` (default) and `ipv6`"},"cluster_name":{"default":null,"description":"Name of the EKS cluster"},"create":{"default":true,"description":"Determines whether to create Fargate profile or not"},"create_iam_role":{"default":true,"description":"Determines whether an IAM role is created or to use an existing IAM role"},"iam_role_additional_policies":{"default":[],"description":"Additional policies to be added to the IAM role"},"iam_role_arn":{"default":null,"description":"Existing IAM role ARN for the Fargate profile. Required if `create_iam_role` is set to `false`"},"iam_role_attach_cni_policy":{"default":true,"description":"Whether to attach the `AmazonEKS_CNI_Policy`/`AmazonEKS_CNI_IPv6_Policy` IAM policy to the IAM IAM role. WARNING: If set `false` the permissions must be assigned to the `aws-node` DaemonSet pods via another method or nodes will not be able to join the cluster"},"iam_role_description":{"default":null,"description":"Description of the role"},"iam_role_name":{"default":"","description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"iam_role_use_name_prefix":{"default":"true","description":"Determines whether the IAM role name (`iam_role_name`) is used as a prefix"},"name":{"default":"","description":"Name of the EKS Fargate Profile"},"selectors":{"default":[],"description":"Configuration block(s) for selecting Kubernetes Pods to execute with this Fargate Profile"},"subnet_ids":{"default":[],"description":"A list of subnet IDs for the EKS Fargate Profile"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"timeouts":{"default":{},"description":"Create and delete timeout configurations for the Fargate Profile"}}}},"self_managed_node_group":{"source":"./modules/self-managed-node-group","expressions":{"ami_id":{"references":["each.value.ami_id","each.value","var.self_managed_node_group_defaults.ami_id","var.self_managed_node_group_defaults"]},"availability_zones":{"references":["each.value.availability_zones","each.value","var.self_managed_node_group_defaults.availability_zones","var.self_managed_node_group_defaults"]},"block_device_mappings":{"references":["each.value.block_device_mappings","each.value","var.self_managed_node_group_defaults.block_device_mappings","var.self_managed_node_group_defaults"]},"bootstrap_extra_args":{"references":["each.value.bootstrap_extra_args","each.value","var.self_managed_node_group_defaults.bootstrap_extra_args","var.self_managed_node_group_defaults"]},"capacity_rebalance":{"references":["each.value.capacity_rebalance","each.value","var.self_managed_node_group_defaults.capacity_rebalance","var.self_managed_node_group_defaults"]},"capacity_reservation_specification":{"references":["each.value.capacity_reservation_specification","each.value","var.self_managed_node_group_defaults.capacity_reservation_specification","var.self_managed_node_group_defaults"]},"cluster_auth_base64":{"references":["aws_eks_cluster.this[0].certificate_authority[0].data","aws_eks_cluster.this[0].certificate_authority[0]","aws_eks_cluster.this[0].certificate_authority","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_endpoint":{"references":["aws_eks_cluster.this[0].endpoint","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_ip_family":{"references":["var.cluster_ip_family"]},"cluster_name":{"references":["aws_eks_cluster.this[0].name","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_primary_security_group_id":{"references":["each.value.attach_cluster_primary_security_group","each.value","var.self_managed_node_group_defaults.attach_cluster_primary_security_group","var.self_managed_node_group_defaults","aws_eks_cluster.this[0].vpc_config[0].cluster_security_group_id","aws_eks_cluster.this[0].vpc_config[0]","aws_eks_cluster.this[0].vpc_config","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cluster_security_group_id":{"references":["local.cluster_security_group_id"]},"cluster_version":{"references":["each.value.cluster_version","each.value","var.self_managed_node_group_defaults.cluster_version","var.self_managed_node_group_defaults","aws_eks_cluster.this[0].version","aws_eks_cluster.this[0]","aws_eks_cluster.this"]},"cpu_options":{"references":["each.value.cpu_options","each.value","var.self_managed_node_group_defaults.cpu_options","var.self_managed_node_group_defaults"]},"create":{"references":["each.value.create","each.value"]},"create_iam_instance_profile":{"references":["each.value.create_iam_instance_profile","each.value","var.self_managed_node_group_defaults.create_iam_instance_profile","var.self_managed_node_group_defaults"]},"create_launch_template":{"references":["each.value.create_launch_template","each.value","var.self_managed_node_group_defaults.create_launch_template","var.self_managed_node_group_defaults"]},"create_schedule":{"references":["each.value.create_schedule","each.value","var.self_managed_node_group_defaults.create_schedule","var.self_managed_node_group_defaults"]},"create_security_group":{"references":["each.value.create_security_group","each.value","var.self_managed_node_group_defaults.create_security_group","var.self_managed_node_group_defaults"]},"credit_specification":{"references":["each.value.credit_specification","each.value","var.self_managed_node_group_defaults.credit_specification","var.self_managed_node_group_defaults"]},"default_cooldown":{"references":["each.value.default_cooldown","each.value","var.self_managed_node_group_defaults.default_cooldown","var.self_managed_node_group_defaults"]},"delete_timeout":{"references":["each.value.delete_timeout","each.value","var.self_managed_node_group_defaults.delete_timeout","var.self_managed_node_group_defaults"]},"desired_size":{"references":["each.value.desired_size","each.value","var.self_managed_node_group_defaults.desired_size","var.self_managed_node_group_defaults"]},"disable_api_termination":{"references":["each.value.disable_api_termination","each.value","var.self_managed_node_group_defaults.disable_api_termination","var.self_managed_node_group_defaults"]},"ebs_optimized":{"references":["each.value.ebs_optimized","each.value","var.self_managed_node_group_defaults.ebs_optimized","var.self_managed_node_group_defaults"]},"elastic_gpu_specifications":{"references":["each.value.elastic_gpu_specifications","each.value","var.self_managed_node_group_defaults.elastic_gpu_specifications","var.self_managed_node_group_defaults"]},"elastic_inference_accelerator":{"references":["each.value.elastic_inference_accelerator","each.value","var.self_managed_node_group_defaults.elastic_inference_accelerator","var.self_managed_node_group_defaults"]},"enable_monitoring":{"references":["each.value.enable_monitoring","each.value","var.self_managed_node_group_defaults.enable_monitoring","var.self_managed_node_group_defaults"]},"enabled_metrics":{"references":["each.value.enabled_metrics","each.value","var.self_managed_node_group_defaults.enabled_metrics","var.self_managed_node_group_defaults"]},"enclave_options":{"references":["each.value.enclave_options","each.value","var.self_managed_node_group_defaults.enclave_options","var.self_managed_node_group_defaults"]},"force_delete":{"references":["each.value.force_delete","each.value","var.self_managed_node_group_defaults.force_delete","var.self_managed_node_group_defaults"]},"health_check_grace_period":{"references":["each.value.health_check_grace_period","each.value","var.self_managed_node_group_defaults.health_check_grace_period","var.self_managed_node_group_defaults"]},"health_check_type":{"references":["each.value.health_check_type","each.value","var.self_managed_node_group_defaults.health_check_type","var.self_managed_node_group_defaults"]},"hibernation_options":{"references":["each.value.hibernation_options","each.value","var.self_managed_node_group_defaults.hibernation_options","var.self_managed_node_group_defaults"]},"iam_instance_profile_arn":{"references":["each.value.iam_instance_profile_arn","each.value","var.self_managed_node_group_defaults.iam_instance_profile_arn","var.self_managed_node_group_defaults"]},"iam_role_additional_policies":{"references":["each.value.iam_role_additional_policies","each.value","var.self_managed_node_group_defaults.iam_role_additional_policies","var.self_managed_node_group_defaults"]},"iam_role_attach_cni_policy":{"references":["each.value.iam_role_attach_cni_policy","each.value","var.self_managed_node_group_defaults.iam_role_attach_cni_policy","var.self_managed_node_group_defaults"]},"iam_role_description":{"references":["each.value.iam_role_description","each.value","var.self_managed_node_group_defaults.iam_role_description","var.self_managed_node_group_defaults"]},"iam_role_name":{"references":["each.value.iam_role_name","each.value","var.self_managed_node_group_defaults.iam_role_name","var.self_managed_node_group_defaults"]},"iam_role_path":{"references":["each.value.iam_role_path","each.value","var.self_managed_node_group_defaults.iam_role_path","var.self_managed_node_group_defaults"]},"iam_role_permissions_boundary":{"references":["each.value.iam_role_permissions_boundary","each.value","var.self_managed_node_group_defaults.iam_role_permissions_boundary","var.self_managed_node_group_defaults"]},"iam_role_tags":{"references":["each.value.iam_role_tags","each.value","var.self_managed_node_group_defaults.iam_role_tags","var.self_managed_node_group_defaults"]},"iam_role_use_name_prefix":{"references":["each.value.iam_role_use_name_prefix","each.value","var.self_managed_node_group_defaults.iam_role_use_name_prefix","var.self_managed_node_group_defaults"]},"initial_lifecycle_hooks":{"references":["each.value.initial_lifecycle_hooks","each.value","var.self_managed_node_group_defaults.initial_lifecycle_hooks","var.self_managed_node_group_defaults"]},"instance_initiated_shutdown_behavior":{"references":["each.value.instance_initiated_shutdown_behavior","each.value","var.self_managed_node_group_defaults.instance_initiated_shutdown_behavior","var.self_managed_node_group_defaults"]},"instance_market_options":{"references":["each.value.instance_market_options","each.value","var.self_managed_node_group_defaults.instance_market_options","var.self_managed_node_group_defaults"]},"instance_refresh":{"references":["each.value.instance_refresh","each.value","var.self_managed_node_group_defaults.instance_refresh","var.self_managed_node_group_defaults"]},"instance_type":{"references":["each.value.instance_type","each.value","var.self_managed_node_group_defaults.instance_type","var.self_managed_node_group_defaults"]},"kernel_id":{"references":["each.value.kernel_id","each.value","var.self_managed_node_group_defaults.kernel_id","var.self_managed_node_group_defaults"]},"key_name":{"references":["each.value.key_name","each.value","var.self_managed_node_group_defaults.key_name","var.self_managed_node_group_defaults"]},"launch_template_default_version":{"references":["each.value.launch_template_default_version","each.value","var.self_managed_node_group_defaults.launch_template_default_version","var.self_managed_node_group_defaults"]},"launch_template_description":{"references":["each.value.launch_template_description","each.value","var.self_managed_node_group_defaults.launch_template_description","var.self_managed_node_group_defaults","each.value.name","each.value","each.key"]},"launch_template_name":{"references":["each.value.launch_template_name","each.value","var.self_managed_node_group_defaults.launch_template_name","var.self_managed_node_group_defaults","each.key"]},"launch_template_tags":{"references":["each.value.launch_template_tags","each.value","var.self_managed_node_group_defaults.launch_template_tags","var.self_managed_node_group_defaults"]},"launch_template_use_name_prefix":{"references":["each.value.launch_template_use_name_prefix","each.value","var.self_managed_node_group_defaults.launch_template_use_name_prefix","var.self_managed_node_group_defaults"]},"launch_template_version":{"references":["each.value.launch_template_version","each.value","var.self_managed_node_group_defaults.launch_template_version","var.self_managed_node_group_defaults"]},"license_specifications":{"references":["each.value.license_specifications","each.value","var.self_managed_node_group_defaults.license_specifications","var.self_managed_node_group_defaults"]},"max_instance_lifetime":{"references":["each.value.max_instance_lifetime","each.value","var.self_managed_node_group_defaults.max_instance_lifetime","var.self_managed_node_group_defaults"]},"max_size":{"references":["each.value.max_size","each.value","var.self_managed_node_group_defaults.max_size","var.self_managed_node_group_defaults"]},"metadata_options":{"references":["each.value.metadata_options","each.value","var.self_managed_node_group_defaults.metadata_options","var.self_managed_node_group_defaults","local.metadata_options"]},"metrics_granularity":{"references":["each.value.metrics_granularity","each.value","var.self_managed_node_group_defaults.metrics_granularity","var.self_managed_node_group_defaults"]},"min_elb_capacity":{"references":["each.value.min_elb_capacity","each.value","var.self_managed_node_group_defaults.min_elb_capacity","var.self_managed_node_group_defaults"]},"min_size":{"references":["each.value.min_size","each.value","var.self_managed_node_group_defaults.min_size","var.self_managed_node_group_defaults"]},"mixed_instances_policy":{"references":["each.value.mixed_instances_policy","each.value","var.self_managed_node_group_defaults.mixed_instances_policy","var.self_managed_node_group_defaults"]},"name":{"references":["each.value.name","each.value","each.key"]},"network_interfaces":{"references":["each.value.network_interfaces","each.value","var.self_managed_node_group_defaults.network_interfaces","var.self_managed_node_group_defaults"]},"placement":{"references":["each.value.placement","each.value","var.self_managed_node_group_defaults.placement","var.self_managed_node_group_defaults"]},"placement_group":{"references":["each.value.placement_group","each.value","var.self_managed_node_group_defaults.placement_group","var.self_managed_node_group_defaults"]},"platform":{"references":["each.value.platform","each.value","var.self_managed_node_group_defaults.platform","var.self_managed_node_group_defaults"]},"post_bootstrap_user_data":{"references":["each.value.post_bootstrap_user_data","each.value","var.self_managed_node_group_defaults.post_bootstrap_user_data","var.self_managed_node_group_defaults"]},"pre_bootstrap_user_data":{"references":["each.value.pre_bootstrap_user_data","each.value","var.self_managed_node_group_defaults.pre_bootstrap_user_data","var.self_managed_node_group_defaults"]},"protect_from_scale_in":{"references":["each.value.protect_from_scale_in","each.value","var.self_managed_node_group_defaults.protect_from_scale_in","var.self_managed_node_group_defaults"]},"ram_disk_id":{"references":["each.value.ram_disk_id","each.value","var.self_managed_node_group_defaults.ram_disk_id","var.self_managed_node_group_defaults"]},"schedules":{"references":["each.value.schedules","each.value","var.self_managed_node_group_defaults.schedules","var.self_managed_node_group_defaults"]},"security_group_description":{"references":["each.value.security_group_description","each.value","var.self_managed_node_group_defaults.security_group_description","var.self_managed_node_group_defaults"]},"security_group_name":{"references":["each.value.security_group_name","each.value","var.self_managed_node_group_defaults.security_group_name","var.self_managed_node_group_defaults"]},"security_group_rules":{"references":["each.value.security_group_rules","each.value","var.self_managed_node_group_defaults.security_group_rules","var.self_managed_node_group_defaults"]},"security_group_tags":{"references":["each.value.security_group_tags","each.value","var.self_managed_node_group_defaults.security_group_tags","var.self_managed_node_group_defaults"]},"security_group_use_name_prefix":{"references":["each.value.security_group_use_name_prefix","each.value","var.self_managed_node_group_defaults.security_group_use_name_prefix","var.self_managed_node_group_defaults"]},"service_linked_role_arn":{"references":["each.value.service_linked_role_arn","each.value","var.self_managed_node_group_defaults.service_linked_role_arn","var.self_managed_node_group_defaults"]},"subnet_ids":{"references":["each.value.subnet_ids","each.value","var.self_managed_node_group_defaults.subnet_ids","var.self_managed_node_group_defaults","var.subnet_ids"]},"suspended_processes":{"references":["each.value.suspended_processes","each.value","var.self_managed_node_group_defaults.suspended_processes","var.self_managed_node_group_defaults"]},"tags":{"references":["var.tags","each.value.tags","each.value","var.self_managed_node_group_defaults.tags","var.self_managed_node_group_defaults"]},"target_group_arns":{"references":["each.value.target_group_arns","each.value","var.self_managed_node_group_defaults.target_group_arns","var.self_managed_node_group_defaults"]},"termination_policies":{"references":["each.value.termination_policies","each.value","var.self_managed_node_group_defaults.termination_policies","var.self_managed_node_group_defaults"]},"update_launch_template_default_version":{"references":["each.value.update_launch_template_default_version","each.value","var.self_managed_node_group_defaults.update_launch_template_default_version","var.self_managed_node_group_defaults"]},"use_default_tags":{"references":["each.value.use_default_tags","each.value","var.self_managed_node_group_defaults.use_default_tags","var.self_managed_node_group_defaults"]},"use_mixed_instances_policy":{"references":["each.value.use_mixed_instances_policy","each.value","var.self_managed_node_group_defaults.use_mixed_instances_policy","var.self_managed_node_group_defaults"]},"use_name_prefix":{"references":["each.value.use_name_prefix","each.value","var.self_managed_node_group_defaults.use_name_prefix","var.self_managed_node_group_defaults"]},"user_data_template_path":{"references":["each.value.user_data_template_path","each.value","var.self_managed_node_group_defaults.user_data_template_path","var.self_managed_node_group_defaults"]},"vpc_id":{"references":["each.value.vpc_id","each.value","var.self_managed_node_group_defaults.vpc_id","var.self_managed_node_group_defaults","var.vpc_id"]},"vpc_security_group_ids":{"references":["local.node_security_group_id","each.value.vpc_security_group_ids","each.value","var.self_managed_node_group_defaults.vpc_security_group_ids","var.self_managed_node_group_defaults"]},"wait_for_capacity_timeout":{"references":["each.value.wait_for_capacity_timeout","each.value","var.self_managed_node_group_defaults.wait_for_capacity_timeout","var.self_managed_node_group_defaults"]},"wait_for_elb_capacity":{"references":["each.value.wait_for_elb_capacity","each.value","var.self_managed_node_group_defaults.wait_for_elb_capacity","var.self_managed_node_group_defaults"]},"warm_pool":{"references":["each.value.warm_pool","each.value","var.self_managed_node_group_defaults.warm_pool","var.self_managed_node_group_defaults"]}},"for_each_expression":{"references":["var.self_managed_node_groups","var.create"]},"module":{"outputs":{"autoscaling_group_arn":{"expression":{"references":["aws_autoscaling_group.this[0].arn","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The ARN for this autoscaling group"},"autoscaling_group_availability_zones":{"expression":{"references":["aws_autoscaling_group.this[0].availability_zones","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The availability zones of the autoscaling group"},"autoscaling_group_default_cooldown":{"expression":{"references":["aws_autoscaling_group.this[0].default_cooldown","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"Time between a scaling activity and the succeeding scaling activity"},"autoscaling_group_desired_capacity":{"expression":{"references":["aws_autoscaling_group.this[0].desired_capacity","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The number of Amazon EC2 instances that should be running in the group"},"autoscaling_group_health_check_grace_period":{"expression":{"references":["aws_autoscaling_group.this[0].health_check_grace_period","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"Time after instance comes into service before checking health"},"autoscaling_group_health_check_type":{"expression":{"references":["aws_autoscaling_group.this[0].health_check_type","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"EC2 or ELB. Controls how health checking is done"},"autoscaling_group_id":{"expression":{"references":["aws_autoscaling_group.this[0].id","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The autoscaling group id"},"autoscaling_group_max_size":{"expression":{"references":["aws_autoscaling_group.this[0].max_size","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The maximum size of the autoscaling group"},"autoscaling_group_min_size":{"expression":{"references":["aws_autoscaling_group.this[0].min_size","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The minimum size of the autoscaling group"},"autoscaling_group_name":{"expression":{"references":["aws_autoscaling_group.this[0].name","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The autoscaling group name"},"autoscaling_group_schedule_arns":{"expression":{"references":["aws_autoscaling_schedule.this"]},"description":"ARNs of autoscaling group schedules"},"autoscaling_group_vpc_zone_identifier":{"expression":{"references":["aws_autoscaling_group.this[0].vpc_zone_identifier","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"description":"The VPC zone identifier"},"iam_instance_profile_arn":{"expression":{"references":["aws_iam_instance_profile.this[0].arn","aws_iam_instance_profile.this[0]","aws_iam_instance_profile.this","var.iam_instance_profile_arn"]},"description":"ARN assigned by AWS to the instance profile"},"iam_instance_profile_id":{"expression":{"references":["aws_iam_instance_profile.this[0].id","aws_iam_instance_profile.this[0]","aws_iam_instance_profile.this"]},"description":"Instance profile's ID"},"iam_instance_profile_unique":{"expression":{"references":["aws_iam_instance_profile.this[0].unique_id","aws_iam_instance_profile.this[0]","aws_iam_instance_profile.this"]},"description":"Stable and unique string identifying the IAM instance profile"},"iam_role_arn":{"expression":{"references":["aws_iam_role.this[0].arn","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"The Amazon Resource Name (ARN) specifying the IAM role"},"iam_role_name":{"expression":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"The name of the IAM role"},"iam_role_unique_id":{"expression":{"references":["aws_iam_role.this[0].unique_id","aws_iam_role.this[0]","aws_iam_role.this"]},"description":"Stable and unique string identifying the IAM role"},"launch_template_arn":{"expression":{"references":["aws_launch_template.this[0].arn","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The ARN of the launch template"},"launch_template_id":{"expression":{"references":["aws_launch_template.this[0].id","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The ID of the launch template"},"launch_template_latest_version":{"expression":{"references":["aws_launch_template.this[0].latest_version","aws_launch_template.this[0]","aws_launch_template.this"]},"description":"The latest version of the launch template"},"platform":{"expression":{"references":["var.platform"]},"description":"Identifies if the OS platform is `bottlerocket`, `linux`, or `windows` based"},"security_group_arn":{"expression":{"references":["aws_security_group.this[0].arn","aws_security_group.this[0]","aws_security_group.this"]},"description":"Amazon Resource Name (ARN) of the security group"},"security_group_id":{"expression":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"description":"ID of the security group"}},"resources":[{"address":"aws_autoscaling_group.this","mode":"managed","type":"aws_autoscaling_group","name":"this","provider_config_key":"aws","expressions":{"availability_zones":{"references":["var.availability_zones"]},"capacity_rebalance":{"references":["var.capacity_rebalance"]},"default_cooldown":{"references":["var.default_cooldown"]},"desired_capacity":{"references":["var.desired_size"]},"enabled_metrics":{"references":["var.enabled_metrics"]},"force_delete":{"references":["var.force_delete"]},"health_check_grace_period":{"references":["var.health_check_grace_period"]},"health_check_type":{"references":["var.health_check_type"]},"max_instance_lifetime":{"references":["var.max_instance_lifetime"]},"max_size":{"references":["var.max_size"]},"metrics_granularity":{"references":["var.metrics_granularity"]},"min_elb_capacity":{"references":["var.min_elb_capacity"]},"min_size":{"references":["var.min_size"]},"name":{"references":["var.use_name_prefix","var.name"]},"name_prefix":{"references":["var.use_name_prefix","var.name"]},"placement_group":{"references":["var.placement_group"]},"protect_from_scale_in":{"references":["var.protect_from_scale_in"]},"service_linked_role_arn":{"references":["var.service_linked_role_arn"]},"suspended_processes":{"references":["var.suspended_processes"]},"target_group_arns":{"references":["var.target_group_arns"]},"termination_policies":{"references":["var.termination_policies"]},"timeouts":{"delete":{"references":["var.delete_timeout"]}},"vpc_zone_identifier":{"references":["var.subnet_ids"]},"wait_for_capacity_timeout":{"references":["var.wait_for_capacity_timeout"]},"wait_for_elb_capacity":{"references":["var.wait_for_elb_capacity"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"aws_autoscaling_schedule.this","mode":"managed","type":"aws_autoscaling_schedule","name":"this","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["aws_autoscaling_group.this[0].name","aws_autoscaling_group.this[0]","aws_autoscaling_group.this"]},"desired_capacity":{"references":["each.value"]},"end_time":{"references":["each.value"]},"max_size":{"references":["each.value"]},"min_size":{"references":["each.value"]},"recurrence":{"references":["each.value"]},"scheduled_action_name":{"references":["each.key"]},"start_time":{"references":["each.value"]},"time_zone":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_schedule","var.schedules"]}},{"address":"aws_iam_instance_profile.this","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"path":{"references":["var.iam_role_path"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_instance_profile"]}},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy[0].json","data.aws_iam_policy_document.assume_role_policy[0]","data.aws_iam_policy_document.assume_role_policy"]},"description":{"references":["var.iam_role_description"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"name_prefix":{"references":["var.iam_role_use_name_prefix","local.iam_role_name"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags","var.iam_role_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_instance_profile"]}},{"address":"aws_iam_role_policy_attachment.this","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value"]},"role":{"references":["aws_iam_role.this[0].name","aws_iam_role.this[0]","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_iam_instance_profile","local.iam_role_policy_prefix","local.iam_role_policy_prefix","var.iam_role_attach_cni_policy","local.cni_policy","var.iam_role_additional_policies"]}},{"address":"aws_launch_template.this","mode":"managed","type":"aws_launch_template","name":"this","provider_config_key":"aws","expressions":{"default_version":{"references":["var.launch_template_default_version"]},"description":{"references":["var.launch_template_description"]},"disable_api_termination":{"references":["var.disable_api_termination"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"iam_instance_profile":[{"arn":{"references":["var.create_iam_instance_profile","aws_iam_instance_profile.this[0].arn","aws_iam_instance_profile.this[0]","aws_iam_instance_profile.this","var.iam_instance_profile_arn"]}}],"image_id":{"references":["var.ami_id","data.aws_ami.eks_default[0].image_id","data.aws_ami.eks_default[0]","data.aws_ami.eks_default"]},"instance_initiated_shutdown_behavior":{"references":["var.instance_initiated_shutdown_behavior"]},"instance_type":{"references":["var.instance_type"]},"kernel_id":{"references":["var.kernel_id"]},"key_name":{"references":["var.key_name"]},"name":{"references":["var.launch_template_use_name_prefix","local.launch_template_name_int"]},"name_prefix":{"references":["var.launch_template_use_name_prefix","local.launch_template_name_int"]},"ram_disk_id":{"references":["var.ram_disk_id"]},"tags":{"references":["var.tags"]},"update_default_version":{"references":["var.update_launch_template_default_version"]},"user_data":{"references":["module.user_data.user_data","module.user_data"]},"vpc_security_group_ids":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this","var.cluster_primary_security_group_id","var.vpc_security_group_ids"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_launch_template"]},"depends_on":["aws_security_group_rule.this","aws_iam_role_policy_attachment.this"]},{"address":"aws_security_group.this","mode":"managed","type":"aws_security_group","name":"this","provider_config_key":"aws","expressions":{"description":{"references":["var.security_group_description"]},"name":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"name_prefix":{"references":["var.security_group_use_name_prefix","local.security_group_name"]},"tags":{"references":["var.tags","local.security_group_name","var.security_group_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_security_group"]}},{"address":"aws_security_group_rule.this","mode":"managed","type":"aws_security_group_rule","name":"this","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"ipv6_cidr_blocks":{"references":["each.value.ipv6_cidr_blocks","each.value"]},"prefix_list_ids":{"references":["each.value.prefix_list_ids","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.this[0].id","aws_security_group.this[0]","aws_security_group.this"]},"self":{"references":["each.value.self","each.value"]},"source_security_group_id":{"references":["each.value.source_security_group_id","each.value","each.value.source_cluster_security_group","each.value","var.cluster_security_group_id"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["var.security_group_rules","local.create_security_group"]}},{"address":"data.aws_ami.eks_default","mode":"data","type":"aws_ami","name":"eks_default","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"references":["var.cluster_version"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_default_tags.current","mode":"data","type":"aws_default_tags","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["data.aws_partition.current.dns_suffix","data.aws_partition.current"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSNodeAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["var.create","var.create_iam_instance_profile"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"user_data":{"source":"../_user_data","expressions":{"bootstrap_extra_args":{"references":["var.bootstrap_extra_args"]},"cluster_auth_base64":{"references":["var.cluster_auth_base64"]},"cluster_endpoint":{"references":["var.cluster_endpoint"]},"cluster_name":{"references":["var.cluster_name"]},"create":{"references":["var.create"]},"enable_bootstrap_user_data":{"constant_value":true},"is_eks_managed_node_group":{"constant_value":false},"platform":{"references":["var.platform"]},"post_bootstrap_user_data":{"references":["var.post_bootstrap_user_data"]},"pre_bootstrap_user_data":{"references":["var.pre_bootstrap_user_data"]},"user_data_template_path":{"references":["var.user_data_template_path"]}},"module":{"outputs":{"user_data":{"expression":{"references":["local.platform","var.platform"]},"description":"Base64 encoded user data rendered for the provided inputs"}},"resources":[{"address":"data.cloudinit_config.linux_eks_managed_node_group","mode":"data","type":"cloudinit_config","name":"linux_eks_managed_node_group","provider_config_key":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.module.user_data:cloudinit","expressions":{"base64_encode":{"constant_value":true},"boundary":{"constant_value":"//"},"gzip":{"constant_value":false},"part":[{"content":{"references":["var.pre_bootstrap_user_data"]},"content_type":{"constant_value":"text/x-shellscript"}}]},"schema_version":0,"count_expression":{"references":["var.create","var.platform","var.is_eks_managed_node_group","var.enable_bootstrap_user_data","var.pre_bootstrap_user_data","var.user_data_template_path"]}}],"variables":{"bootstrap_extra_args":{"default":"","description":"Additional arguments passed to the bootstrap script. When `platform` = `bottlerocket`; these are additional [settings](https://github.com/bottlerocket-os/bottlerocket#settings) that are provided to the Bottlerocket user data"},"cluster_auth_base64":{"default":"","description":"Base64 encoded CA of associated EKS cluster"},"cluster_endpoint":{"default":"","description":"Endpoint of associated EKS cluster"},"cluster_name":{"default":"","description":"Name of the EKS cluster"},"cluster_service_ipv4_cidr":{"default":null,"description":"The CIDR block to assign Kubernetes service IP addresses from. If you don't specify a block, Kubernetes assigns addresses from either the 10.100.0.0/16 or 172.20.0.0/16 CIDR blocks"},"create":{"default":true,"description":"Determines whether to create user-data or not"},"enable_bootstrap_user_data":{"default":false,"description":"Determines whether the bootstrap configurations are populated within the user data template"},"is_eks_managed_node_group":{"default":true,"description":"Determines whether the user data is used on nodes in an EKS managed node group. Used to determine if user data will be appended or not"},"platform":{"default":"linux","description":"Identifies if the OS platform is `bottlerocket`, `linux`, or `windows` based"},"post_bootstrap_user_data":{"default":"","description":"User data that is appended to the user data script after of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"pre_bootstrap_user_data":{"default":"","description":"User data that is injected into the user data script ahead of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"user_data_template_path":{"default":"","description":"Path to a local, custom user data template file to use when rendering user data"}}}}},"variables":{"ami_id":{"default":"","description":"The AMI from which to launch the instance"},"availability_zones":{"default":null,"description":"A list of one or more availability zones for the group. Used for EC2-Classic and default subnets when not specified with `subnet_ids` argument. Conflicts with `subnet_ids`"},"block_device_mappings":{"default":{},"description":"Specify volumes to attach to the instance besides the volumes specified by the AMI"},"bootstrap_extra_args":{"default":"","description":"Additional arguments passed to the bootstrap script. When `platform` = `bottlerocket`; these are additional [settings](https://github.com/bottlerocket-os/bottlerocket#settings) that are provided to the Bottlerocket user data"},"capacity_rebalance":{"default":null,"description":"Indicates whether capacity rebalance is enabled"},"capacity_reservation_specification":{"default":null,"description":"Targeting for EC2 capacity reservations"},"cluster_auth_base64":{"default":"","description":"Base64 encoded CA of associated EKS cluster"},"cluster_endpoint":{"default":"","description":"Endpoint of associated EKS cluster"},"cluster_ip_family":{"default":null,"description":"The IP family used to assign Kubernetes pod and service addresses. Valid values are `ipv4` (default) and `ipv6`"},"cluster_name":{"default":"","description":"Name of associated EKS cluster"},"cluster_primary_security_group_id":{"default":null,"description":"The ID of the EKS cluster primary security group to associate with the instance(s). This is the security group that is automatically created by the EKS service"},"cluster_security_group_id":{"default":null,"description":"Cluster control plane security group ID"},"cluster_version":{"default":null,"description":"Kubernetes cluster version - used to lookup default AMI ID if one is not provided"},"cpu_options":{"default":null,"description":"The CPU options for the instance"},"create":{"default":true,"description":"Determines whether to create self managed node group or not"},"create_iam_instance_profile":{"default":true,"description":"Determines whether an IAM instance profile is created or to use an existing IAM instance profile"},"create_launch_template":{"default":true,"description":"Determines whether to create launch template or not"},"create_schedule":{"default":true,"description":"Determines whether to create autoscaling group schedule or not"},"create_security_group":{"default":true,"description":"Determines whether to create a security group"},"credit_specification":{"default":null,"description":"Customize the credit specification of the instance"},"default_cooldown":{"default":null,"description":"The amount of time, in seconds, after a scaling activity completes before another scaling activity can start"},"delete_timeout":{"default":null,"description":"Delete timeout to wait for destroying autoscaling group"},"desired_size":{"default":1,"description":"The number of Amazon EC2 instances that should be running in the autoscaling group"},"disable_api_termination":{"default":null,"description":"If true, enables EC2 instance termination protection"},"ebs_optimized":{"default":null,"description":"If true, the launched EC2 instance will be EBS-optimized"},"elastic_gpu_specifications":{"default":null,"description":"The elastic GPU to attach to the instance"},"elastic_inference_accelerator":{"default":null,"description":"Configuration block containing an Elastic Inference Accelerator to attach to the instance"},"enable_monitoring":{"default":true,"description":"Enables/disables detailed monitoring"},"enabled_metrics":{"default":null,"description":"A list of metrics to collect. The allowed values are `GroupDesiredCapacity`, `GroupInServiceCapacity`, `GroupPendingCapacity`, `GroupMinSize`, `GroupMaxSize`, `GroupInServiceInstances`, `GroupPendingInstances`, `GroupStandbyInstances`, `GroupStandbyCapacity`, `GroupTerminatingCapacity`, `GroupTerminatingInstances`, `GroupTotalCapacity`, `GroupTotalInstances`"},"enclave_options":{"default":null,"description":"Enable Nitro Enclaves on launched instances"},"force_delete":{"default":null,"description":"Allows deleting the Auto Scaling Group without waiting for all instances in the pool to terminate. You can force an Auto Scaling Group to delete even if it's in the process of scaling a resource. Normally, Terraform drains all the instances before deleting the group. This bypasses that behavior and potentially leaves resources dangling"},"health_check_grace_period":{"default":null,"description":"Time (in seconds) after instance comes into service before checking health"},"health_check_type":{"default":null,"description":"`EC2` or `ELB`. Controls how health checking is done"},"hibernation_options":{"default":null,"description":"The hibernation options for the instance"},"iam_instance_profile_arn":{"default":null,"description":"Amazon Resource Name (ARN) of an existing IAM instance profile that provides permissions for the node group. Required if `create_iam_instance_profile` = `false`"},"iam_role_additional_policies":{"default":[],"description":"Additional policies to be added to the IAM role"},"iam_role_attach_cni_policy":{"default":true,"description":"Whether to attach the `AmazonEKS_CNI_Policy`/`AmazonEKS_CNI_IPv6_Policy` IAM policy to the IAM IAM role. WARNING: If set `false` the permissions must be assigned to the `aws-node` DaemonSet pods via another method or nodes will not be able to join the cluster"},"iam_role_description":{"default":null,"description":"Description of the role"},"iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"iam_role_use_name_prefix":{"default":"true","description":"Determines whether cluster IAM role name (`iam_role_name`) is used as a prefix"},"initial_lifecycle_hooks":{"default":[],"description":"One or more Lifecycle Hooks to attach to the Auto Scaling Group before instances are launched. The syntax is exactly the same as the separate `aws_autoscaling_lifecycle_hook` resource, without the `autoscaling_group_name` attribute. Please note that this will only work when creating a new Auto Scaling Group. For all other use-cases, please use `aws_autoscaling_lifecycle_hook` resource"},"instance_initiated_shutdown_behavior":{"default":null,"description":"Shutdown behavior for the instance. Can be `stop` or `terminate`. (Default: `stop`)"},"instance_market_options":{"default":null,"description":"The market (purchasing) option for the instance"},"instance_refresh":{"default":null,"description":"If this block is configured, start an Instance Refresh when this Auto Scaling Group is updated"},"instance_type":{"default":"","description":"The type of the instance to launch"},"kernel_id":{"default":null,"description":"The kernel ID"},"key_name":{"default":null,"description":"The key name that should be used for the instance"},"launch_template_default_version":{"default":null,"description":"Default Version of the launch template"},"launch_template_description":{"default":null,"description":"Description of the launch template"},"launch_template_name":{"default":null,"description":"Launch template name - either to be created (`var.create_launch_template` = `true`) or existing (`var.create_launch_template` = `false`)"},"launch_template_tags":{"default":{},"description":"A map of additional tags to add to the tag_specifications of launch template created"},"launch_template_use_name_prefix":{"default":true,"description":"Determines whether to use `launch_template_name` as is or create a unique name beginning with the `launch_template_name` as the prefix"},"launch_template_version":{"default":null,"description":"Launch template version. Can be version number, `$Latest`, or `$Default`"},"license_specifications":{"default":null,"description":"A list of license specifications to associate with"},"max_instance_lifetime":{"default":null,"description":"The maximum amount of time, in seconds, that an instance can be in service, values must be either equal to 0 or between 604800 and 31536000 seconds"},"max_size":{"default":3,"description":"The maximum size of the autoscaling group"},"metadata_options":{"default":{"http_endpoint":"enabled","http_put_response_hop_limit":"2","http_tokens":"required"},"description":"Customize the metadata options for the instance"},"metrics_granularity":{"default":null,"description":"The granularity to associate with the metrics to collect. The only valid value is `1Minute`"},"min_elb_capacity":{"default":null,"description":"Setting this causes Terraform to wait for this number of instances to show up healthy in the ELB only on creation. Updates will not wait on ELB instance number changes"},"min_size":{"default":0,"description":"The minimum size of the autoscaling group"},"mixed_instances_policy":{"default":null,"description":"Configuration block containing settings to define launch targets for Auto Scaling groups"},"name":{"default":"","description":"Name of the Self managed Node Group"},"network_interfaces":{"default":[],"description":"Customize network interfaces to be attached at instance boot time"},"placement":{"default":null,"description":"The placement of the instance"},"placement_group":{"default":null,"description":"The name of the placement group into which you'll launch your instances, if any"},"platform":{"default":"linux","description":"Identifies if the OS platform is `bottlerocket`, `linux`, or `windows` based"},"post_bootstrap_user_data":{"default":"","description":"User data that is appended to the user data script after of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"pre_bootstrap_user_data":{"default":"","description":"User data that is injected into the user data script ahead of the EKS bootstrap script. Not used when `platform` = `bottlerocket`"},"protect_from_scale_in":{"default":false,"description":"Allows setting instance protection. The autoscaling group will not select instances with this setting for termination during scale in events."},"ram_disk_id":{"default":null,"description":"The ID of the ram disk"},"schedules":{"default":{},"description":"Map of autoscaling group schedule to create"},"security_group_description":{"default":"EKS self-managed node group security group","description":"Description for the security group created"},"security_group_name":{"default":null,"description":"Name to use on security group created"},"security_group_rules":{"default":{},"description":"List of security group rules to add to the security group created"},"security_group_tags":{"default":{},"description":"A map of additional tags to add to the security group created"},"security_group_use_name_prefix":{"default":"true","description":"Determines whether the security group name (`security_group_name`) is used as a prefix"},"service_linked_role_arn":{"default":null,"description":"The ARN of the service-linked role that the ASG will use to call other AWS services"},"subnet_ids":{"default":null,"description":"A list of subnet IDs to launch resources in. Subnets automatically determine which availability zones the group will reside. Conflicts with `availability_zones`"},"suspended_processes":{"default":null,"description":"A list of processes to suspend for the Auto Scaling Group. The allowed values are `Launch`, `Terminate`, `HealthCheck`, `ReplaceUnhealthy`, `AZRebalance`, `AlarmNotification`, `ScheduledActions`, `AddToLoadBalancer`. Note that if you suspend either the `Launch` or `Terminate` process types, it can prevent your Auto Scaling Group from functioning properly"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"target_group_arns":{"default":[],"description":"A set of `aws_alb_target_group` ARNs, for use with Application or Network Load Balancing"},"termination_policies":{"default":null,"description":"A list of policies to decide how the instances in the Auto Scaling Group should be terminated. The allowed values are `OldestInstance`, `NewestInstance`, `OldestLaunchConfiguration`, `ClosestToNextInstanceHour`, `OldestLaunchTemplate`, `AllocationStrategy`, `Default`"},"update_launch_template_default_version":{"default":true,"description":"Whether to update Default Version each update. Conflicts with `launch_template_default_version`"},"use_default_tags":{"default":false,"description":"Enables/disables the use of provider default tags in the tag_specifications of the Auto Scaling group"},"use_mixed_instances_policy":{"default":false,"description":"Determines whether to use a mixed instances policy in the autoscaling group or not"},"use_name_prefix":{"default":true,"description":"Determines whether to use `name` as is or create a unique name beginning with the `name` as the prefix"},"user_data_template_path":{"default":"","description":"Path to a local, custom user data template file to use when rendering user data"},"vpc_id":{"default":null,"description":"ID of the VPC where the security group/nodes will be provisioned"},"vpc_security_group_ids":{"default":[],"description":"A list of security group IDs to associate"},"wait_for_capacity_timeout":{"default":null,"description":"A maximum duration that Terraform should wait for ASG instances to be healthy before timing out. (See also Waiting for Capacity below.) Setting this to '0' causes Terraform to skip all Capacity Waiting behavior."},"wait_for_elb_capacity":{"default":null,"description":"Setting this will cause Terraform to wait for exactly this number of healthy instances in all attached load balancers on both create and update operations. Takes precedence over `min_elb_capacity` behavior."},"warm_pool":{"default":null,"description":"If this block is configured, add a Warm Pool to the specified Auto Scaling group"}}}}},"variables":{"attach_cluster_encryption_policy":{"default":true,"description":"Indicates whether or not to attach an additional policy for the cluster IAM role to utilize the encryption key provided"},"cloudwatch_log_group_kms_key_id":{"default":null,"description":"If a KMS Key ARN is set, this key will be used to encrypt the corresponding log group. Please be sure that the KMS Key has an appropriate key policy (https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html)"},"cloudwatch_log_group_retention_in_days":{"default":90,"description":"Number of days to retain log events. Default retention - 90 days"},"cluster_additional_security_group_ids":{"default":[],"description":"List of additional, externally created security group IDs to attach to the cluster control plane"},"cluster_addons":{"default":{},"description":"Map of cluster addon configurations to enable for the cluster. Addon name can be the map keys or set with `name`"},"cluster_enabled_log_types":{"default":["audit","api","authenticator"],"description":"A list of the desired control plane logs to enable. For more information, see Amazon EKS Control Plane Logging documentation (https://docs.aws.amazon.com/eks/latest/userguide/control-plane-logs.html)"},"cluster_encryption_config":{"default":[],"description":"Configuration block with encryption configuration for the cluster"},"cluster_encryption_policy_description":{"default":"Cluster encryption policy to allow cluster role to utilize CMK provided","description":"Description of the cluster encryption policy created"},"cluster_encryption_policy_name":{"default":null,"description":"Name to use on cluster encryption policy created"},"cluster_encryption_policy_path":{"default":null,"description":"Cluster encryption policy path"},"cluster_encryption_policy_tags":{"default":{},"description":"A map of additional tags to add to the cluster encryption policy created"},"cluster_encryption_policy_use_name_prefix":{"default":"true","description":"Determines whether cluster encryption policy name (`cluster_encryption_policy_name`) is used as a prefix"},"cluster_endpoint_private_access":{"default":false,"description":"Indicates whether or not the Amazon EKS private API server endpoint is enabled"},"cluster_endpoint_public_access":{"default":true,"description":"Indicates whether or not the Amazon EKS public API server endpoint is enabled"},"cluster_endpoint_public_access_cidrs":{"default":["0.0.0.0/0"],"description":"List of CIDR blocks which can access the Amazon EKS public API server endpoint"},"cluster_iam_role_dns_suffix":{"default":null,"description":"Base DNS domain name for the current partition (e.g., amazonaws.com in AWS Commercial, amazonaws.com.cn in AWS China)"},"cluster_identity_providers":{"default":{},"description":"Map of cluster identity provider configurations to enable for the cluster. Note - this is different/separate from IRSA"},"cluster_ip_family":{"default":null,"description":"The IP family used to assign Kubernetes pod and service addresses. Valid values are `ipv4` (default) and `ipv6`. You can only specify an IP family when you create a cluster, changing this value will force a new cluster to be created"},"cluster_name":{"default":"","description":"Name of the EKS cluster"},"cluster_security_group_additional_rules":{"default":{},"description":"List of additional security group rules to add to the cluster security group created. Set `source_node_security_group = true` inside rules to set the `node_security_group` as source"},"cluster_security_group_description":{"default":"EKS cluster security group","description":"Description of the cluster security group created"},"cluster_security_group_id":{"default":"","description":"Existing security group ID to be attached to the cluster. Required if `create_cluster_security_group` = `false`"},"cluster_security_group_name":{"default":null,"description":"Name to use on cluster security group created"},"cluster_security_group_tags":{"default":{},"description":"A map of additional tags to add to the cluster security group created"},"cluster_security_group_use_name_prefix":{"default":"true","description":"Determines whether cluster security group name (`cluster_security_group_name`) is used as a prefix"},"cluster_service_ipv4_cidr":{"default":null,"description":"The CIDR block to assign Kubernetes service IP addresses from. If you don't specify a block, Kubernetes assigns addresses from either the 10.100.0.0/16 or 172.20.0.0/16 CIDR blocks"},"cluster_tags":{"default":{},"description":"A map of additional tags to add to the cluster"},"cluster_timeouts":{"default":{},"description":"Create, update, and delete timeout configurations for the cluster"},"cluster_version":{"default":null,"description":"Kubernetes `\u003cmajor\u003e.\u003cminor\u003e` version to use for the EKS cluster (i.e.: `1.21`)"},"create":{"default":true,"description":"Controls if EKS resources should be created (affects nearly all resources)"},"create_cloudwatch_log_group":{"default":true,"description":"Determines whether a log group is created by this module for the cluster logs. If not, AWS will automatically create one if logging is enabled"},"create_cluster_security_group":{"default":true,"description":"Determines if a security group is created for the cluster or use the existing `cluster_security_group_id`"},"create_cni_ipv6_iam_policy":{"default":false,"description":"Determines whether to create an [`AmazonEKS_CNI_IPv6_Policy`](https://docs.aws.amazon.com/eks/latest/userguide/cni-iam-role.html#cni-iam-role-create-ipv6-policy)"},"create_iam_role":{"default":true,"description":"Determines whether a an IAM role is created or to use an existing IAM role"},"create_node_security_group":{"default":true,"description":"Determines whether to create a security group for the node groups or use the existing `node_security_group_id`"},"custom_oidc_thumbprints":{"default":[],"description":"Additional list of server certificate thumbprints for the OpenID Connect (OIDC) identity provider's server certificate(s)"},"eks_managed_node_group_defaults":{"default":{},"description":"Map of EKS managed node group default configurations"},"eks_managed_node_groups":{"default":{},"description":"Map of EKS managed node group definitions to create"},"enable_irsa":{"default":true,"description":"Determines whether to create an OpenID Connect Provider for EKS to enable IRSA"},"fargate_profile_defaults":{"default":{},"description":"Map of Fargate Profile default configurations"},"fargate_profiles":{"default":{},"description":"Map of Fargate Profile definitions to create"},"iam_role_additional_policies":{"default":[],"description":"Additional policies to be added to the IAM role"},"iam_role_arn":{"default":null,"description":"Existing IAM role ARN for the cluster. Required if `create_iam_role` is set to `false`"},"iam_role_description":{"default":null,"description":"Description of the role"},"iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"Cluster IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"iam_role_tags":{"default":{},"description":"A map of additional tags to add to the IAM role created"},"iam_role_use_name_prefix":{"default":"true","description":"Determines whether the IAM role name (`iam_role_name`) is used as a prefix"},"node_security_group_additional_rules":{"default":{},"description":"List of additional security group rules to add to the node security group created. Set `source_cluster_security_group = true` inside rules to set the `cluster_security_group` as source"},"node_security_group_description":{"default":"EKS node shared security group","description":"Description of the node security group created"},"node_security_group_id":{"default":"","description":"ID of an existing security group to attach to the node groups created"},"node_security_group_name":{"default":null,"description":"Name to use on node security group created"},"node_security_group_tags":{"default":{},"description":"A map of additional tags to add to the node security group created"},"node_security_group_use_name_prefix":{"default":"true","description":"Determines whether node security group name (`node_security_group_name`) is used as a prefix"},"openid_connect_audiences":{"default":[],"description":"List of OpenID Connect audience client IDs to add to the IRSA provider"},"prefix_separator":{"default":"-","description":"The separator to use between the prefix and the generated timestamp for resource names"},"putin_khuylo":{"default":true,"description":"Do you agree that Putin doesn't respect Ukrainian sovereignty and territorial integrity? More info: https://en.wikipedia.org/wiki/Putin_khuylo!"},"self_managed_node_group_defaults":{"default":{},"description":"Map of self-managed node group default configurations"},"self_managed_node_groups":{"default":{},"description":"Map of self-managed node group definitions to create"},"subnet_ids":{"default":[],"description":"A list of subnet IDs where the EKS cluster (ENIs) will be provisioned along with the nodes/node groups. Node groups can be deployed within a different set of subnet IDs from within the node group configuration"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"vpc_id":{"default":null,"description":"ID of the VPC where the cluster and its nodes will be provisioned"}}},"version_constraint":"v18.17.0"},"aws_eks_fargate_profiles":{"source":"./modules/aws-eks-fargate-profiles","expressions":{"context":{"references":["local.fargate_context"]},"fargate_profile":{"references":["each.value"]}},"for_each_expression":{"references":["var.fargate_profiles"]},"module":{"outputs":{"eks_fargate_profile_id":{"expression":{"references":["aws_eks_fargate_profile.eks_fargate"]},"description":"EKS Cluster name and EKS Fargate Profile name separated by a colon"},"eks_fargate_profile_role_name":{"expression":{"references":["aws_iam_role.fargate"]},"description":"Name of the EKS Fargate Profile IAM role"}},"resources":[{"address":"aws_eks_fargate_profile.eks_fargate","mode":"managed","type":"aws_eks_fargate_profile","name":"eks_fargate","provider_config_key":"aws","expressions":{"cluster_name":{"references":["var.context.eks_cluster_id","var.context"]},"fargate_profile_name":{"references":["local.fargate_profiles[\"fargate_profile_name\"]","local.fargate_profiles"]},"pod_execution_role_arn":{"references":["local.fargate_profiles[\"iam_role_arn\"]","local.fargate_profiles","aws_iam_role.fargate[0].arn","aws_iam_role.fargate[0]","aws_iam_role.fargate","local.fargate_profiles[\"iam_role_arn\"]","local.fargate_profiles"]},"subnet_ids":{"references":["local.fargate_profiles[\"subnet_ids\"]","local.fargate_profiles"]},"tags":{"references":["var.context.tags","var.context","local.fargate_profiles[\"additional_tags\"]","local.fargate_profiles","local.fargate_tags"]}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.fargate_pod_execution_role_policy"]},{"address":"aws_iam_policy.cwlogs","mode":"managed","type":"aws_iam_policy","name":"cwlogs","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow fargate profiles to write logs to CloudWatch"},"name":{"references":["var.context.eks_cluster_id","var.context","local.fargate_profiles[\"fargate_profile_name\"]","local.fargate_profiles"]},"path":{"references":["var.context.iam_role_path","var.context"]},"policy":{"references":["data.aws_iam_policy_document.cwlogs.json","data.aws_iam_policy_document.cwlogs"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.fargate_profiles[\"create_iam_role\"]","local.fargate_profiles"]}},{"address":"aws_iam_role.fargate","mode":"managed","type":"aws_iam_role","name":"fargate","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.fargate_assume_role_policy.json","data.aws_iam_policy_document.fargate_assume_role_policy"]},"description":{"constant_value":"EKS Fargate IAM Role"},"force_detach_policies":{"constant_value":true},"name":{"references":["var.context.eks_cluster_id","var.context","local.fargate_profiles[\"fargate_profile_name\"]","local.fargate_profiles"]},"path":{"references":["var.context.iam_role_path","var.context"]},"permissions_boundary":{"references":["var.context.iam_role_permissions_boundary","var.context"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.fargate_profiles[\"create_iam_role\"]","local.fargate_profiles"]}},{"address":"aws_iam_role_policy_attachment.cwlogs","mode":"managed","type":"aws_iam_role_policy_attachment","name":"cwlogs","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.cwlogs[0].arn","aws_iam_policy.cwlogs[0]","aws_iam_policy.cwlogs"]},"role":{"references":["aws_iam_role.fargate[0].name","aws_iam_role.fargate[0]","aws_iam_role.fargate"]}},"schema_version":0,"count_expression":{"references":["local.fargate_profiles[\"create_iam_role\"]","local.fargate_profiles"]}},{"address":"aws_iam_role_policy_attachment.fargate_pod_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"fargate_pod_execution_role_policy","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.key"]},"role":{"references":["aws_iam_role.fargate[0].name","aws_iam_role.fargate[0]","aws_iam_role.fargate"]}},"schema_version":0,"for_each_expression":{"references":["local.fargate_policies"]}},{"address":"data.aws_iam_policy_document.cwlogs","mode":"data","type":"aws_iam_policy_document","name":"cwlogs","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:CreateLogGroup","logs:DescribeLogStreams","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.fargate_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"fargate_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["eks-fargate-pods.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSFargateAssumeRole"}}]},"schema_version":0}],"variables":{"context":{"description":"Input configuration for Fargate"},"fargate_profile":{"default":{},"description":"Map of maps of `eks_node_groups` to create"}}},"depends_on":["kubernetes_config_map.aws_auth"]},"aws_eks_managed_node_groups":{"source":"./modules/aws-eks-managed-node-groups","expressions":{"context":{"references":["local.node_group_context"]},"managed_ng":{"references":["each.value"]}},"for_each_expression":{"references":["var.managed_node_groups"]},"module":{"outputs":{"managed_nodegroup_arn":{"expression":{"references":["aws_eks_node_group.managed_ng"]},"description":"EKS Managed node group id"},"managed_nodegroup_iam_instance_profile_arn":{"expression":{"references":["aws_iam_instance_profile.managed_ng"]},"description":"IAM instance profile arn for EKS Managed Node Group"},"managed_nodegroup_iam_instance_profile_id":{"expression":{"references":["aws_iam_instance_profile.managed_ng"]},"description":"IAM instance profile id for EKS Managed Node Group"},"managed_nodegroup_iam_role_arn":{"expression":{"references":["aws_iam_role.managed_ng"]},"description":"IAM role ARN for EKS Managed Node Group"},"managed_nodegroup_iam_role_name":{"expression":{"references":["aws_iam_role.managed_ng"]},"description":"IAM role name for EKS Managed Node Group"},"managed_nodegroup_id":{"expression":{"references":["aws_eks_node_group.managed_ng"]},"description":"EKS Managed node group id"},"managed_nodegroup_launch_template_arn":{"expression":{"references":["aws_launch_template.managed_node_groups"]},"description":"Launch Template ARN for EKS Managed Node Group"},"managed_nodegroup_launch_template_id":{"expression":{"references":["aws_launch_template.managed_node_groups"]},"description":"Launch Template ID for EKS Managed Node Group"},"managed_nodegroup_launch_template_latest_version":{"expression":{"references":["aws_launch_template.managed_node_groups"]},"description":"Launch Template version for EKS Managed Node Group"},"managed_nodegroup_status":{"expression":{"references":["aws_eks_node_group.managed_ng"]},"description":"EKS Managed Node Group status"}},"resources":[{"address":"aws_eks_node_group.managed_ng","mode":"managed","type":"aws_eks_node_group","name":"managed_ng","provider_config_key":"aws","expressions":{"ami_type":{"references":["local.managed_node_group[\"custom_ami_id\"]","local.managed_node_group","local.managed_node_group[\"ami_type\"]","local.managed_node_group"]},"capacity_type":{"references":["local.managed_node_group[\"capacity_type\"]","local.managed_node_group"]},"cluster_name":{"references":["var.context.eks_cluster_id","var.context"]},"disk_size":{"references":["local.managed_node_group[\"create_launch_template\"]","local.managed_node_group","local.managed_node_group[\"disk_size\"]","local.managed_node_group"]},"force_update_version":{"references":["local.managed_node_group[\"force_update_version\"]","local.managed_node_group"]},"instance_types":{"references":["local.managed_node_group[\"instance_types\"]","local.managed_node_group"]},"labels":{"references":["local.managed_node_group[\"k8s_labels\"]","local.managed_node_group"]},"node_group_name":{"references":["local.managed_node_group[\"enable_node_group_prefix\"]","local.managed_node_group","local.managed_node_group[\"node_group_name\"]","local.managed_node_group"]},"node_group_name_prefix":{"references":["local.managed_node_group[\"enable_node_group_prefix\"]","local.managed_node_group","local.managed_node_group[\"node_group_name\"]","local.managed_node_group"]},"node_role_arn":{"references":["local.managed_node_group[\"create_iam_role\"]","local.managed_node_group","aws_iam_role.managed_ng[0].arn","aws_iam_role.managed_ng[0]","aws_iam_role.managed_ng","local.managed_node_group[\"iam_role_arn\"]","local.managed_node_group"]},"release_version":{"references":["local.managed_node_group[\"release_version\"]","local.managed_node_group","local.managed_node_group[\"custom_ami_id\"]","local.managed_node_group","local.managed_node_group[\"release_version\"]","local.managed_node_group"]},"scaling_config":[{"desired_size":{"references":["local.managed_node_group[\"desired_size\"]","local.managed_node_group"]},"max_size":{"references":["local.managed_node_group[\"max_size\"]","local.managed_node_group"]},"min_size":{"references":["local.managed_node_group[\"min_size\"]","local.managed_node_group"]}}],"subnet_ids":{"references":["local.managed_node_group[\"subnet_ids\"]","local.managed_node_group","local.managed_node_group[\"subnet_type\"]","local.managed_node_group","var.context.public_subnet_ids","var.context","var.context.private_subnet_ids","var.context","local.managed_node_group[\"subnet_ids\"]","local.managed_node_group"]},"tags":{"references":["local.common_tags"]},"version":{"references":["local.managed_node_group[\"custom_ami_id\"]","local.managed_node_group","var.context.cluster_version","var.context"]}},"schema_version":0,"depends_on":["aws_iam_role.managed_ng","aws_iam_instance_profile.managed_ng","aws_iam_role_policy_attachment.managed_ng"]},{"address":"aws_iam_instance_profile.managed_ng","mode":"managed","type":"aws_iam_instance_profile","name":"managed_ng","provider_config_key":"aws","expressions":{"name":{"references":["var.context.eks_cluster_id","var.context","local.managed_node_group[\"node_group_name\"]","local.managed_node_group"]},"path":{"references":["var.context.iam_role_path","var.context"]},"role":{"references":["aws_iam_role.managed_ng[0].name","aws_iam_role.managed_ng[0]","aws_iam_role.managed_ng"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.managed_node_group[\"create_iam_role\"]","local.managed_node_group"]}},{"address":"aws_iam_role.managed_ng","mode":"managed","type":"aws_iam_role","name":"managed_ng","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.managed_ng_assume_role_policy.json","data.aws_iam_policy_document.managed_ng_assume_role_policy"]},"description":{"constant_value":"EKS Managed Node group IAM Role"},"force_detach_policies":{"constant_value":true},"name":{"references":["var.context.eks_cluster_id","var.context","local.managed_node_group[\"node_group_name\"]","local.managed_node_group"]},"path":{"references":["var.context.iam_role_path","var.context"]},"permissions_boundary":{"references":["var.context.iam_role_permissions_boundary","var.context"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.managed_node_group[\"create_iam_role\"]","local.managed_node_group"]}},{"address":"aws_iam_role_policy_attachment.managed_ng","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed_ng","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.key"]},"role":{"references":["aws_iam_role.managed_ng[0].id","aws_iam_role.managed_ng[0]","aws_iam_role.managed_ng"]}},"schema_version":0,"for_each_expression":{"references":["local.eks_worker_policies"]}},{"address":"aws_launch_template.managed_node_groups","mode":"managed","type":"aws_launch_template","name":"managed_node_groups","provider_config_key":"aws","expressions":{"description":{"constant_value":"Launch Template for EKS Managed Node Groups"},"ebs_optimized":{"constant_value":true},"image_id":{"references":["local.managed_node_group[\"custom_ami_id\"]","local.managed_node_group"]},"metadata_options":[{"http_endpoint":{"references":["var.context.http_endpoint","var.context"]},"http_put_response_hop_limit":{"references":["var.context.http_put_response_hop_limit","var.context"]},"http_tokens":{"references":["var.context.http_tokens","var.context"]}}],"monitoring":[{"enabled":{"references":["local.managed_node_group[\"enable_monitoring\"]","local.managed_node_group"]}}],"name":{"references":["var.context.eks_cluster_id","var.context","local.managed_node_group[\"node_group_name\"]","local.managed_node_group"]},"network_interfaces":[{"associate_public_ip_address":{"references":["local.managed_node_group[\"public_ip\"]","local.managed_node_group"]},"security_groups":{"references":["var.context.worker_security_group_ids","var.context"]}}],"tag_specifications":[{"resource_type":{"constant_value":"instance"},"tags":{"references":["local.common_tags"]}}],"update_default_version":{"constant_value":true},"user_data":{"references":["local.userdata_base64"]}},"schema_version":0,"count_expression":{"references":["local.managed_node_group[\"create_launch_template\"]","local.managed_node_group"]},"depends_on":["aws_iam_role.managed_ng","aws_iam_role_policy_attachment.managed_ng"]},{"address":"data.aws_iam_policy_document.managed_ng_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"managed_ng_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["local.ec2_principal"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSWorkerAssumeRole"}}]},"schema_version":0}],"variables":{"context":{"description":"Input configuration for the Node groups"},"managed_ng":{"default":{},"description":"Map of maps of `eks_node_groups` to create"}}},"depends_on":["kubernetes_config_map.aws_auth"]},"aws_eks_self_managed_node_groups":{"source":"./modules/aws-eks-self-managed-node-groups","expressions":{"context":{"references":["local.node_group_context"]},"self_managed_ng":{"references":["each.value"]}},"for_each_expression":{"references":["var.self_managed_node_groups"]},"module":{"outputs":{"launch_template_arn":{"expression":{"references":["module.launch_template_self_managed_ng.launch_template_arn","module.launch_template_self_managed_ng"]},"description":"Launch Template ARNs for EKS Self Managed Node Group"},"launch_template_ids":{"expression":{"references":["module.launch_template_self_managed_ng.launch_template_id","module.launch_template_self_managed_ng"]},"description":"Launch Template IDs for EKS Self Managed Node Group"},"launch_template_latest_versions":{"expression":{"references":["module.launch_template_self_managed_ng.launch_template_latest_version","module.launch_template_self_managed_ng"]},"description":"Launch Template latest versions for EKS Self Managed Node Group"},"self_managed_asg_names":{"expression":{"references":["aws_autoscaling_group.self_managed_ng"]},"description":"Self managed group ASG names"},"self_managed_iam_role_name":{"expression":{"references":["aws_iam_role.self_managed_ng"]},"description":"Self managed groups IAM role names"},"self_managed_nodegroup_iam_instance_profile_arn":{"expression":{"references":["aws_iam_instance_profile.self_managed_ng"]},"description":"IAM Instance Profile arnd for EKS Self Managed Node Group"},"self_managed_nodegroup_iam_instance_profile_id":{"expression":{"references":["aws_iam_instance_profile.self_managed_ng"]},"description":"IAM Instance Profile ID for EKS Self Managed Node Group"},"self_managed_nodegroup_iam_role_arns":{"expression":{"references":["aws_iam_role.self_managed_ng"]},"description":"Self managed groups IAM role arns"},"self_managed_nodegroup_name":{"expression":{"references":["local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group"]},"description":"EKS Self Managed node group id"}},"resources":[{"address":"aws_autoscaling_group.self_managed_ng","mode":"managed","type":"aws_autoscaling_group","name":"self_managed_ng","provider_config_key":"aws","expressions":{"launch_template":[{"id":{"references":["module.launch_template_self_managed_ng.launch_template_id","module.launch_template_self_managed_ng","local.lt_self_managed_group_map_key"]},"version":{"references":["module.launch_template_self_managed_ng.launch_template_latest_version","module.launch_template_self_managed_ng","local.lt_self_managed_group_map_key"]}}],"max_size":{"references":["local.self_managed_node_group[\"max_size\"]","local.self_managed_node_group"]},"min_size":{"references":["local.self_managed_node_group[\"min_size\"]","local.self_managed_node_group"]},"name":{"references":["var.context.eks_cluster_id","var.context","local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group"]},"vpc_zone_identifier":{"references":["local.self_managed_node_group[\"subnet_ids\"]","local.self_managed_node_group","local.self_managed_node_group[\"subnet_type\"]","local.self_managed_node_group","var.context.public_subnet_ids","var.context","var.context.private_subnet_ids","var.context","local.self_managed_node_group[\"subnet_ids\"]","local.self_managed_node_group"]}},"schema_version":0,"depends_on":["aws_iam_role.self_managed_ng","aws_iam_instance_profile.self_managed_ng","aws_iam_role_policy_attachment.self_managed_ng"]},{"address":"aws_iam_instance_profile.self_managed_ng","mode":"managed","type":"aws_iam_instance_profile","name":"self_managed_ng","provider_config_key":"aws","expressions":{"name":{"references":["var.context.eks_cluster_id","var.context","local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group"]},"path":{"references":["var.context.iam_role_path","var.context"]},"role":{"references":["aws_iam_role.self_managed_ng[0].name","aws_iam_role.self_managed_ng[0]","aws_iam_role.self_managed_ng"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.self_managed_node_group[\"create_iam_role\"]","local.self_managed_node_group"]}},{"address":"aws_iam_policy.eks_windows_cni","mode":"managed","type":"aws_iam_policy","name":"eks_windows_cni","provider_config_key":"aws","expressions":{"description":{"constant_value":"EKS Windows CNI policy"},"name":{"references":["var.context.eks_cluster_id","var.context","local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group"]},"path":{"references":["var.context.iam_role_path","var.context"]},"policy":{"references":["data.aws_iam_policy_document.eks_windows_cni.json","data.aws_iam_policy_document.eks_windows_cni"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.self_managed_node_group[\"create_iam_role\"]","local.self_managed_node_group","local.enable_windows_support"]}},{"address":"aws_iam_role.self_managed_ng","mode":"managed","type":"aws_iam_role","name":"self_managed_ng","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.self_managed_ng_assume_role_policy.json","data.aws_iam_policy_document.self_managed_ng_assume_role_policy"]},"description":{"constant_value":"EKS Self Managed Node group IAM Role"},"force_detach_policies":{"constant_value":true},"name":{"references":["var.context.eks_cluster_id","var.context","local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group"]},"path":{"references":["var.context.iam_role_path","var.context"]},"permissions_boundary":{"references":["var.context.iam_role_permissions_boundary","var.context"]},"tags":{"references":["var.context.tags","var.context"]}},"schema_version":0,"count_expression":{"references":["local.self_managed_node_group[\"create_iam_role\"]","local.self_managed_node_group"]}},{"address":"aws_iam_role_policy_attachment.eks_windows_cni","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_windows_cni","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.eks_windows_cni[0].arn","aws_iam_policy.eks_windows_cni[0]","aws_iam_policy.eks_windows_cni"]},"role":{"references":["aws_iam_role.self_managed_ng[0].name","aws_iam_role.self_managed_ng[0]","aws_iam_role.self_managed_ng"]}},"schema_version":0,"count_expression":{"references":["local.self_managed_node_group[\"create_iam_role\"]","local.self_managed_node_group","local.enable_windows_support"]}},{"address":"aws_iam_role_policy_attachment.self_managed_ng","mode":"managed","type":"aws_iam_role_policy_attachment","name":"self_managed_ng","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.key"]},"role":{"references":["aws_iam_role.self_managed_ng[0].name","aws_iam_role.self_managed_ng[0]","aws_iam_role.self_managed_ng"]}},"schema_version":0,"for_each_expression":{"references":["local.eks_worker_policies"]}},{"address":"data.aws_ami.predefined","mode":"data","type":"aws_ami","name":"predefined","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"references":["each.value"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0,"for_each_expression":{"references":["local.predefined_ami_names"]}},{"address":"data.aws_iam_policy_document.eks_windows_cni","mode":"data","type":"aws_iam_policy_document","name":"eks_windows_cni","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:DescribeInstances","ec2:DescribeTags","ec2:DescribeNetworkInterfaces","ec2:DescribeInstanceTypes"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.self_managed_ng_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"self_managed_ng_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["local.ec2_principal"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"EKSWorkerAssumeRole"}}]},"schema_version":0}],"module_calls":{"launch_template_self_managed_ng":{"source":"../launch-templates","expressions":{"eks_cluster_id":{"references":["var.context.eks_cluster_id","var.context"]},"launch_template_config":{"references":["local.lt_self_managed_group_map_key","local.custom_ami_id","local.self_managed_node_group[\"launch_template_os\"]","local.self_managed_node_group","local.self_managed_node_group[\"node_group_name\"]","local.self_managed_node_group","local.self_managed_node_group[\"instance_type\"]","local.self_managed_node_group","local.self_managed_node_group[\"capacity_type\"]","local.self_managed_node_group","local.self_managed_node_group[\"iam_instance_profile_name\"]","local.self_managed_node_group","aws_iam_instance_profile.self_managed_ng[0].name","aws_iam_instance_profile.self_managed_ng[0]","aws_iam_instance_profile.self_managed_ng","local.self_managed_node_group[\"iam_instance_profile_name\"]","local.self_managed_node_group","local.self_managed_node_group[\"pre_userdata\"]","local.self_managed_node_group","local.self_managed_node_group[\"bootstrap_extra_args\"]","local.self_managed_node_group","local.self_managed_node_group[\"post_userdata\"]","local.self_managed_node_group","local.self_managed_node_group[\"kubelet_extra_args\"]","local.self_managed_node_group","local.self_managed_node_group[\"enable_monitoring\"]","local.self_managed_node_group","var.context.http_endpoint","var.context","var.context.http_tokens","var.context","var.context.http_put_response_hop_limit","var.context","var.context.service_ipv6_cidr","var.context","var.context.service_ipv4_cidr","var.context","local.self_managed_node_group[\"block_device_mappings\"]","local.self_managed_node_group","local.self_managed_node_group[\"format_mount_nvme_disk\"]","local.self_managed_node_group","local.self_managed_node_group[\"public_ip\"]","local.self_managed_node_group","var.context.worker_security_group_ids","var.context"]},"tags":{"references":["local.common_tags"]}},"module":{"outputs":{"launch_template_arn":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template ARNs"},"launch_template_default_version":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template Default Versions"},"launch_template_id":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template IDs"},"launch_template_image_id":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template Image IDs"},"launch_template_latest_version":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template Latest Versions"},"launch_template_name":{"expression":{"references":["var.launch_template_config","aws_launch_template.this"]},"description":"Launch Template Names"}},"resources":[{"address":"aws_launch_template.this","mode":"managed","type":"aws_launch_template","name":"this","provider_config_key":"aws","expressions":{"description":{"constant_value":"Launch Template for Amazon EKS Worker Nodes"},"ebs_optimized":{"constant_value":true},"image_id":{"references":["each.value.ami","each.value"]},"instance_type":{"references":["each.value.instance_type","each.value","each.value.instance_type","each.value"]},"metadata_options":[{"http_endpoint":{"references":["each.value.http_endpoint","each.value"]},"http_put_response_hop_limit":{"references":["each.value.http_put_response_hop_limit","each.value"]},"http_tokens":{"references":["each.value.http_tokens","each.value"]}}],"name":{"references":["each.value.launch_template_prefix","each.value","var.eks_cluster_id"]},"tag_specifications":[{"resource_type":{"constant_value":"instance"},"tags":{"references":["var.tags","var.tags"]}},{"resource_type":{"constant_value":"volume"},"tags":{"references":["var.tags","var.tags"]}}],"update_default_version":{"constant_value":true},"user_data":{"references":["path.module","each.value.launch_template_os","each.value","each.value.pre_userdata","each.value","each.value.post_userdata","each.value","each.value.bootstrap_extra_args","each.value","each.value.kubelet_extra_args","each.value","var.eks_cluster_id","data.aws_eks_cluster.eks.certificate_authority[0].data","data.aws_eks_cluster.eks.certificate_authority[0]","data.aws_eks_cluster.eks.certificate_authority","data.aws_eks_cluster.eks","data.aws_eks_cluster.eks.endpoint","data.aws_eks_cluster.eks","each.value.service_ipv6_cidr","each.value","each.value.service_ipv4_cidr","each.value","each.value.format_mount_nvme_disk","each.value"]},"vpc_security_group_ids":{"references":["each.value.vpc_security_group_ids","each.value","each.value.vpc_security_group_ids","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.launch_template_config"]}},{"address":"data.aws_eks_cluster.eks","mode":"data","type":"aws_eks_cluster","name":"eks","provider_config_key":"aws","expressions":{"name":{"references":["var.eks_cluster_id"]}},"schema_version":0}],"variables":{"eks_cluster_id":{"description":"EKS Cluster ID"},"launch_template_config":{"description":"Launch template configuration"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit`,`XYZ`)"}}}}},"variables":{"context":{"description":"Input configuration for the Node groups"},"self_managed_ng":{"default":{},"description":"Map of maps of `eks_self_managed_node_groups` to create"}}},"depends_on":["kubernetes_config_map.aws_auth"]},"aws_eks_teams":{"source":"./modules/aws-eks-teams","expressions":{"application_teams":{"references":["var.application_teams"]},"eks_cluster_id":{"references":["module.aws_eks.cluster_id","module.aws_eks"]},"iam_role_permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"platform_teams":{"references":["var.platform_teams"]},"tags":{"references":["var.tags"]}},"count_expression":{"references":["var.application_teams","var.platform_teams"]},"module":{"outputs":{"application_teams_configure_kubectl":{"expression":{"references":["aws_iam_role.team_access","data.aws_region.current.id","data.aws_region.current","data.aws_eks_cluster.eks_cluster.name","data.aws_eks_cluster.eks_cluster"]},"description":"Configure kubectl for each Application Teams: make sure you're logged in with the correct AWS profile and run the following command to update your kubeconfig"},"application_teams_iam_role_arn":{"expression":{"references":["aws_iam_role.team_access"]},"description":"IAM role ARN for Teams"},"platform_teams_configure_kubectl":{"expression":{"references":["aws_iam_role.platform_team","data.aws_region.current.id","data.aws_region.current","data.aws_eks_cluster.eks_cluster.name","data.aws_eks_cluster.eks_cluster"]},"description":"Configure kubectl for each Platform Team: make sure you're logged in with the correct AWS profile and run the following command to update your kubeconfig"},"platform_teams_iam_role_arn":{"expression":{"references":["aws_iam_role.platform_team"]},"description":"IAM role ARN for Platform Teams"},"team_sa_irsa_iam_role_arn":{"expression":{"references":["aws_iam_role.team_sa_irsa"]},"description":"IAM role ARN for Teams EKS Service Account (IRSA)"}},"resources":[{"address":"aws_iam_policy.platform_team_eks_access","mode":"managed","type":"aws_iam_policy","name":"platform_team_eks_access","provider_config_key":"aws","expressions":{"description":{"constant_value":"Platform Team EKS Console Access"},"name":{"references":["var.eks_cluster_id"]},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.platform_team_eks_access[0].json","data.aws_iam_policy_document.platform_team_eks_access[0]","data.aws_iam_policy_document.platform_team_eks_access"]},"tags":{"references":["var.tags"]}},"schema_version":0,"count_expression":{"references":["var.platform_teams"]}},{"address":"aws_iam_role.platform_team","mode":"managed","type":"aws_iam_role","name":"platform_team","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["each.value.users","each.value"]},"managed_policy_arns":{"references":["aws_iam_policy.platform_team_eks_access[0].arn","aws_iam_policy.platform_team_eks_access[0]","aws_iam_policy.platform_team_eks_access"]},"name":{"references":["var.eks_cluster_id","each.key"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags"]}},"schema_version":0,"for_each_expression":{"references":["var.platform_teams"]}},{"address":"aws_iam_role.team_access","mode":"managed","type":"aws_iam_role","name":"team_access","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["each.value.users","each.value"]},"name":{"references":["var.eks_cluster_id","each.key"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags"]}},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"aws_iam_role.team_sa_irsa","mode":"managed","type":"aws_iam_role","name":"team_sa_irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["local.eks_oidc_provider_arn","local.eks_oidc_issuer_url","each.key","each.key","local.eks_oidc_issuer_url"]},"name":{"references":["var.eks_cluster_id","each.key"]},"permissions_boundary":{"references":["var.iam_role_permissions_boundary"]},"tags":{"references":["var.tags"]}},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubectl_manifest.team","mode":"managed","type":"kubectl_manifest","name":"team","provider_config_key":"kubectl","expressions":{"yaml_body":{"references":["each.value"]}},"schema_version":1,"for_each_expression":{"references":["local.team_manifests"]},"depends_on":["kubernetes_namespace.team"]},{"address":"kubernetes_cluster_role.team","mode":"managed","type":"kubernetes_cluster_role","name":"team","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["each.key"]}}],"rule":[{"api_groups":{"constant_value":[""]},"resources":{"constant_value":["namespaces","nodes"]},"verbs":{"constant_value":["get","list","watch"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_cluster_role_binding.team","mode":"managed","type":"kubernetes_cluster_role_binding","name":"team","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["each.key"]}}],"role_ref":[{"api_group":{"constant_value":"rbac.authorization.k8s.io"},"kind":{"constant_value":"ClusterRole"},"name":{"references":["each.key"]}}],"subject":[{"api_group":{"constant_value":"rbac.authorization.k8s.io"},"kind":{"constant_value":"Group"},"name":{"references":["each.key"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_namespace.team","mode":"managed","type":"kubernetes_namespace","name":"team","provider_config_key":"kubernetes","expressions":{"metadata":[{"labels":{"references":["each.value[\"labels\"]","each.value"]},"name":{"references":["each.key"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_resource_quota.team_compute_quota","mode":"managed","type":"kubernetes_resource_quota","name":"team_compute_quota","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"constant_value":"compute-quota"},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}],"spec":[{"hard":{"references":["each.value[\"quota\"][\"requests.cpu\"]","each.value[\"quota\"]","each.value","each.value[\"quota\"][\"requests.memory\"]","each.value[\"quota\"]","each.value","each.value[\"quota\"][\"limits.cpu\"]","each.value[\"quota\"]","each.value","each.value[\"quota\"][\"limits.memory\"]","each.value[\"quota\"]","each.value"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_resource_quota.team_object_quota","mode":"managed","type":"kubernetes_resource_quota","name":"team_object_quota","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"constant_value":"object-quota"},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}],"spec":[{"hard":{"references":["each.value[\"quota\"][\"pods\"]","each.value[\"quota\"]","each.value","each.value[\"quota\"][\"secrets\"]","each.value[\"quota\"]","each.value","each.value[\"quota\"][\"services\"]","each.value[\"quota\"]","each.value"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_role.team","mode":"managed","type":"kubernetes_role","name":"team","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["each.key"]},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}],"rule":[{"api_groups":{"constant_value":["*"]},"resources":{"constant_value":["configmaps","pods","podtemplates","secrets","serviceaccounts","services","deployments","horizontalpodautoscalers","networkpolicies","statefulsets","replicasets"]},"verbs":{"constant_value":["get","list","watch"]}},{"api_groups":{"constant_value":["*"]},"resources":{"constant_value":["resourcequotas"]},"verbs":{"constant_value":["get","list","watch"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_role_binding.team","mode":"managed","type":"kubernetes_role_binding","name":"team","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["each.key"]},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}],"role_ref":[{"api_group":{"constant_value":"rbac.authorization.k8s.io"},"kind":{"constant_value":"Role"},"name":{"references":["each.key"]}}],"subject":[{"api_group":{"constant_value":"rbac.authorization.k8s.io"},"kind":{"constant_value":"Group"},"name":{"references":["each.key"]},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"kubernetes_service_account.team","mode":"managed","type":"kubernetes_service_account","name":"team","provider_config_key":"kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["aws_iam_role.team_sa_irsa","each.key"]},"name":{"references":["each.key"]},"namespace":{"references":["kubernetes_namespace.team","each.key"]}}]},"schema_version":0,"for_each_expression":{"references":["var.application_teams"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"name":{"references":["var.eks_cluster_id"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.platform_team_eks_access","mode":"data","type":"aws_iam_policy_document","name":"platform_team_eks_access","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["eks:DescribeNodegroup","eks:ListNodegroups","eks:DescribeCluster","eks:ListClusters","eks:AccessKubernetesApi","ssm:GetParameter","eks:ListUpdates","eks:ListFargateProfiles"]},"resources":{"references":["data.aws_eks_cluster.eks_cluster.arn","data.aws_eks_cluster.eks_cluster"]},"sid":{"constant_value":"AllowPlatformTeamEKSAccess"}},{"actions":{"constant_value":["eks:ListClusters"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AllowListClusters"}}]},"schema_version":0,"count_expression":{"references":["var.platform_teams"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"application_teams":{"default":{},"description":"Map of maps of teams to create"},"eks_cluster_id":{"description":"EKS Cluster name"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"platform_teams":{"default":{},"description":"Map of maps of teams to create"},"tags":{"default":{},"description":"A map of tags to add to all resources"}}}},"aws_managed_prometheus":{"source":"./modules/aws-managed-prometheus","expressions":{"amazon_prometheus_workspace_alias":{"references":["var.amazon_prometheus_workspace_alias"]},"eks_cluster_id":{"references":["module.aws_eks.cluster_id","module.aws_eks"]}},"count_expression":{"references":["var.create_eks","var.enable_amazon_prometheus"]},"module":{"outputs":{"amazon_prometheus_workspace_arn":{"expression":{"references":["aws_prometheus_workspace.amp_workspace.arn","aws_prometheus_workspace.amp_workspace"]},"description":"Amazon Managed Prometheus Workspace ARN"},"amazon_prometheus_workspace_endpoint":{"expression":{"references":["aws_prometheus_workspace.amp_workspace.prometheus_endpoint","aws_prometheus_workspace.amp_workspace"]},"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_id":{"expression":{"references":["aws_prometheus_workspace.amp_workspace.id","aws_prometheus_workspace.amp_workspace"]},"description":"Amazon Managed Prometheus Workspace ID"}},"resources":[{"address":"aws_prometheus_workspace.amp_workspace","mode":"managed","type":"aws_prometheus_workspace","name":"amp_workspace","provider_config_key":"aws","expressions":{"alias":{"references":["local.amazon_prometheus_workspace_alias"]}},"schema_version":0}],"variables":{"amazon_prometheus_workspace_alias":{"default":null,"description":"AWS Managed Prometheus WorkSpace Name"},"eks_cluster_id":{"description":"EKS Cluster ID"}}}},"emr_on_eks":{"source":"./modules/emr-on-eks","expressions":{"eks_cluster_id":{"references":["module.aws_eks.cluster_id","module.aws_eks"]},"emr_on_eks_teams":{"references":["each.value"]},"tags":{"references":["var.tags"]}},"for_each_expression":{"references":["var.emr_on_eks_teams","var.enable_emr_on_eks","var.emr_on_eks_teams"]},"module":{"outputs":{"emr_on_eks_role_arn":{"expression":{"references":["aws_iam_role.emr_on_eks_execution"]},"description":"IAM execution role ARN for EMR on EKS"},"emr_on_eks_role_id":{"expression":{"references":["aws_iam_role.emr_on_eks_execution"]},"description":"IAM execution role ID for EMR on EKS"}},"resources":[{"address":"aws_iam_policy.emr_on_eks_execution","mode":"managed","type":"aws_iam_policy","name":"emr_on_eks_execution","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM policy for EMR on EKS Job execution"},"name":{"references":["var.eks_cluster_id","local.emr_on_eks_team[\"emr_on_eks_iam_role_name\"]","local.emr_on_eks_team"]},"path":{"references":["var.iam_role_path"]},"policy":{"references":["data.aws_iam_policy_document.emr_on_eks.json","data.aws_iam_policy_document.emr_on_eks"]}},"schema_version":0},{"address":"aws_iam_role.emr_on_eks_execution","mode":"managed","type":"aws_iam_role","name":"emr_on_eks_execution","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.emr_assume_role.json","data.aws_iam_policy_document.emr_assume_role"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.eks_cluster_id","local.emr_on_eks_team[\"emr_on_eks_iam_role_name\"]","local.emr_on_eks_team"]},"path":{"references":["var.iam_role_path"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.emr_on_eks_execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"emr_on_eks_execution","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.emr_on_eks_execution.arn","aws_iam_policy.emr_on_eks_execution"]},"role":{"references":["aws_iam_role.emr_on_eks_execution.name","aws_iam_role.emr_on_eks_execution"]}},"schema_version":0},{"address":"kubernetes_namespace.spark","mode":"managed","type":"kubernetes_namespace","name":"spark","provider_config_key":"kubernetes","expressions":{"metadata":[{"annotations":{"references":["local.emr_on_eks_team[\"emr_on_eks_namespace\"]","local.emr_on_eks_team"]},"labels":{"constant_value":{"job-type":"spark"}},"name":{"references":["local.emr_on_eks_team[\"emr_on_eks_namespace\"]","local.emr_on_eks_team"]}}]},"schema_version":0},{"address":"kubernetes_role.emr_containers","mode":"managed","type":"kubernetes_role","name":"emr_containers","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["local.emr_service_name"]},"namespace":{"references":["kubernetes_namespace.spark.id","kubernetes_namespace.spark"]}}],"rule":[{"api_groups":{"constant_value":[""]},"resources":{"constant_value":["namespaces"]},"verbs":{"constant_value":["get"]}},{"api_groups":{"constant_value":[""]},"resources":{"constant_value":["serviceaccounts","services","configmaps","events","pods","pods/log"]},"verbs":{"constant_value":["get","list","watch","describe","create","edit","delete","deletecollection","annotate","patch","label"]}},{"api_groups":{"constant_value":[""]},"resources":{"constant_value":["secrets"]},"verbs":{"constant_value":["create","patch","delete","watch"]}},{"api_groups":{"constant_value":["apps"]},"resources":{"constant_value":["statefulsets","deployments"]},"verbs":{"constant_value":["get","list","watch","describe","create","edit","delete","annotate","patch","label"]}},{"api_groups":{"constant_value":["batch"]},"resources":{"constant_value":["jobs"]},"verbs":{"constant_value":["get","list","watch","describe","create","edit","delete","annotate","patch","label"]}},{"api_groups":{"constant_value":["extensions"]},"resources":{"constant_value":["ingresses"]},"verbs":{"constant_value":["get","list","watch","describe","create","edit","delete","annotate","patch","label"]}},{"api_groups":{"constant_value":["rbac.authorization.k8s.io"]},"resources":{"constant_value":["roles","rolebindings"]},"verbs":{"constant_value":["get","list","watch","describe","create","edit","delete","deletecollection","annotate","patch","label"]}}]},"schema_version":0},{"address":"kubernetes_role_binding.emr_containers","mode":"managed","type":"kubernetes_role_binding","name":"emr_containers","provider_config_key":"kubernetes","expressions":{"metadata":[{"name":{"references":["local.emr_service_name"]},"namespace":{"references":["kubernetes_namespace.spark.id","kubernetes_namespace.spark"]}}],"role_ref":[{"api_group":{"constant_value":"rbac.authorization.k8s.io"},"kind":{"constant_value":"Role"},"name":{"references":["local.emr_service_name"]}}],"subject":[{"kind":{"constant_value":"User"},"name":{"references":["local.emr_service_name"]}}]},"schema_version":0},{"address":"null_resource.update_trust_policy","mode":"managed","type":"null_resource","name":"update_trust_policy","provider_config_key":"module.eks_blueprints:null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["var.eks_cluster_id","kubernetes_namespace.spark.id","kubernetes_namespace.spark","aws_iam_role.emr_on_eks_execution.id","aws_iam_role.emr_on_eks_execution"]},"environment":{"references":["data.aws_region.current.id","data.aws_region.current"]},"interpreter":{"constant_value":["/bin/sh","-c"]}}}],"expressions":{"triggers":{}},"schema_version":0,"depends_on":["kubernetes_namespace.spark","aws_iam_role.emr_on_eks_execution"]},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.emr_assume_role","mode":"data","type":"aws_iam_policy_document","name":"emr_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["elasticmapreduce.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":""}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.emr_on_eks","mode":"data","type":"aws_iam_policy_document","name":"emr_on_eks","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:PutObject","s3:GetObject","s3:ListBucket","s3:DeleteObject","s3:DeleteObjectVersion"]},"effect":{"constant_value":"Allow"},"resources":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["logs:PutLogEvents","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"references":["data.aws_partition.current.partition","data.aws_partition.current","data.aws_region.current.id","data.aws_region.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"sid":{"constant_value":""}}]},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"eks_cluster_id":{"description":"EKS Cluster ID"},"emr_on_eks_teams":{"default":{},"description":"EMR on EKS Teams configuration"},"iam_role_path":{"default":"/","description":"IAM role path"},"tags":{"description":"Common Tags for AWS resources"}}},"depends_on":["kubernetes_config_map.aws_auth"]},"kms":{"source":"./modules/aws-kms","expressions":{"alias":{"references":["var.cluster_name"]},"deletion_window_in_days":{"references":["var.cluster_kms_key_deletion_window_in_days"]},"description":{"references":["var.cluster_name"]},"policy":{"references":["data.aws_iam_policy_document.eks_key.json","data.aws_iam_policy_document.eks_key"]},"tags":{"references":["var.tags"]}},"count_expression":{"references":["var.create_eks","var.cluster_kms_key_arn"]},"module":{"outputs":{"key_arn":{"expression":{"references":["aws_kms_key.this.arn","aws_kms_key.this"]},"description":"The Amazon Resource Name (ARN) of the key."},"key_id":{"expression":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]},"description":"The globally unique identifier for the key."}},"resources":[{"address":"aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.alias"]},"target_key_id":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]}},"schema_version":0},{"address":"aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"policy":{"references":["var.policy"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"alias":{"description":"The display name of the alias. The name must start with the word 'alias' followed by a forward slash (alias/)"},"deletion_window_in_days":{"default":30,"description":"The waiting period, specified in number of days. After the waiting period ends, AWS KMS deletes the KMS key. If you specify a value, it must be between 7 and 30, inclusive. If you do not specify a value, it defaults to 30."},"description":{"description":"The description of the key."},"enable_key_rotation":{"default":true,"description":"Specifies whether annual key rotation is enabled."},"policy":{"description":"A valid KMS key policy JSON document. Although this is a key policy, not an IAM policy, an aws_iam_policy_document, in the form that designates a principal, can be used."},"tags":{"description":"A map of tags to assign to the object."}}}}},"variables":{"amazon_prometheus_workspace_alias":{"default":null,"description":"AWS Managed Prometheus WorkSpace Name"},"application_teams":{"default":{},"description":"Map of maps of Application Teams to create"},"aws_auth_additional_labels":{"default":{},"description":"Additional kubernetes labels applied on aws-auth ConfigMap"},"cloudwatch_log_group_kms_key_id":{"default":null,"description":"If a KMS Key ARN is set, this key will be used to encrypt the corresponding log group. Please be sure that the KMS Key has an appropriate key policy (https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/encrypt-log-data-kms.html)"},"cloudwatch_log_group_retention_in_days":{"default":90,"description":"Number of days to retain log events. Default retention - 90 days"},"cluster_additional_security_group_ids":{"default":[],"description":"List of additional, externally created security group IDs to attach to the cluster control plane"},"cluster_enabled_log_types":{"default":["api","audit","authenticator","controllerManager","scheduler"],"description":"A list of the desired control plane logging to enable"},"cluster_encryption_config":{"default":[],"description":"Configuration block with encryption configuration for the cluster"},"cluster_endpoint_private_access":{"default":false,"description":"Indicates whether or not the EKS private API server endpoint is enabled. Default to EKS resource and it is false"},"cluster_endpoint_public_access":{"default":true,"description":"Indicates whether or not the EKS public API server endpoint is enabled. Default to EKS resource and it is true"},"cluster_endpoint_public_access_cidrs":{"default":["0.0.0.0/0"],"description":"List of CIDR blocks which can access the Amazon EKS public API server endpoint"},"cluster_identity_providers":{"default":{},"description":"Map of cluster identity provider configurations to enable for the cluster. Note - this is different/separate from IRSA"},"cluster_ip_family":{"default":"ipv4","description":"The IP family used to assign Kubernetes pod and service addresses. Valid values are `ipv4` (default) and `ipv6`. You can only specify an IP family when you create a cluster, changing this value will force a new cluster to be created"},"cluster_kms_key_additional_admin_arns":{"default":[],"description":"A list of additional IAM ARNs that should have FULL access (kms:*) in the KMS key policy."},"cluster_kms_key_arn":{"default":null,"description":"A valid EKS Cluster KMS Key ARN to encrypt Kubernetes secrets"},"cluster_kms_key_deletion_window_in_days":{"default":30,"description":"The waiting period, specified in number of days (7 - 30). After the waiting period ends, AWS KMS deletes the KMS key"},"cluster_name":{"default":"","description":"EKS Cluster Name"},"cluster_security_group_additional_rules":{"default":{},"description":"List of additional security group rules to add to the cluster security group created. Set `source_node_security_group = true` inside rules to set the `node_security_group` as source"},"cluster_security_group_tags":{"default":{},"description":"A map of additional tags to add to the cluster security group created"},"cluster_service_ipv4_cidr":{"default":null,"description":"The CIDR block to assign Kubernetes service IP addresses from. If you don't specify a block, Kubernetes assigns addresses from either the 10.100.0.0/16 or 172.20.0.0/16 CIDR blocks"},"cluster_service_ipv6_cidr":{"default":null,"description":"The IPV6 Service CIDR block to assign Kubernetes service IP addresses"},"cluster_timeouts":{"default":{},"description":"Create, update, and delete timeout configurations for the cluster"},"cluster_version":{"default":"1.21","description":"Kubernetes `\u003cmajor\u003e.\u003cminor\u003e` version to use for the EKS cluster (i.e.: `1.21`)"},"create_cloudwatch_log_group":{"default":false,"description":"Determines whether a log group is created by this module for the cluster logs. If not, AWS will automatically create one if logging is enabled"},"create_eks":{"default":true,"description":"Create EKS cluster"},"create_iam_role":{"default":true,"description":"Determines whether a an IAM role is created or to use an existing IAM role"},"create_node_security_group":{"default":true,"description":"Determines whether to create a security group for the node groups or use the existing `node_security_group_id`"},"custom_oidc_thumbprints":{"default":[],"description":"Additional list of server certificate thumbprints for the OpenID Connect (OIDC) identity provider's server certificate(s)"},"eks_readiness_timeout":{"default":600,"description":"The maximum time (in seconds) to wait for EKS API server endpoint to become healthy"},"emr_on_eks_teams":{"default":{},"description":"EMR on EKS Teams config"},"enable_amazon_prometheus":{"default":false,"description":"Enable AWS Managed Prometheus service"},"enable_emr_on_eks":{"default":false,"description":"Enable EMR on EKS"},"enable_irsa":{"default":true,"description":"Determines whether to create an OpenID Connect Provider for EKS to enable IRSA"},"enable_windows_support":{"default":false,"description":"Enable Windows support"},"fargate_profiles":{"default":{},"description":"Fargate profile configuration"},"iam_role_additional_policies":{"default":[],"description":"Additional policies to be added to the IAM role"},"iam_role_arn":{"default":null,"description":"Existing IAM role ARN for the cluster. Required if `create_iam_role` is set to `false`"},"iam_role_name":{"default":null,"description":"Name to use on IAM role created"},"iam_role_path":{"default":null,"description":"Cluster IAM role path"},"iam_role_permissions_boundary":{"default":null,"description":"ARN of the policy that is used to set the permissions boundary for the IAM role"},"managed_node_groups":{"default":{},"description":"Managed node groups configuration"},"map_accounts":{"default":[],"description":"Additional AWS account numbers to add to the aws-auth ConfigMap"},"map_roles":{"default":[],"description":"Additional IAM roles to add to the aws-auth ConfigMap"},"map_users":{"default":[],"description":"Additional IAM users to add to the aws-auth ConfigMap"},"node_security_group_additional_rules":{"default":{},"description":"List of additional security group rules to add to the node security group created. Set `source_cluster_security_group = true` inside rules to set the `cluster_security_group` as source"},"node_security_group_tags":{"default":{},"description":"A map of additional tags to add to the node security group created"},"openid_connect_audiences":{"default":[],"description":"List of OpenID Connect audience client IDs to add to the IRSA provider"},"platform_teams":{"default":{},"description":"Map of maps of platform teams to create"},"private_subnet_ids":{"default":[],"description":"List of private subnets Ids for the cluster and worker nodes"},"public_subnet_ids":{"default":[],"description":"List of public subnets Ids for the worker nodes"},"self_managed_node_groups":{"default":{},"description":"Self-managed node groups configuration"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit`,`XYZ`)"},"vpc_id":{"description":"VPC Id"},"worker_additional_security_group_ids":{"default":[],"description":"A list of additional security group ids to attach to worker instances"}}}},"kubernetes-addons":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints?ref=v4.0.7/modules/kubernetes-addons","expressions":{"argocd_applications":{"references":["local.addon_application","local.workload_application"]},"argocd_helm_config":{"references":["path.module"]},"argocd_manage_add_ons":{"constant_value":true},"eks_cluster_id":{"references":["module.eks_blueprints.eks_cluster_id","module.eks_blueprints"]},"enable_argo_rollouts":{"constant_value":false},"enable_argocd":{"constant_value":true},"enable_aws_for_fluentbit":{"constant_value":false},"enable_cert_manager":{"constant_value":false},"enable_cluster_autoscaler":{"constant_value":false},"enable_ingress_nginx":{"constant_value":false},"enable_keda":{"constant_value":false},"enable_metrics_server":{"constant_value":false},"enable_prometheus":{"constant_value":false},"enable_traefik":{"constant_value":false},"enable_vpa":{"constant_value":false},"enable_yunikorn":{"constant_value":false}},"module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_eks_cluster.eks_cluster","mode":"data","type":"aws_eks_cluster","name":"eks_cluster","provider_config_key":"aws","expressions":{"name":{"references":["var.eks_cluster_id"]}},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"adot_collector_haproxy":{"source":"./adot-collector-haproxy","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_haproxy_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_haproxy"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_haproxy.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_java":{"source":"./adot-collector-java","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_java_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_java"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.kubernetes-addons.module.adot_collector_java:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_java.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_memcached":{"source":"./adot-collector-memcached","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_memcached_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_memcached"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_memcached.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"adot_collector_nginx":{"source":"./adot-collector-nginx","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"amazon_prometheus_workspace_region":{"references":["var.amazon_prometheus_workspace_region"]},"helm_config":{"references":["var.adot_collector_nginx_helm_config"]}},"count_expression":{"references":["var.enable_adot_collector_nginx"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.collector","mode":"managed","type":"kubernetes_namespace_v1","name":"collector","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.adot_collector_irsa_config"]},"set_values":{"references":["local.otel_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.adot_collector_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.collector"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"Amazon Managed Prometheus Workspace's Region"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"}}}},"agones":{"source":"./agones","expressions":{"addon_context":{"references":["local.addon_context"]},"eks_worker_security_group_id":{"references":["var.eks_worker_security_group_id"]},"helm_config":{"references":["var.agones_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_agones"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_security_group_rule.agones_sg_ingress_rule","mode":"managed","type":"aws_security_group_rule","name":"agones_sg_ingress_rule","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"Allow UDP ingress from internet"},"from_port":{"references":["local.helm_config[\"gameserver_minport\"]","local.helm_config"]},"ipv6_cidr_blocks":{"constant_value":["::/0"]},"protocol":{"constant_value":"udp"},"security_group_id":{"references":["data.aws_security_group.eks_worker_group.id","data.aws_security_group.eks_worker_group"]},"to_port":{"references":["local.helm_config[\"gameserver_maxport\"]","local.helm_config"]},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.agones:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"data.aws_security_group.eks_worker_group","mode":"data","type":"aws_security_group","name":"eks_worker_group","provider_config_key":"aws","expressions":{"id":{"references":["var.eks_worker_security_group_id"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.agones.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.agones.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"eks_worker_security_group_id":{"description":"EKS Worker Security Group ID"},"helm_config":{"default":{},"description":"Helm provider config for Agones GameServer"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"argo_rollouts":{"source":"./argo-rollouts","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.argo_rollouts_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_argo_rollouts"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.argo_rollouts:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argo_rollouts.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Argo Rollouts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"argocd":{"source":"./argocd","expressions":{"addon_config":{"references":["local.argocd_addon_config"]},"addon_context":{"references":["local.addon_context"]},"admin_password_secret_name":{"references":["var.argocd_admin_password_secret_name"]},"applications":{"references":["var.argocd_applications"]},"helm_config":{"references":["var.argocd_helm_config"]}},"count_expression":{"references":["var.enable_argocd"]},"module":{"resources":[{"address":"helm_release.argocd_application","mode":"managed","type":"helm_release","name":"argocd_application","provider_config_key":"module.kubernetes-addons.module.argocd:helm","expressions":{"chart":{"references":["path.module"]},"name":{"references":["each.key"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"set":[{"name":{"constant_value":"name"},"value":{"references":["each.key"]}},{"name":{"constant_value":"project"},"value":{"references":["each.value.project","each.value"]}},{"name":{"constant_value":"source.repoUrl"},"value":{"references":["each.value.repo_url","each.value"]}},{"name":{"constant_value":"source.targetRevision"},"value":{"references":["each.value.target_revision","each.value"]}},{"name":{"constant_value":"source.path"},"value":{"references":["each.value.path","each.value"]}},{"name":{"constant_value":"source.helm.releaseName"},"value":{"references":["each.key"]}},{"name":{"constant_value":"source.helm.values"},"value":{"references":["each.value.repo_url","each.value","each.value.values","each.value","local.global_application_values","each.value.add_on_application","each.value","var.addon_config"]}},{"name":{"constant_value":"destination.server"},"value":{"references":["each.value.destination","each.value"]}}],"version":{"constant_value":"1.0.0"}},"schema_version":0,"for_each_expression":{"references":["var.applications","local.default_argocd_application"]},"depends_on":["module.helm_addon"]},{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.argocd:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"kubernetes_secret.argocd_gitops","mode":"managed","type":"kubernetes_secret","name":"argocd_gitops","provider_config_key":"module.kubernetes-addons.module.argocd:kubernetes","expressions":{"data":{"references":["each.value.repo_url","each.value","data.aws_secretsmanager_secret_version.ssh_key_version","each.key"]},"metadata":[{"labels":{"constant_value":{"argocd.argoproj.io/secret-type":"repository"}},"name":{"references":["each.key"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0,"for_each_expression":{"references":["var.applications"]},"depends_on":["module.helm_addon"]},{"address":"data.aws_secretsmanager_secret.admin_password","mode":"data","type":"aws_secretsmanager_secret","name":"admin_password","provider_config_key":"aws","expressions":{"name":{"references":["var.admin_password_secret_name"]}},"schema_version":0,"count_expression":{"references":["var.admin_password_secret_name"]}},{"address":"data.aws_secretsmanager_secret.ssh_key","mode":"data","type":"aws_secretsmanager_secret","name":"ssh_key","provider_config_key":"aws","expressions":{"name":{"references":["each.value.ssh_key_secret_name","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.applications"]}},{"address":"data.aws_secretsmanager_secret_version.admin_password_version","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_password_version","provider_config_key":"aws","expressions":{"secret_id":{"references":["data.aws_secretsmanager_secret.admin_password[0].id","data.aws_secretsmanager_secret.admin_password[0]","data.aws_secretsmanager_secret.admin_password"]}},"schema_version":0,"count_expression":{"references":["var.admin_password_secret_name"]}},{"address":"data.aws_secretsmanager_secret_version.ssh_key_version","mode":"data","type":"aws_secretsmanager_secret_version","name":"ssh_key_version","provider_config_key":"aws","expressions":{"secret_id":{"references":["data.aws_secretsmanager_secret.ssh_key","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.applications"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"set_sensitive_values":{"references":["local.set_sensitive"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.argocd:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.argocd.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_config":{"default":{},"description":"Configuration for managing add-ons via ArgoCD"},"addon_context":{"description":"Input configuration for the addon"},"admin_password_secret_name":{"default":"","description":"Name for a secret stored in AWS Secrets Manager that contains the admin password for ArgoCD."},"applications":{"default":{},"description":"ArgoCD Application config used to bootstrap a cluster."},"helm_config":{"default":{},"description":"ArgoCD Helm Chart Config values"}}}},"aws_cloudwatch_metrics":{"source":"./aws-cloudwatch-metrics","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.aws_cloudwatch_metrics_helm_config"]},"irsa_policies":{"references":["var.aws_cloudwatch_metrics_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_cloudwatch_metrics"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_cloudwatch_metrics:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_cloudwatch_metrics.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config aws-cloudwatch-metrics."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_coredns":{"source":"./aws-coredns","expressions":{"addon_config":{"references":["var.amazon_eks_coredns_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_coredns"]},"module":{"resources":[{"address":"aws_eks_addon.coredns","mode":"managed","type":"aws_eks_addon","name":"coredns","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"coredns"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed CoreDNS Add-on config"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_ebs_csi_driver":{"source":"./aws-ebs-csi-driver","expressions":{"addon_config":{"references":["var.amazon_eks_aws_ebs_csi_driver_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_aws_ebs_csi_driver"]},"module":{"resources":[{"address":"aws_eks_addon.aws_ebs_csi_driver","mode":"managed","type":"aws_eks_addon","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"aws-ebs-csi-driver"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["local.create_irsa","module.irsa_addon[0].irsa_iam_role_arn","module.irsa_addon[0]","var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0},{"address":"aws_iam_policy.aws_ebs_csi_driver","mode":"managed","type":"aws_iam_policy","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS EBS CSI Driver"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_ebs_csi_driver[0].json","data.aws_iam_policy_document.aws_ebs_csi_driver[0]","data.aws_iam_policy_document.aws_ebs_csi_driver"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0,"count_expression":{"references":["local.create_irsa"]}},{"address":"data.aws_iam_policy_document.aws_ebs_csi_driver","mode":"data","type":"aws_iam_policy_document","name":"aws_ebs_csi_driver","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:CreateSnapshot","ec2:AttachVolume","ec2:DetachVolume","ec2:ModifyVolume","ec2:DescribeAvailabilityZones","ec2:DescribeInstances","ec2:DescribeSnapshots","ec2:DescribeTags","ec2:DescribeVolumes","ec2:DescribeVolumesModifications"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["CreateVolume","CreateSnapshot"]},"variable":{"constant_value":"ec2:CreateAction"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteTags"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"aws:RequestTag/CSIVolumeName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["owned"]},"variable":{"constant_value":"aws:RequestTag/kubernetes.io/cluster/*"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"ec2:ResourceTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"ec2:ResourceTag/CSIVolumeName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["owned"]},"variable":{"constant_value":"ec2:ResourceTag/kubernetes.io/cluster/*"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteSnapshot"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*"]},"variable":{"constant_value":"ec2:ResourceTag/CSIVolumeSnapshotName"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:DeleteSnapshot"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"ec2:ResourceTag/ebs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0,"count_expression":{"references":["local.create_irsa"]}}],"module_calls":{"irsa_addon":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.aws_ebs_csi_driver[0].arn","aws_iam_policy.aws_ebs_csi_driver[0]","aws_iam_policy.aws_ebs_csi_driver","var.addon_config.additional_iam_policies","var.addon_config"]},"kubernetes_namespace":{"constant_value":"kube-system"},"kubernetes_service_account":{"constant_value":"ebs-csi-controller-sa"}},"count_expression":{"references":["local.create_irsa"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_ebs_csi_driver.module.irsa_addon:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on config for EBS CSI Driver"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_efs_csi_driver":{"source":"./aws-efs-csi-driver","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.aws_efs_csi_driver_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_efs_csi_driver"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.aws_efs_csi_driver","mode":"managed","type":"aws_iam_policy","name":"aws_efs_csi_driver","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS EFS CSI Driver"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_efs_csi_driver.json","data.aws_iam_policy_document.aws_efs_csi_driver"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_efs_csi_driver","mode":"data","type":"aws_iam_policy_document","name":"aws_efs_csi_driver","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["elasticfilesystem:DescribeAccessPoints","elasticfilesystem:DescribeFileSystems"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticfilesystem:CreateAccessPoint"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/efs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticfilesystem:DeleteAccessPoint"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:ResourceTag/efs.csi.aws.com/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_efs_csi_driver.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the aws_efs_csi_driver."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_for_fluent_bit":{"source":"./aws-for-fluentbit","expressions":{"addon_context":{"references":["local.addon_context"]},"cw_log_group_kms_key_arn":{"references":["var.aws_for_fluentbit_cw_log_group_kms_key_arn"]},"cw_log_group_name":{"references":["var.aws_for_fluentbit_cw_log_group_name"]},"cw_log_group_retention":{"references":["var.aws_for_fluentbit_cw_log_group_retention"]},"helm_config":{"references":["var.aws_for_fluentbit_helm_config"]},"irsa_policies":{"references":["var.aws_for_fluentbit_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_for_fluentbit"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"cw_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.aws_for_fluent_bit.arn","aws_cloudwatch_log_group.aws_for_fluent_bit"]},"description":"AWS Fluent Bit CloudWatch Log Group ARN"},"cw_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.aws_for_fluent_bit.name","aws_cloudwatch_log_group.aws_for_fluent_bit"]},"description":"AWS Fluent Bit CloudWatch Log Group Name"}},"resources":[{"address":"aws_cloudwatch_log_group.aws_for_fluent_bit","mode":"managed","type":"aws_cloudwatch_log_group","name":"aws_for_fluent_bit","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.cw_log_group_kms_key_arn","module.kms[0].key_arn","module.kms[0]","var.cw_log_group_kms_key_arn"]},"name":{"references":["local.log_group_name"]},"retention_in_days":{"references":["var.cw_log_group_retention"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_iam_policy.aws_for_fluent_bit","mode":"managed","type":"aws_iam_policy","name":"aws_for_fluent_bit","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for AWS for FluentBit"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.irsa.json","data.aws_iam_policy_document.irsa"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.irsa","mode":"data","type":"aws_iam_policy_document","name":"irsa","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]},"sid":{"constant_value":"PutLogEvents"}},{"actions":{"constant_value":["logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:CreateLogGroup"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]},"sid":{"constant_value":"CreateCWLogs"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.kms","mode":"data","type":"aws_iam_policy_document","name":"kms","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","data.aws_iam_session_context.current.issuer_arn","data.aws_iam_session_context.current"]},"type":{"constant_value":"AWS"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Enable IAM User Permissions"}},{"actions":{"constant_value":["kms:Encrypt*","kms:Decrypt*","kms:ReEncrypt*","kms:GenerateDataKey*","kms:Describe*"]},"condition":[{"test":{"constant_value":"ArnEquals"},"values":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_region_name","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","local.log_group_name"]},"variable":{"constant_value":"kms:EncryptionContext:aws:logs:arn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["var.addon_context.aws_region_name","var.addon_context"]},"type":{"constant_value":"Service"}}],"resources":{"constant_value":["*"]},"sid":{"constant_value":"Enable Encryption for LogGroup"}}]},"schema_version":0},{"address":"data.aws_iam_session_context.current","mode":"data","type":"aws_iam_session_context","name":"current","provider_config_key":"aws","expressions":{"arn":{"references":["var.addon_context.aws_caller_identity_arn","var.addon_context"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_for_fluent_bit.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}},"kms":{"source":"../../../modules/aws-kms","expressions":{"alias":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"description":{"constant_value":"EKS Workers FluentBit CloudWatch Log group KMS Key"},"policy":{"references":["data.aws_iam_policy_document.kms.json","data.aws_iam_policy_document.kms"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"count_expression":{"references":["var.cw_log_group_kms_key_arn"]},"module":{"outputs":{"key_arn":{"expression":{"references":["aws_kms_key.this.arn","aws_kms_key.this"]},"description":"The Amazon Resource Name (ARN) of the key."},"key_id":{"expression":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]},"description":"The globally unique identifier for the key."}},"resources":[{"address":"aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.alias"]},"target_key_id":{"references":["aws_kms_key.this.key_id","aws_kms_key.this"]}},"schema_version":0},{"address":"aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"policy":{"references":["var.policy"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"alias":{"description":"The display name of the alias. The name must start with the word 'alias' followed by a forward slash (alias/)"},"deletion_window_in_days":{"default":30,"description":"The waiting period, specified in number of days. After the waiting period ends, AWS KMS deletes the KMS key. If you specify a value, it must be between 7 and 30, inclusive. If you do not specify a value, it defaults to 30."},"description":{"description":"The description of the key."},"enable_key_rotation":{"default":true,"description":"Specifies whether annual key rotation is enabled."},"policy":{"description":"A valid KMS key policy JSON document. Although this is a key policy, not an IAM policy, an aws_iam_policy_document, in the form that designates a principal, can be used."},"tags":{"description":"A map of tags to assign to the object."}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"cw_log_group_kms_key_arn":{"default":null,"description":"FluentBit CloudWatch Log group KMS Key"},"cw_log_group_name":{"default":null,"description":"FluentBit CloudWatch Log group name"},"cw_log_group_retention":{"default":90,"description":"FluentBit CloudWatch Log group retention period"},"helm_config":{"default":{},"description":"Helm provider config aws_for_fluent_bit."},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_kube_proxy":{"source":"./aws-kube-proxy","expressions":{"addon_config":{"references":["var.amazon_eks_kube_proxy_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_amazon_eks_kube_proxy"]},"module":{"resources":[{"address":"aws_eks_addon.kube_proxy","mode":"managed","type":"aws_eks_addon","name":"kube_proxy","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"kube-proxy"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on config for Kube Proxy"},"addon_context":{"description":"Input configuration for the addon"}}}},"aws_load_balancer_controller":{"source":"./aws-load-balancer-controller","expressions":{"addon_context":{"references":["local.addon_context","local.amazon_container_image_registry_uris","data.aws_region.current.name","data.aws_region.current"]},"helm_config":{"references":["var.aws_load_balancer_controller_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_load_balancer_controller"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"ingress_name":{"expression":{"references":["local.helm_config[\"name\"]","local.helm_config"]},"description":"AWS LoadBalancer Controller Ingress Name"},"ingress_namespace":{"expression":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"description":"AWS LoadBalancer Controller Ingress Namespace"}},"resources":[{"address":"aws_iam_policy.aws_load_balancer_controller","mode":"managed","type":"aws_iam_policy","name":"aws_load_balancer_controller","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allows lb controller to manage ALB and NLB"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.aws_lb.json","data.aws_iam_policy_document.aws_lb"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_lb","mode":"data","type":"aws_iam_policy_document","name":"aws_lb","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["iam:CreateServiceLinkedRole","ec2:DescribeAccountAttributes","ec2:DescribeAddresses","ec2:DescribeInternetGateways","ec2:DescribeAvailabilityZones","ec2:DescribeVpcs","ec2:DescribeSubnets","ec2:DescribeSecurityGroups","ec2:DescribeInstances","ec2:DescribeNetworkInterfaces","ec2:DescribeTags","ec2:GetCoipPoolUsage","ec2:DescribeCoipPools","elasticloadbalancing:DescribeLoadBalancers","elasticloadbalancing:DescribeLoadBalancerAttributes","elasticloadbalancing:DescribeListeners","elasticloadbalancing:DescribeListenerCertificates","elasticloadbalancing:DescribeSSLPolicies","elasticloadbalancing:DescribeRules","elasticloadbalancing:DescribeTargetGroups","elasticloadbalancing:DescribeTargetGroupAttributes","elasticloadbalancing:DescribeTargetHealth","elasticloadbalancing:DescribeTags"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["cognito-idp:DescribeUserPoolClient","acm:ListCertificates","acm:DescribeCertificate","iam:ListServerCertificates","iam:GetServerCertificate","waf-regional:GetWebACL","waf-regional:GetWebACLForResource","waf-regional:AssociateWebACL","waf-regional:DisassociateWebACL","wafv2:GetWebACL","wafv2:GetWebACLForResource","wafv2:AssociateWebACL","wafv2:DisassociateWebACL","shield:GetSubscriptionState","shield:DescribeProtection","shield:CreateProtection","shield:DeleteProtection"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateSecurityGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["CreateSecurityGroup"]},"variable":{"constant_value":"ec2:CreateAction"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags","ec2:DeleteTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/ingress.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags","elasticloadbalancing:DeleteTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/ingress.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:CreateTags","ec2:DeleteTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"Null"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress","ec2:DeleteSecurityGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:CreateLoadBalancer","elasticloadbalancing:CreateTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:CreateListener","elasticloadbalancing:DeleteListener","elasticloadbalancing:CreateRule","elasticloadbalancing:DeleteRule"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:AddTags","elasticloadbalancing:RemoveTags"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["true"]},"variable":{"constant_value":"aws:RequestTag/elbv2.k8s.aws/cluster"}},{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:ModifyLoadBalancerAttributes","elasticloadbalancing:SetIpAddressType","elasticloadbalancing:SetSecurityGroups","elasticloadbalancing:SetSubnets","elasticloadbalancing:DeleteLoadBalancer","elasticloadbalancing:ModifyTargetGroup","elasticloadbalancing:ModifyTargetGroupAttributes","elasticloadbalancing:DeleteTargetGroup"]},"condition":[{"test":{"constant_value":"Null"},"values":{"constant_value":["false"]},"variable":{"constant_value":"aws:ResourceTag/elbv2.k8s.aws/cluster"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:RegisterTargets","elasticloadbalancing:DeregisterTargets"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":""}},{"actions":{"constant_value":["elasticloadbalancing:SetWebAcl","elasticloadbalancing:ModifyListener","elasticloadbalancing:AddListenerCertificates","elasticloadbalancing:RemoveListenerCertificates","elasticloadbalancing:ModifyRule"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_load_balancer_controller.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon."},"helm_config":{"default":{},"description":"Helm provider config for the aws_load_balancer_controller."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_node_termination_handler":{"source":"./aws-node-termination-handler","expressions":{"addon_context":{"references":["local.addon_context"]},"autoscaling_group_names":{"references":["var.auto_scaling_group_names"]},"helm_config":{"references":["var.aws_node_termination_handler_helm_config"]},"irsa_policies":{"references":["var.aws_node_termination_handler_irsa_policies"]}},"count_expression":{"references":["var.enable_aws_node_termination_handler","var.auto_scaling_group_names"]},"module":{"resources":[{"address":"aws_autoscaling_group_tag.aws_node_termination_handler_tag","mode":"managed","type":"aws_autoscaling_group_tag","name":"aws_node_termination_handler_tag","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["var.autoscaling_group_names","count.index"]},"tag":[{"key":{"constant_value":"aws-node-termination-handler/managed"},"propagate_at_launch":{"constant_value":true},"value":{"constant_value":"true"}}]},"schema_version":0,"count_expression":{"references":["var.autoscaling_group_names"]}},{"address":"aws_autoscaling_lifecycle_hook.aws_node_termination_handler_hook","mode":"managed","type":"aws_autoscaling_lifecycle_hook","name":"aws_node_termination_handler_hook","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["var.autoscaling_group_names","count.index"]},"default_result":{"constant_value":"CONTINUE"},"heartbeat_timeout":{"constant_value":300},"lifecycle_transition":{"constant_value":"autoscaling:EC2_INSTANCE_TERMINATING"},"name":{"constant_value":"aws_node_termination_handler_hook"}},"schema_version":0,"count_expression":{"references":["var.autoscaling_group_names"]}},{"address":"aws_cloudwatch_event_rule.aws_node_termination_handler_rule","mode":"managed","type":"aws_cloudwatch_event_rule","name":"aws_node_termination_handler_rule","provider_config_key":"aws","expressions":{"event_pattern":{"references":["local.event_rules","count.index"]},"name":{"references":["local.event_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.event_rules"]}},{"address":"aws_cloudwatch_event_target.aws_node_termination_handler_rule_target","mode":"managed","type":"aws_cloudwatch_event_target","name":"aws_node_termination_handler_rule_target","provider_config_key":"aws","expressions":{"arn":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.arn","aws_sqs_queue.aws_node_termination_handler_queue"]},"rule":{"references":["aws_cloudwatch_event_rule.aws_node_termination_handler_rule","count.index"]}},"schema_version":1,"count_expression":{"references":["aws_cloudwatch_event_rule.aws_node_termination_handler_rule"]}},{"address":"aws_iam_policy.aws_node_termination_handler_irsa","mode":"managed","type":"aws_iam_policy","name":"aws_node_termination_handler_irsa","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM role policy for AWS Node Termination Handler"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.irsa_policy.json","data.aws_iam_policy_document.irsa_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_sqs_queue.aws_node_termination_handler_queue","mode":"managed","type":"aws_sqs_queue","name":"aws_node_termination_handler_queue","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":"300"},"name_prefix":{"constant_value":"aws_node_termination_handler"},"sqs_managed_sse_enabled":{"constant_value":true},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"aws_sqs_queue_policy.aws_node_termination_handler_queue_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"aws_node_termination_handler_queue_policy","provider_config_key":"aws","expressions":{"policy":{"references":["data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document.json","data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document"]},"queue_url":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.id","aws_sqs_queue.aws_node_termination_handler_queue"]}},"schema_version":1},{"address":"data.aws_iam_policy_document.aws_node_termination_handler_queue_policy_document","mode":"data","type":"aws_iam_policy_document","name":"aws_node_termination_handler_queue_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:SendMessage"]},"principals":[{"identifiers":{"constant_value":["events.amazonaws.com","sqs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_sqs_queue.aws_node_termination_handler_queue.arn","aws_sqs_queue.aws_node_termination_handler_queue"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.irsa_policy","mode":"data","type":"aws_iam_policy_document","name":"irsa_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["autoscaling:CompleteLifecycleAction","autoscaling:DescribeAutoScalingInstances","autoscaling:DescribeTags","ec2:DescribeInstances","sqs:DeleteMessage","sqs:ReceiveMessage"]},"resources":{"constant_value":["*"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_node_termination_handler.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"autoscaling_group_names":{"description":"EKS Node Group ASG names"},"helm_config":{"default":{},"description":"AWS Node Termination Handler Helm Chart Configuration"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"}}}},"aws_privateca_issuer":{"source":"./aws-privateca-issuer","expressions":{"addon_context":{"references":["local.addon_context"]},"aws_privateca_acmca_arn":{"references":["var.aws_privateca_acmca_arn"]},"helm_config":{"references":["var.aws_privateca_issuer_helm_config"]},"irsa_policies":{"references":["var.aws_privateca_issuer_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_aws_privateca_issuer"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.aws_privateca_issuer","mode":"managed","type":"aws_iam_policy","name":"aws_privateca_issuer","provider_config_key":"aws","expressions":{"description":{"constant_value":"AWS PCA issuer IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"policy":{"references":["data.aws_iam_policy_document.aws_privateca_issuer.json","data.aws_iam_policy_document.aws_privateca_issuer"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.aws_privateca_issuer","mode":"data","type":"aws_iam_policy_document","name":"aws_privateca_issuer","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["acm-pca:DescribeCertificateAuthority","acm-pca:GetCertificate","acm-pca:IssueCertificate"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.aws_privateca_acmca_arn"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_privateca_issuer.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"aws_privateca_acmca_arn":{"description":"ARN of AWS ACM PCA"},"helm_config":{"default":{},"description":"AWS PCA Issuer Helm Config"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"aws_vpc_cni":{"source":"./aws-vpc-cni","expressions":{"addon_config":{"references":["var.amazon_eks_vpc_cni_config"]},"addon_context":{"references":["local.addon_context"]},"enable_ipv6":{"references":["var.enable_ipv6"]}},"count_expression":{"references":["var.enable_amazon_eks_vpc_cni"]},"module":{"resources":[{"address":"aws_eks_addon.vpc_cni","mode":"managed","type":"aws_eks_addon","name":"vpc_cni","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"vpc-cni"},"addon_version":{"references":["var.addon_config.addon_version","var.addon_config"]},"cluster_name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"preserve":{"references":["var.addon_config.preserve","var.addon_config"]},"resolve_conflicts":{"references":["var.addon_config.resolve_conflicts","var.addon_config"]},"service_account_role_arn":{"references":["local.create_irsa","module.irsa_addon[0].irsa_iam_role_arn","module.irsa_addon[0]","var.addon_config.service_account_role_arn","var.addon_config"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0},{"address":"aws_iam_policy.cni_ipv6_policy","mode":"managed","type":"aws_iam_policy","name":"cni_ipv6_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM policy for EKS CNI to assign IPV6 addresses"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.ipv6_policy[0].json","data.aws_iam_policy_document.ipv6_policy[0]","data.aws_iam_policy_document.ipv6_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context","var.addon_config.tags","var.addon_config"]}},"schema_version":0,"count_expression":{"references":["local.create_irsa","var.enable_ipv6"]}},{"address":"data.aws_iam_policy_document.ipv6_policy","mode":"data","type":"aws_iam_policy_document","name":"ipv6_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:AssignIpv6Addresses","ec2:DescribeInstances","ec2:DescribeTags","ec2:DescribeNetworkInterfaces","ec2:DescribeInstanceTypes"]},"resources":{"constant_value":["*"]},"sid":{"constant_value":"IpV6"}},{"actions":{"constant_value":["ec2:CreateTags"]},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":"CreateTags"}}]},"schema_version":0,"count_expression":{"references":["var.enable_ipv6"]}}],"module_calls":{"irsa_addon":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["var.addon_context.aws_partition_id","var.addon_context","local.cni_ipv6_policy","var.addon_config.additional_iam_policies","var.addon_config"]},"kubernetes_namespace":{"constant_value":"kube-system"},"kubernetes_service_account":{"constant_value":"aws-node"}},"count_expression":{"references":["local.create_irsa"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_vpc_cni.module.irsa_addon:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.aws_vpc_cni.module.irsa_addon:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_config":{"default":{},"description":"Amazon EKS Managed Add-on"},"addon_context":{"description":"Input configuration for the addon"},"enable_ipv6":{"default":false,"description":"Enable IPV6 CNI policy"}}}},"cert_manager":{"source":"./cert-manager","expressions":{"addon_context":{"references":["local.addon_context"]},"domain_names":{"references":["var.cert_manager_domain_names"]},"helm_config":{"references":["var.cert_manager_helm_config"]},"install_letsencrypt_issuers":{"references":["var.cert_manager_install_letsencrypt_issuers"]},"irsa_policies":{"references":["var.cert_manager_irsa_policies"]},"letsencrypt_email":{"references":["var.cert_manager_letsencrypt_email"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_cert_manager"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.cert_manager","mode":"managed","type":"aws_iam_policy","name":"cert_manager","provider_config_key":"aws","expressions":{"description":{"constant_value":"cert-manager IAM policy."},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.cert_manager_iam_policy_document.json","data.aws_iam_policy_document.cert_manager_iam_policy_document"]}},"schema_version":0},{"address":"helm_release.cert_manager_ca","mode":"managed","type":"helm_release","name":"cert_manager_ca","provider_config_key":"module.kubernetes-addons.module.cert_manager:helm","expressions":{"chart":{"references":["path.module"]},"name":{"constant_value":"cert-manager-ca"},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"version":{"constant_value":"0.2.0"}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.helm_addon"]},{"address":"helm_release.cert_manager_letsencrypt","mode":"managed","type":"helm_release","name":"cert_manager_letsencrypt","provider_config_key":"module.kubernetes-addons.module.cert_manager:helm","expressions":{"chart":{"references":["path.module"]},"name":{"constant_value":"cert-manager-letsencrypt"},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"set":[{"name":{"constant_value":"email"},"type":{"constant_value":"string"},"value":{"references":["var.letsencrypt_email"]}},{"name":{"constant_value":"dnsZones"},"type":{"constant_value":"string"},"value":{"references":["var.domain_names"]}}],"version":{"constant_value":"0.1.0"}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops","var.install_letsencrypt_issuers"]},"depends_on":["module.helm_addon"]},{"address":"data.aws_iam_policy_document.cert_manager_iam_policy_document","mode":"data","type":"aws_iam_policy_document","name":"cert_manager_iam_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["route53:GetChange"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["arn:aws:route53:::change/*"]}},{"actions":{"constant_value":["route53:ListHostedZonesByName"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_route53_zone.selected","mode":"data","type":"aws_route53_zone","name":"selected","provider_config_key":"aws","expressions":{"name":{"references":["each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.domain_names"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.cert_manager:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cert_manager.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"domain_names":{"default":[],"description":"Domain names of the Route53 hosted zone to use with cert-manager."},"helm_config":{"default":{},"description":"cert-manager Helm chart configuration"},"install_letsencrypt_issuers":{"default":true,"description":"Install Let's Encrypt Cluster Issuers."},"irsa_policies":{"default":[],"description":"Additional IAM policies used for the add-on service account."},"letsencrypt_email":{"default":"","description":"Email address for expiration emails from Let's Encrypt."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"cluster_autoscaler":{"source":"./cluster-autoscaler","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.cluster_autoscaler_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_cluster_autoscaler"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.cluster_autoscaler","mode":"managed","type":"aws_iam_policy","name":"cluster_autoscaler","provider_config_key":"aws","expressions":{"description":{"constant_value":"Cluster Autoscaler IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"policy":{"references":["data.aws_iam_policy_document.cluster_autoscaler.json","data.aws_iam_policy_document.cluster_autoscaler"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.cluster_autoscaler","mode":"data","type":"aws_iam_policy_document","name":"cluster_autoscaler","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["autoscaling:DescribeAutoScalingGroups","autoscaling:DescribeAutoScalingInstances","autoscaling:DescribeLaunchConfigurations","autoscaling:DescribeTags","ec2:DescribeInstanceTypes","ec2:DescribeLaunchTemplateVersions","autoscaling:SetDesiredCapacity","autoscaling:TerminateInstanceInAutoScalingGroup"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.cluster_autoscaler.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Cluster Autoscaler Helm Config"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"crossplane":{"source":"./crossplane","expressions":{"account_id":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"addon_context":{"references":["local.addon_context"]},"aws_partition":{"references":["data.aws_partition.current.id","data.aws_partition.current"]},"aws_provider":{"references":["var.crossplane_aws_provider"]},"helm_config":{"references":["var.crossplane_helm_config"]},"jet_aws_provider":{"references":["var.crossplane_jet_aws_provider"]}},"count_expression":{"references":["var.enable_crossplane"]},"module":{"resources":[{"address":"aws_iam_policy.aws_provider","mode":"managed","type":"aws_iam_policy","name":"aws_provider","provider_config_key":"aws","expressions":{"description":{"constant_value":"Crossplane AWS Provider IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.aws_provider_sa"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]}},{"address":"aws_iam_policy.jet_aws_provider","mode":"managed","type":"aws_iam_policy","name":"jet_aws_provider","provider_config_key":"aws","expressions":{"description":{"constant_value":"Crossplane Jet AWS Provider IAM policy"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.jet_aws_provider_sa"]},"policy":{"references":["data.aws_iam_policy_document.s3_policy.json","data.aws_iam_policy_document.s3_policy"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]}},{"address":"kubectl_manifest.aws_controller_config","mode":"managed","type":"kubectl_manifest","name":"aws_controller_config","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","var.addon_context.eks_cluster_id","var.addon_context","local.aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["module.helm_addon"]},{"address":"kubectl_manifest.aws_provider","mode":"managed","type":"kubectl_manifest","name":"aws_provider","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"wait":{"constant_value":true},"yaml_body":{"references":["path.module","var.aws_provider.provider_aws_version","var.aws_provider","local.aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["kubectl_manifest.aws_controller_config"]},{"address":"kubectl_manifest.aws_provider_config","mode":"managed","type":"kubectl_manifest","name":"aws_provider_config","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module"]}},"schema_version":1,"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"depends_on":["kubectl_manifest.aws_provider","time_sleep.wait_30_seconds"]},{"address":"kubectl_manifest.jet_aws_controller_config","mode":"managed","type":"kubectl_manifest","name":"jet_aws_controller_config","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module","local.aws_current_partition","local.aws_current_account_id","var.addon_context.eks_cluster_id","var.addon_context","local.jet_aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["module.helm_addon"]},{"address":"kubectl_manifest.jet_aws_provider","mode":"managed","type":"kubectl_manifest","name":"jet_aws_provider","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"wait":{"constant_value":true},"yaml_body":{"references":["path.module","var.jet_aws_provider.provider_aws_version","var.jet_aws_provider","local.jet_aws_provider_sa"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["kubectl_manifest.jet_aws_controller_config"]},{"address":"kubectl_manifest.jet_aws_provider_config","mode":"managed","type":"kubectl_manifest","name":"jet_aws_provider_config","provider_config_key":"module.kubernetes-addons.module.crossplane:kubectl","expressions":{"yaml_body":{"references":["path.module"]}},"schema_version":1,"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"depends_on":["kubectl_manifest.jet_aws_provider"]},{"address":"kubernetes_namespace_v1.crossplane","mode":"managed","type":"kubernetes_namespace_v1","name":"crossplane","provider_config_key":"module.kubernetes-addons.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.namespace"]}}]},"schema_version":0},{"address":"time_sleep.wait_30_seconds","mode":"managed","type":"time_sleep","name":"wait_30_seconds","provider_config_key":"module.kubernetes-addons.module.crossplane:time","expressions":{"create_duration":{"constant_value":"30s"}},"schema_version":0,"depends_on":["kubectl_manifest.aws_provider"]},{"address":"data.aws_iam_policy_document.s3_policy","mode":"data","type":"aws_iam_policy_document","name":"s3_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:Get*","s3:Put*","s3:CreateBucket","s3:ListBucket","s3:DeleteObject","s3:DeleteBucket","s3:DeleteObjectVersion"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context"]},"sid":{"constant_value":"VisualEditor0"}},{"actions":{"constant_value":["s3:ListAllMyBuckets"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"VisualEditor1"}}]},"schema_version":0}],"module_calls":{"aws_provider_irsa":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.aws_provider[0].arn","aws_iam_policy.aws_provider[0]","aws_iam_policy.aws_provider","var.aws_provider.additional_irsa_policies","var.aws_provider"]},"kubernetes_namespace":{"references":["local.namespace"]},"kubernetes_service_account":{"references":["local.aws_provider_sa"]}},"count_expression":{"references":["var.aws_provider.enable","var.aws_provider"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubectl_manifest.aws_provider"]},"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.crossplane.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.crossplane"]},"jet_aws_provider_irsa":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"create_kubernetes_service_account":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.jet_aws_provider[0].arn","aws_iam_policy.jet_aws_provider[0]","aws_iam_policy.jet_aws_provider","var.jet_aws_provider.additional_irsa_policies","var.jet_aws_provider"]},"kubernetes_namespace":{"references":["local.namespace"]},"kubernetes_service_account":{"references":["local.jet_aws_provider_sa"]}},"count_expression":{"references":["var.jet_aws_provider.enable","var.jet_aws_provider"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.crossplane:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubectl_manifest.jet_aws_provider"]}},"variables":{"account_id":{"description":"Current AWS Account ID"},"addon_context":{"description":"Input configuration for the addon"},"aws_partition":{"description":"AWS Identifier of the current partition e.g., aws or aws-cn"},"aws_provider":{"description":"AWS Provider config for Crossplane"},"helm_config":{"default":{},"description":"Helm provider config for the Argo Rollouts"},"jet_aws_provider":{"description":"AWS Provider Jet AWS config for Crossplane"}}}},"external_dns":{"source":"./external-dns","expressions":{"addon_context":{"references":["local.addon_context"]},"domain_name":{"references":["var.eks_cluster_domain"]},"helm_config":{"references":["var.external_dns_helm_config"]},"irsa_policies":{"references":["var.external_dns_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_external_dns"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with GitOps"},"zone_filter_ids":{"expression":{"references":["local.zone_filter_ids"]},"description":"Zone Filter Ids for the add-on"}},"resources":[{"address":"aws_iam_policy.external_dns","mode":"managed","type":"aws_iam_policy","name":"external_dns","provider_config_key":"aws","expressions":{"description":{"constant_value":"External DNS IAM policy."},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.external_dns_iam_policy_document.json","data.aws_iam_policy_document.external_dns_iam_policy_document"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.external_dns_iam_policy_document","mode":"data","type":"aws_iam_policy_document","name":"external_dns_iam_policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["route53:ChangeResourceRecordSets","route53:ListResourceRecordSets"]},"effect":{"constant_value":"Allow"},"resources":{"references":["data.aws_route53_zone.selected.arn","data.aws_route53_zone.selected"]}},{"actions":{"constant_value":["route53:ListHostedZones"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_route53_zone.selected","mode":"data","type":"aws_route53_zone","name":"selected","provider_config_key":"aws","expressions":{"name":{"references":["var.domain_name"]}},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.external_dns.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.external_dns.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"domain_name":{"description":"Domain name of the Route53 hosted zone to use with External DNS."},"helm_config":{"default":{},"description":"External DNS Helm Configuration"},"irsa_policies":{"description":"Additional IAM policies used for the add-on service account."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"fargate_fluentbit":{"source":"./fargate-fluentbit","expressions":{"addon_config":{"references":["var.fargate_fluentbit_addon_config"]},"addon_context":{"references":["local.addon_context"]}},"count_expression":{"references":["var.enable_fargate_fluentbit"]},"module":{"resources":[{"address":"kubernetes_config_map.aws_logging","mode":"managed","type":"kubernetes_config_map","name":"aws_logging","provider_config_key":"module.kubernetes-addons.module.fargate_fluentbit:kubernetes","expressions":{"data":{"references":["local.config[\"parsers_conf\"]","local.config","local.config[\"filters_conf\"]","local.config","local.config[\"output_conf\"]","local.config"]},"metadata":[{"name":{"constant_value":"aws-logging"},"namespace":{"references":["kubernetes_namespace.aws_observability.id","kubernetes_namespace.aws_observability"]}}]},"schema_version":0},{"address":"kubernetes_namespace.aws_observability","mode":"managed","type":"kubernetes_namespace","name":"aws_observability","provider_config_key":"module.kubernetes-addons.module.fargate_fluentbit:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints","aws-observability":"enabled"}},"name":{"constant_value":"aws-observability"}}]},"schema_version":0}],"variables":{"addon_config":{"default":{},"description":"Fargate fluentbit configuration"},"addon_context":{"description":"Input configuration for the addon"}}}},"ingress_nginx":{"source":"./ingress-nginx","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.ingress_nginx_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_ingress_nginx"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.ingress_nginx:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ingress_nginx.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Ingress NGINX Helm Configuration"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"karpenter":{"source":"./karpenter","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.karpenter_helm_config"]},"irsa_policies":{"references":["var.karpenter_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]},"node_iam_instance_profile":{"references":["var.karpenter_node_iam_instance_profile"]}},"count_expression":{"references":["var.enable_karpenter"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.karpenter","mode":"managed","type":"aws_iam_policy","name":"karpenter","provider_config_key":"aws","expressions":{"description":{"constant_value":"IAM Policy for Karpenter"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.karpenter.json","data.aws_iam_policy_document.karpenter"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.karpenter","mode":"data","type":"aws_iam_policy_document","name":"karpenter","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:CreateLaunchTemplate","ec2:CreateFleet","ec2:RunInstances","ec2:CreateTags","iam:PassRole","ec2:DeleteLaunchTemplate","ec2:DescribeLaunchTemplates","ec2:DescribeInstances","ec2:DescribeSecurityGroups","ec2:DescribeSubnets","ec2:DescribeInstanceTypes","ec2:DescribeInstanceTypeOfferings","ec2:DescribeAvailabilityZones","ssm:GetParameter"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"Karpenter"}},{"actions":{"constant_value":["ec2:TerminateInstances"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["*karpenter*"]},"variable":{"constant_value":"ec2:ResourceTag/Name"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"ConditionalEC2Termination"}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.karpenter.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.karpenter.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Karpenter"},"irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"node_iam_instance_profile":{"default":"","description":"Karpenter Node IAM Instance profile id"}}}},"keda":{"source":"./keda","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.keda_helm_config"]},"irsa_policies":{"references":["var.keda_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_keda"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.keda_irsa","mode":"managed","type":"aws_iam_policy","name":"keda_irsa","provider_config_key":"aws","expressions":{"description":{"constant_value":"KEDA IAM role policy for SQS and CloudWatch"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","local.helm_config[\"name\"]","local.helm_config"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.keda_irsa.json","data.aws_iam_policy_document.keda_irsa"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.keda_irsa","mode":"data","type":"aws_iam_policy_document","name":"keda_irsa","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sqs:GetQueueUrl","sqs:ListDeadLetterSourceQueues","sqs:ReceiveMessage","sqs:GetQueueAttributes","sqs:ListQueueTags","cloudwatch:DescribeAlarmHistory","cloudwatch:GetDashboard","cloudwatch:GetInsightRuleReport","cloudwatch:ListTagsForResource","cloudwatch:DescribeAlarms","cloudwatch:GetMetricStream"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context","var.addon_context.aws_partition_id","var.addon_context","var.addon_context.aws_caller_identity_account_id","var.addon_context"]}},{"actions":{"constant_value":["cloudwatch:DescribeInsightRules","sqs:ListQueues","cloudwatch:GetMetricData","cloudwatch:ListMetricStreams","cloudwatch:DescribeAlarmsForMetric","cloudwatch:ListDashboards","cloudwatch:GetMetricStatistics","cloudwatch:GetMetricWidgetImage","cloudwatch:ListMetrics","cloudwatch:DescribeAnomalyDetectors"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":""}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.keda.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.keda.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the KEDA"},"irsa_policies":{"default":[],"description":"IAM Policy ARN list for any IRSA policies"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"kubernetes_dashboard":{"source":"./kubernetes-dashboard","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.kubernetes_dashboard_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_kubernetes_dashboard"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubectl_manifest.sa_config","mode":"managed","type":"kubectl_manifest","name":"sa_config","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard:kubectl","expressions":{"yaml_body":{"references":["path.module","local.service_account_name","local.helm_config[\"namespace\"]","local.helm_config"]}},"schema_version":1,"depends_on":["module.helm_addon"]}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.kubernetes_dashboard.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for the Kubernetes Dashboard"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"metrics_server":{"source":"./metrics-server","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.metrics_server_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_metrics_server"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.metrics_server:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0,"count_expression":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.metrics_server.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.metrics_server.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Metrics Server"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"ondat":{"source":"ondat/ondat-addon/eksblueprints","expressions":{"addon_context":{"references":["local.addon_context"]},"admin_password":{"references":["var.ondat_admin_password"]},"admin_username":{"references":["var.ondat_admin_username"]},"create_cluster":{"references":["var.ondat_create_cluster"]},"etcd_ca":{"references":["var.ondat_etcd_ca"]},"etcd_cert":{"references":["var.ondat_etcd_cert"]},"etcd_endpoints":{"references":["var.ondat_etcd_endpoints"]},"etcd_key":{"references":["var.ondat_etcd_key"]},"helm_config":{"references":["var.ondat_helm_config"]},"irsa_policies":{"references":["var.ondat_irsa_policies"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_ondat"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace.storageos","mode":"managed","type":"kubernetes_namespace","name":"storageos","provider_config_key":"module.kubernetes-addons.module.ondat:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app":"storageos"}},"name":{"constant_value":"storageos"}}]},"schema_version":0},{"address":"kubernetes_secret.etcd","mode":"managed","type":"kubernetes_secret","name":"etcd","provider_config_key":"module.kubernetes-addons.module.ondat:kubernetes","expressions":{"data":{"references":["var.etcd_ca","var.etcd_cert","var.etcd_key"]},"metadata":[{"labels":{"constant_value":{"app":"storageos"}},"name":{"constant_value":"storageos-etcd"},"namespace":{"references":["local.namespace"]}}],"type":{"constant_value":"kubernetes.io/storageos"}},"schema_version":0,"count_expression":{"references":["var.create_cluster"]}},{"address":"data.aws_eks_cluster.eks","mode":"data","type":"aws_eks_cluster","name":"eks","provider_config_key":"aws","expressions":{"name":{"references":["local.eks_cluster_id"]}},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"helm_addon":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v4.0.1","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"references":["local.irsa_config"]},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_sensitive_values":{"references":["local.set_sensitive_values"]},"set_values":{"references":["local.set_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.ondat.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.ondat.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"admin_password":{"default":"storageos","description":"Password for the Ondat admin user","sensitive":true},"admin_username":{"default":"storageos","description":"Username for the Ondat admin user"},"create_cluster":{"default":true,"description":"Determines if the StorageOSCluster and secrets should be created"},"etcd_ca":{"default":"","description":"The PEM encoded CA for Ondat's etcd"},"etcd_cert":{"default":"","description":"The PEM encoded client certificate for Ondat's etcd"},"etcd_endpoints":{"default":["https://storageos-etcd.storageos.svc.cluster.local:2379"],"description":"A list of etcd endpoints for Ondat"},"etcd_key":{"default":"","description":"The PEM encoded client key for Ondat's etcd","sensitive":true},"helm_config":{"default":{},"description":"Helm provider config for the ondat addon"},"irsa_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_policies":{"default":[],"description":"IAM policy ARNs for Ondat IRSA"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}},"version_constraint":"0.0.4"},"opentelemetry_operator":{"source":"./opentelemetry-operator","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.opentelemetry_operator_helm_config"]}},"count_expression":{"references":["var.enable_opentelemetry_operator"]},"module":{"resources":[{"address":"kubernetes_namespace_v1.prometheus","mode":"managed","type":"kubernetes_namespace_v1","name":"prometheus","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"operator":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator.module.operator:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.opentelemetry_operator.module.operator.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for ADOT Operator AddOn"}}}},"prometheus":{"source":"./prometheus","expressions":{"addon_context":{"references":["local.addon_context"]},"amazon_prometheus_workspace_endpoint":{"references":["var.amazon_prometheus_workspace_endpoint"]},"enable_amazon_prometheus":{"references":["var.enable_amazon_prometheus"]},"helm_config":{"references":["var.prometheus_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_prometheus"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"aws_iam_policy.ingest","mode":"managed","type":"aws_iam_policy","name":"ingest","provider_config_key":"aws","expressions":{"description":{"constant_value":"Set up the permission policy that grants ingest (remote write) permissions for AMP workspace"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.ingest.json","data.aws_iam_policy_document.ingest"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.enable_amazon_prometheus"]}},{"address":"aws_iam_policy.query","mode":"managed","type":"aws_iam_policy","name":"query","provider_config_key":"aws","expressions":{"description":{"constant_value":"Set up the permission policy that grants query permissions for AMP workspace"},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context"]},"policy":{"references":["data.aws_iam_policy_document.query.json","data.aws_iam_policy_document.query"]},"tags":{"references":["var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.enable_amazon_prometheus"]}},{"address":"kubernetes_namespace_v1.prometheus","mode":"managed","type":"kubernetes_namespace_v1","name":"prometheus","provider_config_key":"module.kubernetes-addons.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.ingest","mode":"data","type":"aws_iam_policy_document","name":"ingest","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["aps:RemoteWrite","aps:GetSeries","aps:GetLabels","aps:GetMetricMetadata"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.query","mode":"data","type":"aws_iam_policy_document","name":"query","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["aps:QueryMetrics","aps:GetSeries","aps:GetLabels","aps:GetMetricMetadata"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]},"set_values":{"references":["local.amp_config_values"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.prometheus.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]},"irsa_amp_ingest":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.ingest[0].arn","aws_iam_policy.ingest[0]","aws_iam_policy.ingest"]},"kubernetes_namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"kubernetes_service_account":{"references":["local.amazon_prometheus_ingest_service_account"]}},"count_expression":{"references":["var.enable_amazon_prometheus"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]},"irsa_amp_query":{"source":"../../../modules/irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"constant_value":false},"irsa_iam_policies":{"references":["aws_iam_policy.query[0].arn","aws_iam_policy.query[0]","aws_iam_policy.query"]},"kubernetes_namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"kubernetes_service_account":{"constant_value":"amp-query"}},"count_expression":{"references":["var.enable_amazon_prometheus"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.prometheus:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}},"depends_on":["kubernetes_namespace_v1.prometheus"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"Amazon Managed Prometheus Workspace Endpoint"},"enable_amazon_prometheus":{"default":false,"description":"Enable AWS Managed Prometheus service"},"helm_config":{"default":{},"description":"Helm Config for Prometheus"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}}},"spark_k8s_operator":{"source":"./spark-k8s-operator","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.spark_k8s_operator_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_spark_k8s_operator"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.spark_k8s_operator.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Spark K8s Operator"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"tetrate_istio":{"source":"tetratelabs/tetrate-istio-addon/eksblueprints","expressions":{"addon_context":{"references":["local.addon_context"]},"base_helm_config":{"references":["var.tetrate_istio_base_helm_config"]},"cni_helm_config":{"references":["var.tetrate_istio_cni_helm_config"]},"distribution":{"references":["var.tetrate_istio_distribution"]},"distribution_version":{"references":["var.tetrate_istio_version"]},"gateway_helm_config":{"references":["var.tetrate_istio_gateway_helm_config"]},"install_base":{"references":["var.tetrate_istio_install_base"]},"install_cni":{"references":["var.tetrate_istio_install_cni"]},"install_gateway":{"references":["var.tetrate_istio_install_gateway"]},"install_istiod":{"references":["var.tetrate_istio_install_istiod"]},"istiod_helm_config":{"references":["var.tetrate_istio_istiod_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_tetrate_istio"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"module_calls":{"base":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.base_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_base"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.base:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.base.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}}},"cni":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.cni_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_cni"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.cni:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.cni.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.base"]},"gateway":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.gateway_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_gateway"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.gateway:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.gateway.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.istiod"]},"istiod":{"source":"github.com/aws-ia/terraform-aws-eks-blueprints//modules/kubernetes-addons/helm-addon?ref=v3.5.0","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.istiod_helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"count_expression":{"references":["var.install_istiod"]},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.istiod:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_permissions_boundary":{"references":["var.irsa_config.irsa_iam_permissions_boundary","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.iam_role_path"]},"permissions_boundary":{"references":["var.irsa_iam_permissions_boundary"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.tetrate_istio.module.istiod.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-ssp-amazon-eks"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"iam_role_path":{"default":"/","description":"IAM Role path"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM Policy ARN for IRSA IAM role permissions boundary"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["module.cni"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"base_helm_config":{"default":{},"description":"Istio `base` Helm Chart Configuration"},"cni_helm_config":{"default":{},"description":"Istio `cni` Helm Chart Configuration"},"distribution":{"default":"TID","description":"Istio distribution"},"distribution_version":{"default":"","description":"Istio version"},"gateway_helm_config":{"default":{},"description":"Istio `gateway` Helm Chart Configuration"},"install_base":{"default":true,"description":"Install Istio `base` Helm Chart"},"install_cni":{"default":true,"description":"Install Istio `cni` Helm Chart"},"install_gateway":{"default":true,"description":"Install Istio `gateway` Helm Chart"},"install_istiod":{"default":true,"description":"Install Istio `istiod` Helm Chart"},"istiod_helm_config":{"default":{},"description":"Istio `istiod` Helm Chart Configuration"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."}}},"version_constraint":"0.0.7"},"traefik":{"source":"./traefik","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.traefik_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_traefik"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.this","mode":"managed","type":"kubernetes_namespace_v1","name":"this","provider_config_key":"module.kubernetes-addons.module.traefik:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.traefik.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.traefik.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.this"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Traefik"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"vault":{"source":"hashicorp/hashicorp-vault-eks-addon/aws","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.vault_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_vault"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"},"merged_helm_config":{"expression":{"references":["local.helm_config"]},"description":"(merged) Helm Config for HashiCorp Vault"}},"resources":[{"address":"helm_release.vault","mode":"managed","type":"helm_release","name":"vault","provider_config_key":"module.kubernetes-addons.module.vault:helm","expressions":{"atomic":{"references":["local.helm_config[\"atomic\"]","local.helm_config"]},"chart":{"references":["local.helm_config[\"chart\"]","local.helm_config"]},"cleanup_on_fail":{"references":["local.helm_config[\"cleanup_on_fail\"]","local.helm_config"]},"create_namespace":{"references":["local.helm_config[\"create_namespace\"]","local.helm_config"]},"dependency_update":{"references":["local.helm_config[\"dependency_update\"]","local.helm_config"]},"description":{"references":["local.helm_config[\"description\"]","local.helm_config"]},"disable_openapi_validation":{"references":["local.helm_config[\"disable_openapi_validation\"]","local.helm_config"]},"disable_webhooks":{"references":["local.helm_config[\"disable_webhooks\"]","local.helm_config"]},"force_update":{"references":["local.helm_config[\"force_update\"]","local.helm_config"]},"keyring":{"references":["local.helm_config[\"keyring\"]","local.helm_config"]},"lint":{"references":["local.helm_config[\"lint\"]","local.helm_config"]},"max_history":{"references":["local.helm_config[\"max_history\"]","local.helm_config"]},"name":{"references":["local.helm_config[\"name\"]","local.helm_config"]},"namespace":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]},"postrender":[{"binary_path":{"references":["local.helm_config[\"postrender\"]","local.helm_config"]}}],"recreate_pods":{"references":["local.helm_config[\"recreate_pods\"]","local.helm_config"]},"render_subchart_notes":{"references":["local.helm_config[\"render_subchart_notes\"]","local.helm_config"]},"replace":{"references":["local.helm_config[\"replace\"]","local.helm_config"]},"repository":{"references":["local.helm_config[\"repository\"]","local.helm_config"]},"repository_ca_file":{"references":["local.helm_config[\"repository_ca_file\"]","local.helm_config"]},"repository_cert_file":{"references":["local.helm_config[\"repository_cert_file\"]","local.helm_config"]},"repository_key_file":{"references":["local.helm_config[\"repository_key_file\"]","local.helm_config"]},"repository_password":{"references":["local.helm_config[\"repository_password\"]","local.helm_config"]},"repository_username":{"references":["local.helm_config[\"repository_username\"]","local.helm_config"]},"reset_values":{"references":["local.helm_config[\"reset_values\"]","local.helm_config"]},"reuse_values":{"references":["local.helm_config[\"reuse_values\"]","local.helm_config"]},"skip_crds":{"references":["local.helm_config[\"skip_crds\"]","local.helm_config"]},"timeout":{"references":["local.helm_config[\"timeout\"]","local.helm_config"]},"values":{"references":["local.helm_config[\"values\"]","local.helm_config"]},"verify":{"references":["local.helm_config[\"verify\"]","local.helm_config"]},"version":{"references":["local.helm_config[\"version\"]","local.helm_config"]},"wait":{"references":["local.helm_config[\"wait\"]","local.helm_config"]},"wait_for_jobs":{"references":["local.helm_config[\"wait_for_jobs\"]","local.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon."},"helm_config":{"default":{},"description":"HashiCorp Vault Helm chart configuration."},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"vault_namespace":{"default":"vault","description":"Kubernetes Namespace to deploy HashiCorp Vault in"}}},"version_constraint":"0.9.0"},"vpa":{"source":"./vpa","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.vpa_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_vpa"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.vpa","mode":"managed","type":"kubernetes_namespace_v1","name":"vpa","provider_config_key":"module.kubernetes-addons.module.vpa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.vpa.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.vpa.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.vpa"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for VPA"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}},"yunikorn":{"source":"./yunikorn","expressions":{"addon_context":{"references":["local.addon_context"]},"helm_config":{"references":["var.yunikorn_helm_config"]},"manage_via_gitops":{"references":["var.argocd_manage_add_ons"]}},"count_expression":{"references":["var.enable_yunikorn"]},"module":{"outputs":{"argocd_gitops_config":{"expression":{"references":["var.manage_via_gitops","local.argocd_gitops_config"]},"description":"Configuration used for managing the add-on with ArgoCD"}},"resources":[{"address":"kubernetes_namespace_v1.yunikorn","mode":"managed","type":"kubernetes_namespace_v1","name":"yunikorn","provider_config_key":"module.kubernetes-addons.module.yunikorn:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["local.helm_config[\"namespace\"]","local.helm_config"]}}]},"schema_version":0}],"module_calls":{"helm_addon":{"source":"../helm-addon","expressions":{"addon_context":{"references":["var.addon_context"]},"helm_config":{"references":["local.helm_config"]},"irsa_config":{"constant_value":null},"manage_via_gitops":{"references":["var.manage_via_gitops"]}},"module":{"resources":[{"address":"helm_release.addon","mode":"managed","type":"helm_release","name":"addon","provider_config_key":"module.kubernetes-addons.module.yunikorn.module.helm_addon:helm","expressions":{"atomic":{"references":["var.helm_config[\"atomic\"]","var.helm_config"]},"chart":{"references":["var.helm_config[\"chart\"]","var.helm_config"]},"cleanup_on_fail":{"references":["var.helm_config[\"cleanup_on_fail\"]","var.helm_config"]},"create_namespace":{"references":["var.irsa_config","var.helm_config[\"create_namespace\"]","var.helm_config"]},"dependency_update":{"references":["var.helm_config[\"dependency_update\"]","var.helm_config"]},"description":{"references":["var.helm_config[\"description\"]","var.helm_config"]},"disable_openapi_validation":{"references":["var.helm_config[\"disable_openapi_validation\"]","var.helm_config"]},"disable_webhooks":{"references":["var.helm_config[\"disable_webhooks\"]","var.helm_config"]},"force_update":{"references":["var.helm_config[\"force_update\"]","var.helm_config"]},"keyring":{"references":["var.helm_config[\"keyring\"]","var.helm_config"]},"lint":{"references":["var.helm_config[\"lint\"]","var.helm_config"]},"max_history":{"references":["var.helm_config[\"max_history\"]","var.helm_config"]},"name":{"references":["var.helm_config[\"name\"]","var.helm_config"]},"namespace":{"references":["var.helm_config[\"namespace\"]","var.helm_config"]},"postrender":[{"binary_path":{"references":["var.helm_config[\"postrender\"]","var.helm_config"]}}],"recreate_pods":{"references":["var.helm_config[\"recreate_pods\"]","var.helm_config"]},"render_subchart_notes":{"references":["var.helm_config[\"render_subchart_notes\"]","var.helm_config"]},"replace":{"references":["var.helm_config[\"replace\"]","var.helm_config"]},"repository":{"references":["var.helm_config[\"repository\"]","var.helm_config"]},"repository_cert_file":{"references":["var.helm_config[\"repository_cert_file\"]","var.helm_config"]},"repository_key_file":{"references":["var.helm_config[\"repository_key_file\"]","var.helm_config"]},"repository_password":{"references":["var.helm_config[\"repository_password\"]","var.helm_config"]},"repository_username":{"references":["var.helm_config[\"repository_username\"]","var.helm_config"]},"reset_values":{"references":["var.helm_config[\"reset_values\"]","var.helm_config"]},"reuse_values":{"references":["var.helm_config[\"reuse_values\"]","var.helm_config"]},"skip_crds":{"references":["var.helm_config[\"skip_crds\"]","var.helm_config"]},"timeout":{"references":["var.helm_config[\"timeout\"]","var.helm_config"]},"values":{"references":["var.helm_config[\"values\"]","var.helm_config"]},"verify":{"references":["var.helm_config[\"verify\"]","var.helm_config"]},"version":{"references":["var.helm_config[\"version\"]","var.helm_config"]},"wait":{"references":["var.helm_config[\"wait\"]","var.helm_config"]},"wait_for_jobs":{"references":["var.helm_config[\"wait_for_jobs\"]","var.helm_config"]}},"schema_version":0,"count_expression":{"references":["var.manage_via_gitops"]},"depends_on":["module.irsa"]}],"module_calls":{"irsa":{"source":"../../irsa","expressions":{"addon_context":{"references":["var.addon_context"]},"create_kubernetes_namespace":{"references":["var.irsa_config.create_kubernetes_namespace","var.irsa_config"]},"create_kubernetes_service_account":{"references":["var.irsa_config.create_kubernetes_service_account","var.irsa_config"]},"irsa_iam_policies":{"references":["var.irsa_config.irsa_iam_policies","var.irsa_config"]},"kubernetes_namespace":{"references":["var.irsa_config.kubernetes_namespace","var.irsa_config"]},"kubernetes_service_account":{"references":["var.irsa_config.kubernetes_service_account","var.irsa_config"]}},"count_expression":{"references":["var.irsa_config"]},"module":{"outputs":{"irsa_iam_role_arn":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role ARN for your service account"},"irsa_iam_role_name":{"expression":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"description":"IAM role name for your service account"}},"resources":[{"address":"aws_iam_role.irsa","mode":"managed","type":"aws_iam_role","name":"irsa","provider_config_key":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:aws","expressions":{"assume_role_policy":{"references":["var.addon_context.eks_oidc_provider_arn","var.addon_context","var.addon_context.eks_oidc_issuer_url","var.addon_context","var.kubernetes_namespace","var.kubernetes_service_account"]},"description":{"references":["var.kubernetes_service_account"]},"force_detach_policies":{"constant_value":true},"name":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account"]},"path":{"references":["var.addon_context.irsa_iam_role_path","var.addon_context"]},"permissions_boundary":{"references":["var.addon_context.irsa_iam_permissions_boundary","var.addon_context"]},"tags":{"references":["var.addon_context.eks_cluster_id","var.addon_context","var.kubernetes_service_account","var.addon_context.tags","var.addon_context"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies"]}},{"address":"aws_iam_role_policy_attachment.irsa","mode":"managed","type":"aws_iam_role_policy_attachment","name":"irsa","provider_config_key":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:aws","expressions":{"policy_arn":{"references":["var.irsa_iam_policies","count.index"]},"role":{"references":["aws_iam_role.irsa[0].name","aws_iam_role.irsa[0]","aws_iam_role.irsa"]}},"schema_version":0,"count_expression":{"references":["var.irsa_iam_policies","var.irsa_iam_policies"]}},{"address":"kubernetes_namespace_v1.irsa","mode":"managed","type":"kubernetes_namespace_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:kubernetes","expressions":{"metadata":[{"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_namespace","var.kubernetes_namespace"]}},{"address":"kubernetes_service_account_v1.irsa","mode":"managed","type":"kubernetes_service_account_v1","name":"irsa","provider_config_key":"module.kubernetes-addons.module.yunikorn.module.helm_addon.module.irsa:kubernetes","expressions":{"automount_service_account_token":{"constant_value":true},"metadata":[{"annotations":{"references":["var.irsa_iam_policies","aws_iam_role.irsa[0].arn","aws_iam_role.irsa[0]","aws_iam_role.irsa"]},"labels":{"constant_value":{"app.kubernetes.io/managed-by":"terraform-aws-eks-blueprints"}},"name":{"references":["var.kubernetes_service_account"]},"namespace":{"references":["var.kubernetes_namespace"]}}]},"schema_version":0,"count_expression":{"references":["var.create_kubernetes_service_account"]}}],"variables":{"addon_context":{"description":"Input configuration for the addon"},"create_kubernetes_namespace":{"default":true,"description":"Should the module create the namespace"},"create_kubernetes_service_account":{"default":true,"description":"Should the module create the Service Account"},"irsa_iam_policies":{"default":[],"description":"IAM Policies for IRSA IAM role"},"kubernetes_namespace":{"description":"Kubernetes Namespace name"},"kubernetes_service_account":{"description":"Kubernetes Service Account Name"}}}}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"description":"Add-on helm chart config, provide repository and version at the minimum.\nSee https://registry.terraform.io/providers/hashicorp/helm/latest/docs.\n"},"irsa_config":{"default":null,"description":"Input configuration for IRSA module"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps."},"set_sensitive_values":{"default":[],"description":"Forced set_sensitive values"},"set_values":{"default":[],"description":"Forced set values"}}},"depends_on":["kubernetes_namespace_v1.yunikorn"]}},"variables":{"addon_context":{"description":"Input configuration for the addon"},"helm_config":{"default":{},"description":"Helm provider config for Yunikorn"},"manage_via_gitops":{"default":false,"description":"Determines if the add-on should be managed via GitOps"}}}}},"variables":{"adot_collector_haproxy_helm_config":{"default":{},"description":"ADOT Collector HAProxy Helm Chart config"},"adot_collector_java_helm_config":{"default":{},"description":"ADOT Collector Java Helm Chart config"},"adot_collector_memcached_helm_config":{"default":{},"description":"ADOT Collector Memcached Helm Chart config"},"adot_collector_nginx_helm_config":{"default":{},"description":"ADOT Collector Nginx Helm Chart config"},"agones_helm_config":{"default":{},"description":"Agones GameServer Helm Chart config"},"amazon_eks_aws_ebs_csi_driver_config":{"default":{},"description":"configMap for AWS EBS CSI Driver add-on"},"amazon_eks_coredns_config":{"default":{},"description":"ConfigMap for Amazon CoreDNS EKS add-on"},"amazon_eks_kube_proxy_config":{"default":{},"description":"ConfigMap for Amazon EKS Kube-Proxy add-on"},"amazon_eks_vpc_cni_config":{"default":{},"description":"ConfigMap of Amazon EKS VPC CNI add-on"},"amazon_prometheus_workspace_endpoint":{"default":null,"description":"AWS Managed Prometheus WorkSpace Endpoint"},"amazon_prometheus_workspace_region":{"default":null,"description":"AWS Managed Prometheus WorkSpace Region"},"argo_rollouts_helm_config":{"default":null,"description":"Argo Rollouts Helm Chart config"},"argocd_admin_password_secret_name":{"default":"","description":"Name for a secret stored in AWS Secrets Manager that contains the admin password."},"argocd_applications":{"default":{},"description":"Argo CD Applications config to bootstrap the cluster"},"argocd_helm_config":{"default":{},"description":"Argo CD Kubernetes add-on config"},"argocd_manage_add_ons":{"default":false,"description":"Enable managing add-on configuration via ArgoCD"},"auto_scaling_group_names":{"default":[],"description":"List of self-managed node groups autoscaling group names"},"aws_cloudwatch_metrics_helm_config":{"default":{},"description":"AWS CloudWatch Metrics Helm Chart config"},"aws_cloudwatch_metrics_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_efs_csi_driver_helm_config":{"default":{},"description":"AWS EFS CSI driver Helm Chart config"},"aws_for_fluentbit_cw_log_group_kms_key_arn":{"default":null,"description":"FluentBit CloudWatch Log group KMS Key"},"aws_for_fluentbit_cw_log_group_name":{"default":null,"description":"FluentBit CloudWatch Log group name"},"aws_for_fluentbit_cw_log_group_retention":{"default":90,"description":"FluentBit CloudWatch Log group retention period"},"aws_for_fluentbit_helm_config":{"default":{},"description":"AWS for FluentBit Helm Chart config"},"aws_for_fluentbit_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_load_balancer_controller_helm_config":{"default":{},"description":"AWS Load Balancer Controller Helm Chart config"},"aws_node_termination_handler_helm_config":{"default":{},"description":"AWS Node Termination Handler Helm Chart config"},"aws_node_termination_handler_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"aws_privateca_acmca_arn":{"default":"","description":"ARN of AWS ACM PCA"},"aws_privateca_issuer_helm_config":{"default":{},"description":"PCA Issuer Helm Chart config"},"aws_privateca_issuer_irsa_policies":{"default":[],"description":"IAM policy ARNs for AWS ACM PCA IRSA"},"cert_manager_domain_names":{"default":[],"description":"Domain names of the Route53 hosted zone to use with cert-manager."},"cert_manager_helm_config":{"default":{},"description":"Cert Manager Helm Chart config"},"cert_manager_install_letsencrypt_issuers":{"default":true,"description":"Install Let's Encrypt Cluster Issuers."},"cert_manager_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"cert_manager_letsencrypt_email":{"default":"","description":"Email address for expiration emails from Let's Encrypt."},"cluster_autoscaler_helm_config":{"default":{},"description":"Cluster Autoscaler Helm Chart config"},"crossplane_aws_provider":{"default":{"additional_irsa_policies":[],"enable":false,"provider_aws_version":"v0.24.1"},"description":"AWS Provider config for Crossplane"},"crossplane_helm_config":{"default":null,"description":"Crossplane Helm Chart config"},"crossplane_jet_aws_provider":{"default":{"additional_irsa_policies":[],"enable":false,"provider_aws_version":"v0.24.1"},"description":"AWS Provider Jet AWS config for Crossplane"},"eks_cluster_domain":{"default":"","description":"The domain for the EKS cluster."},"eks_cluster_id":{"description":"EKS Cluster Id"},"eks_worker_security_group_id":{"default":"","description":"EKS Worker Security group Id created by EKS module"},"enable_adot_collector_haproxy":{"default":false,"description":"Enable metrics for HAProxy workloads"},"enable_adot_collector_java":{"default":false,"description":"Enable metrics for JMX workloads"},"enable_adot_collector_memcached":{"default":false,"description":"Enable metrics for Memcached workloads"},"enable_adot_collector_nginx":{"default":false,"description":"Enable metrics for Nginx workloads"},"enable_agones":{"default":false,"description":"Enable Agones GamServer add-on"},"enable_amazon_eks_aws_ebs_csi_driver":{"default":false,"description":"Enable EKS Managed AWS EBS CSI Driver add-on"},"enable_amazon_eks_coredns":{"default":false,"description":"Enable CoreDNS add-on"},"enable_amazon_eks_kube_proxy":{"default":false,"description":"Enable Kube Proxy add-on"},"enable_amazon_eks_vpc_cni":{"default":false,"description":"Enable VPC CNI add-on"},"enable_amazon_prometheus":{"default":false,"description":"Enable AWS Managed Prometheus service"},"enable_argo_rollouts":{"default":false,"description":"Enable Argo Rollouts add-on"},"enable_argocd":{"default":false,"description":"Enable Argo CD Kubernetes add-on"},"enable_aws_cloudwatch_metrics":{"default":false,"description":"Enable AWS CloudWatch Metrics add-on for Container Insights"},"enable_aws_efs_csi_driver":{"default":false,"description":"Enable AWS EFS CSI driver add-on"},"enable_aws_for_fluentbit":{"default":false,"description":"Enable AWS for FluentBit add-on"},"enable_aws_load_balancer_controller":{"default":false,"description":"Enable AWS Load Balancer Controller add-on"},"enable_aws_node_termination_handler":{"default":false,"description":"Enable AWS Node Termination Handler add-on"},"enable_aws_privateca_issuer":{"default":false,"description":"Enable PCA Issuer"},"enable_cert_manager":{"default":false,"description":"Enable Cert Manager add-on"},"enable_cluster_autoscaler":{"default":false,"description":"Enable Cluster autoscaler add-on"},"enable_crossplane":{"default":false,"description":"Enable Crossplane add-on"},"enable_external_dns":{"default":false,"description":"External DNS add-on."},"enable_fargate_fluentbit":{"default":false,"description":"Enable Fargate FluentBit add-on"},"enable_ingress_nginx":{"default":false,"description":"Enable Ingress Nginx add-on"},"enable_ipv6":{"default":false,"description":"Enable Ipv6 network. Attaches new VPC CNI policy to the IRSA role"},"enable_karpenter":{"default":false,"description":"Enable Karpenter autoscaler add-on"},"enable_keda":{"default":false,"description":"Enable KEDA Event-based autoscaler add-on"},"enable_kubernetes_dashboard":{"default":false,"description":"Enable Kubernetes Dashboard add-on"},"enable_metrics_server":{"default":false,"description":"Enable metrics server add-on"},"enable_ondat":{"default":false,"description":"Enable Ondat add-on"},"enable_opentelemetry_operator":{"default":false,"description":"Enable opentelemetry operator add-on"},"enable_prometheus":{"default":false,"description":"Enable Community Prometheus add-on"},"enable_spark_k8s_operator":{"default":false,"description":"Enable Spark on K8s Operator add-on"},"enable_tetrate_istio":{"default":false,"description":"Enable Tetrate Istio add-on"},"enable_traefik":{"default":false,"description":"Enable Traefik add-on"},"enable_vault":{"default":false,"description":"Enable HashiCorp Vault add-on"},"enable_vpa":{"default":false,"description":"Enable Vertical Pod Autoscaler add-on"},"enable_yunikorn":{"default":false,"description":"Enable Apache YuniKorn K8s scheduler add-on"},"external_dns_helm_config":{"default":{},"description":"External DNS Helm Chart config"},"external_dns_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"fargate_fluentbit_addon_config":{"default":{},"description":"Fargate fluentbit add-on config"},"ingress_nginx_helm_config":{"default":{},"description":"Ingress Nginx Helm Chart config"},"irsa_iam_permissions_boundary":{"default":"","description":"IAM permissions boundary for IRSA roles"},"irsa_iam_role_path":{"default":"/","description":"IAM role path for IRSA roles"},"karpenter_helm_config":{"default":{},"description":"Karpenter autoscaler add-on config"},"karpenter_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"karpenter_node_iam_instance_profile":{"default":"","description":"Karpenter Node IAM Instance profile id"},"keda_helm_config":{"default":{},"description":"KEDA Event-based autoscaler add-on config"},"keda_irsa_policies":{"default":[],"description":"Additional IAM policies for a IAM role for service accounts"},"kubernetes_dashboard_helm_config":{"default":null,"description":"Kubernetes Dashboard Helm Chart config"},"metrics_server_helm_config":{"default":{},"description":"Metrics Server Helm Chart config"},"ondat_admin_password":{"default":"storageos","description":"Password for Ondat admin user","sensitive":true},"ondat_admin_username":{"default":"storageos","description":"Username for Ondat admin user"},"ondat_create_cluster":{"default":true,"description":"Create cluster resources"},"ondat_etcd_ca":{"default":null,"description":"CA content for Ondat etcd"},"ondat_etcd_cert":{"default":null,"description":"Certificate content for Ondat etcd"},"ondat_etcd_endpoints":{"default":[],"description":"List of etcd endpoints for Ondat"},"ondat_etcd_key":{"default":null,"description":"Private key content for Ondat etcd","sensitive":true},"ondat_helm_config":{"default":{},"description":"Ondat Helm Chart config"},"ondat_irsa_policies":{"default":[],"description":"IAM policy ARNs for Ondat IRSA"},"opentelemetry_operator_helm_config":{"default":{},"description":"Opentelemetry Operator Helm Chart config"},"prometheus_helm_config":{"default":{},"description":"Community Prometheus Helm Chart config"},"spark_k8s_operator_helm_config":{"default":{},"description":"Spark on K8s Operator Helm Chart config"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit`,`XYZ`)"},"tetrate_istio_base_helm_config":{"default":{},"description":"Istio `base` Helm Chart config"},"tetrate_istio_cni_helm_config":{"default":{},"description":"Istio `cni` Helm Chart config"},"tetrate_istio_distribution":{"default":"TID","description":"Istio distribution"},"tetrate_istio_gateway_helm_config":{"default":{},"description":"Istio `gateway` Helm Chart config"},"tetrate_istio_install_base":{"default":true,"description":"Install Istio `base` Helm Chart"},"tetrate_istio_install_cni":{"default":true,"description":"Install Istio `cni` Helm Chart"},"tetrate_istio_install_gateway":{"default":true,"description":"Install Istio `gateway` Helm Chart"},"tetrate_istio_install_istiod":{"default":true,"description":"Install Istio `istiod` Helm Chart"},"tetrate_istio_istiod_helm_config":{"default":{},"description":"Istio `istiod` Helm Chart config"},"tetrate_istio_version":{"default":"","description":"Istio version"},"traefik_helm_config":{"default":{},"description":"Traefik Helm Chart config"},"vault_helm_config":{"default":null,"description":"HashiCorp Vault Helm Chart config"},"vpa_helm_config":{"default":null,"description":"VPA Helm Chart config"},"yunikorn_helm_config":{"default":null,"description":"YuniKorn Helm Chart config"}}},"depends_on":["module.eks_blueprints.managed_node_groups","module.aws_controllers"]},"vpc":{"source":"terraform-aws-modules/vpc/aws","expressions":{"azs":{"references":["local.azs"]},"cidr":{"references":["local.vpc_cidr"]},"create_igw":{"constant_value":true},"default_network_acl_tags":{"references":["local.name"]},"default_route_table_tags":{"references":["local.name"]},"default_security_group_tags":{"references":["local.name"]},"enable_dns_hostnames":{"constant_value":true},"enable_nat_gateway":{"constant_value":true},"manage_default_network_acl":{"constant_value":true},"manage_default_route_table":{"constant_value":true},"manage_default_security_group":{"constant_value":true},"name":{"references":["local.name"]},"private_subnet_tags":{"references":["local.name"]},"private_subnets":{"references":["local.azs","local.vpc_cidr"]},"public_subnet_tags":{"references":["local.name"]},"public_subnets":{"references":["local.azs","local.vpc_cidr"]},"single_nat_gateway":{"constant_value":true},"tags":{"references":["local.tags"]}},"module":{"outputs":{"azs":{"expression":{"references":["var.azs"]},"description":"A list of availability zones specified as argument to this module"},"cgw_arns":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of ARNs of Customer Gateway"},"cgw_ids":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of IDs of Customer Gateway"},"database_internet_gateway_route_id":{"expression":{"references":["aws_route.database_internet_gateway[0].id","aws_route.database_internet_gateway[0]","aws_route.database_internet_gateway"]},"description":"ID of the database internet gateway route"},"database_ipv6_egress_route_id":{"expression":{"references":["aws_route.database_ipv6_egress[0].id","aws_route.database_ipv6_egress[0]","aws_route.database_ipv6_egress"]},"description":"ID of the database IPv6 egress route"},"database_nat_gateway_route_ids":{"expression":{"references":["aws_route.database_nat_gateway"]},"description":"List of IDs of the database nat gateway route"},"database_network_acl_arn":{"expression":{"references":["aws_network_acl.database[0].arn","aws_network_acl.database[0]","aws_network_acl.database"]},"description":"ARN of the database network ACL"},"database_network_acl_id":{"expression":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"description":"ID of the database network ACL"},"database_route_table_association_ids":{"expression":{"references":["aws_route_table_association.database"]},"description":"List of IDs of the database route table association"},"database_route_table_ids":{"expression":{"references":["aws_route_table.database","aws_route_table.private"]},"description":"List of IDs of database route tables"},"database_subnet_arns":{"expression":{"references":["aws_subnet.database"]},"description":"List of ARNs of database subnets"},"database_subnet_group":{"expression":{"references":["aws_db_subnet_group.database[0].id","aws_db_subnet_group.database[0]","aws_db_subnet_group.database"]},"description":"ID of database subnet group"},"database_subnet_group_name":{"expression":{"references":["aws_db_subnet_group.database[0].name","aws_db_subnet_group.database[0]","aws_db_subnet_group.database"]},"description":"Name of database subnet group"},"database_subnets":{"expression":{"references":["aws_subnet.database"]},"description":"List of IDs of database subnets"},"database_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of cidr_blocks of database subnets"},"database_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of IPv6 cidr_blocks of database subnets in an IPv6 enabled VPC"},"default_network_acl_id":{"expression":{"references":["aws_vpc.this[0].default_network_acl_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the default network ACL"},"default_route_table_id":{"expression":{"references":["aws_vpc.this[0].default_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the default route table"},"default_security_group_id":{"expression":{"references":["aws_vpc.this[0].default_security_group_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_arn":{"expression":{"references":["aws_default_vpc.this[0].arn","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ARN of the Default VPC"},"default_vpc_cidr_block":{"expression":{"references":["aws_default_vpc.this[0].cidr_block","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The CIDR block of the Default VPC"},"default_vpc_default_network_acl_id":{"expression":{"references":["aws_default_vpc.this[0].default_network_acl_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the default network ACL of the Default VPC"},"default_vpc_default_route_table_id":{"expression":{"references":["aws_default_vpc.this[0].default_route_table_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the default route table of the Default VPC"},"default_vpc_default_security_group_id":{"expression":{"references":["aws_default_vpc.this[0].default_security_group_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the security group created by default on Default VPC creation"},"default_vpc_enable_dns_hostnames":{"expression":{"references":["aws_default_vpc.this[0].enable_dns_hostnames","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS hostname support"},"default_vpc_enable_dns_support":{"expression":{"references":["aws_default_vpc.this[0].enable_dns_support","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS support"},"default_vpc_id":{"expression":{"references":["aws_default_vpc.this[0].id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the Default VPC"},"default_vpc_instance_tenancy":{"expression":{"references":["aws_default_vpc.this[0].instance_tenancy","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"Tenancy of instances spin up within Default VPC"},"default_vpc_main_route_table_id":{"expression":{"references":["aws_default_vpc.this[0].main_route_table_id","aws_default_vpc.this[0]","aws_default_vpc.this"]},"description":"The ID of the main route table associated with the Default VPC"},"dhcp_options_id":{"expression":{"references":["aws_vpc_dhcp_options.this[0].id","aws_vpc_dhcp_options.this[0]","aws_vpc_dhcp_options.this"]},"description":"The ID of the DHCP options"},"egress_only_internet_gateway_id":{"expression":{"references":["aws_egress_only_internet_gateway.this[0].id","aws_egress_only_internet_gateway.this[0]","aws_egress_only_internet_gateway.this"]},"description":"The ID of the egress only Internet Gateway"},"elasticache_network_acl_arn":{"expression":{"references":["aws_network_acl.elasticache[0].arn","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"description":"ARN of the elasticache network ACL"},"elasticache_network_acl_id":{"expression":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"description":"ID of the elasticache network ACL"},"elasticache_route_table_association_ids":{"expression":{"references":["aws_route_table_association.elasticache"]},"description":"List of IDs of the elasticache route table association"},"elasticache_route_table_ids":{"expression":{"references":["aws_route_table.elasticache","aws_route_table.private"]},"description":"List of IDs of elasticache route tables"},"elasticache_subnet_arns":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of ARNs of elasticache subnets"},"elasticache_subnet_group":{"expression":{"references":["aws_elasticache_subnet_group.elasticache[0].id","aws_elasticache_subnet_group.elasticache[0]","aws_elasticache_subnet_group.elasticache"]},"description":"ID of elasticache subnet group"},"elasticache_subnet_group_name":{"expression":{"references":["aws_elasticache_subnet_group.elasticache[0].name","aws_elasticache_subnet_group.elasticache[0]","aws_elasticache_subnet_group.elasticache"]},"description":"Name of elasticache subnet group"},"elasticache_subnets":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IDs of elasticache subnets"},"elasticache_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of cidr_blocks of elasticache subnets"},"elasticache_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IPv6 cidr_blocks of elasticache subnets in an IPv6 enabled VPC"},"igw_arn":{"expression":{"references":["aws_internet_gateway.this[0].arn","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"description":"The ARN of the Internet Gateway"},"igw_id":{"expression":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"description":"The ID of the Internet Gateway"},"intra_network_acl_arn":{"expression":{"references":["aws_network_acl.intra[0].arn","aws_network_acl.intra[0]","aws_network_acl.intra"]},"description":"ARN of the intra network ACL"},"intra_network_acl_id":{"expression":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"description":"ID of the intra network ACL"},"intra_route_table_association_ids":{"expression":{"references":["aws_route_table_association.intra"]},"description":"List of IDs of the intra route table association"},"intra_route_table_ids":{"expression":{"references":["aws_route_table.intra"]},"description":"List of IDs of intra route tables"},"intra_subnet_arns":{"expression":{"references":["aws_subnet.intra"]},"description":"List of ARNs of intra subnets"},"intra_subnets":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IDs of intra subnets"},"intra_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of cidr_blocks of intra subnets"},"intra_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IPv6 cidr_blocks of intra subnets in an IPv6 enabled VPC"},"name":{"expression":{"references":["var.name"]},"description":"The name of the VPC specified as argument to this module"},"nat_ids":{"expression":{"references":["aws_eip.nat"]},"description":"List of allocation ID of Elastic IPs created for AWS NAT Gateway"},"nat_public_ips":{"expression":{"references":["var.reuse_nat_ips","var.external_nat_ips","aws_eip.nat"]},"description":"List of public Elastic IPs created for AWS NAT Gateway"},"natgw_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of NAT Gateway IDs"},"outpost_network_acl_arn":{"expression":{"references":["aws_network_acl.outpost[0].arn","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"description":"ARN of the outpost network ACL"},"outpost_network_acl_id":{"expression":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"description":"ID of the outpost network ACL"},"outpost_subnet_arns":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of ARNs of outpost subnets"},"outpost_subnets":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IDs of outpost subnets"},"outpost_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of cidr_blocks of outpost subnets"},"outpost_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IPv6 cidr_blocks of outpost subnets in an IPv6 enabled VPC"},"private_ipv6_egress_route_ids":{"expression":{"references":["aws_route.private_ipv6_egress"]},"description":"List of IDs of the ipv6 egress route"},"private_nat_gateway_route_ids":{"expression":{"references":["aws_route.private_nat_gateway"]},"description":"List of IDs of the private nat gateway route"},"private_network_acl_arn":{"expression":{"references":["aws_network_acl.private[0].arn","aws_network_acl.private[0]","aws_network_acl.private"]},"description":"ARN of the private network ACL"},"private_network_acl_id":{"expression":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"description":"ID of the private network ACL"},"private_route_table_association_ids":{"expression":{"references":["aws_route_table_association.private"]},"description":"List of IDs of the private route table association"},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]},"description":"List of IDs of private route tables"},"private_subnet_arns":{"expression":{"references":["aws_subnet.private"]},"description":"List of ARNs of private subnets"},"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"private_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of cidr_blocks of private subnets"},"private_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of IPv6 cidr_blocks of private subnets in an IPv6 enabled VPC"},"public_internet_gateway_ipv6_route_id":{"expression":{"references":["aws_route.public_internet_gateway_ipv6[0].id","aws_route.public_internet_gateway_ipv6[0]","aws_route.public_internet_gateway_ipv6"]},"description":"ID of the IPv6 internet gateway route"},"public_internet_gateway_route_id":{"expression":{"references":["aws_route.public_internet_gateway[0].id","aws_route.public_internet_gateway[0]","aws_route.public_internet_gateway"]},"description":"ID of the internet gateway route"},"public_network_acl_arn":{"expression":{"references":["aws_network_acl.public[0].arn","aws_network_acl.public[0]","aws_network_acl.public"]},"description":"ARN of the public network ACL"},"public_network_acl_id":{"expression":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"description":"ID of the public network ACL"},"public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.public"]},"description":"List of IDs of the public route table association"},"public_route_table_ids":{"expression":{"references":["aws_route_table.public"]},"description":"List of IDs of public route tables"},"public_subnet_arns":{"expression":{"references":["aws_subnet.public"]},"description":"List of ARNs of public subnets"},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"public_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of cidr_blocks of public subnets"},"public_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of IPv6 cidr_blocks of public subnets in an IPv6 enabled VPC"},"redshift_network_acl_arn":{"expression":{"references":["aws_network_acl.redshift[0].arn","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"description":"ARN of the redshift network ACL"},"redshift_network_acl_id":{"expression":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"description":"ID of the redshift network ACL"},"redshift_public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift_public"]},"description":"List of IDs of the public redshidt route table association"},"redshift_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift"]},"description":"List of IDs of the redshift route table association"},"redshift_route_table_ids":{"expression":{"references":["aws_route_table.redshift","aws_route_table.redshift","var.enable_public_redshift","aws_route_table.public","aws_route_table.private"]},"description":"List of IDs of redshift route tables"},"redshift_subnet_arns":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of ARNs of redshift subnets"},"redshift_subnet_group":{"expression":{"references":["aws_redshift_subnet_group.redshift[0].id","aws_redshift_subnet_group.redshift[0]","aws_redshift_subnet_group.redshift"]},"description":"ID of redshift subnet group"},"redshift_subnets":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IDs of redshift subnets"},"redshift_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of cidr_blocks of redshift subnets"},"redshift_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IPv6 cidr_blocks of redshift subnets in an IPv6 enabled VPC"},"this_customer_gateway":{"expression":{"references":["aws_customer_gateway.this"]},"description":"Map of Customer Gateway attributes"},"vgw_arn":{"expression":{"references":["aws_vpn_gateway.this[0].arn","aws_vpn_gateway.this[0]","aws_vpn_gateway.this"]},"description":"The ARN of the VPN Gateway"},"vgw_id":{"expression":{"references":["aws_vpn_gateway.this[0].id","aws_vpn_gateway.this[0]","aws_vpn_gateway.this","aws_vpn_gateway_attachment.this[0].vpn_gateway_id","aws_vpn_gateway_attachment.this[0]","aws_vpn_gateway_attachment.this"]},"description":"The ID of the VPN Gateway"},"vpc_arn":{"expression":{"references":["aws_vpc.this[0].arn","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ARN of the VPC"},"vpc_cidr_block":{"expression":{"references":["aws_vpc.this[0].cidr_block","aws_vpc.this[0]","aws_vpc.this"]},"description":"The CIDR block of the VPC"},"vpc_enable_dns_hostnames":{"expression":{"references":["aws_vpc.this[0].enable_dns_hostnames","aws_vpc.this[0]","aws_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"vpc_enable_dns_support":{"expression":{"references":["aws_vpc.this[0].enable_dns_support","aws_vpc.this[0]","aws_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"vpc_flow_log_cloudwatch_iam_role_arn":{"expression":{"references":["local.flow_log_iam_role_arn"]},"description":"The ARN of the IAM role used when pushing logs to Cloudwatch log group"},"vpc_flow_log_destination_arn":{"expression":{"references":["local.flow_log_destination_arn"]},"description":"The ARN of the destination for VPC Flow Logs"},"vpc_flow_log_destination_type":{"expression":{"references":["var.flow_log_destination_type"]},"description":"The type of the destination for VPC Flow Logs"},"vpc_flow_log_id":{"expression":{"references":["aws_flow_log.this[0].id","aws_flow_log.this[0]","aws_flow_log.this"]},"description":"The ID of the Flow Log resource"},"vpc_id":{"expression":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the VPC"},"vpc_instance_tenancy":{"expression":{"references":["aws_vpc.this[0].instance_tenancy","aws_vpc.this[0]","aws_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"vpc_ipv6_association_id":{"expression":{"references":["aws_vpc.this[0].ipv6_association_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The association ID for the IPv6 CIDR block"},"vpc_ipv6_cidr_block":{"expression":{"references":["aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this"]},"description":"The IPv6 CIDR block"},"vpc_main_route_table_id":{"expression":{"references":["aws_vpc.this[0].main_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"vpc_owner_id":{"expression":{"references":["aws_vpc.this[0].owner_id","aws_vpc.this[0]","aws_vpc.this"]},"description":"The ID of the AWS account that owns the VPC"},"vpc_secondary_cidr_blocks":{"expression":{"references":["aws_vpc_ipv4_cidr_block_association.this"]},"description":"List of secondary CIDR blocks of the VPC"}},"resources":[{"address":"aws_cloudwatch_log_group.flow_log","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.flow_log_cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.flow_log_cloudwatch_log_group_name_prefix","local.vpc_id"]},"retention_in_days":{"references":["var.flow_log_cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_log_group"]}},{"address":"aws_customer_gateway.this","mode":"managed","type":"aws_customer_gateway","name":"this","provider_config_key":"aws","expressions":{"bgp_asn":{"references":["each.value[\"bgp_asn\"]","each.value"]},"device_name":{"references":["each.value"]},"ip_address":{"references":["each.value[\"ip_address\"]","each.value"]},"tags":{"references":["var.name","each.key","var.tags","var.customer_gateway_tags"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0,"for_each_expression":{"references":["var.customer_gateways"]}},{"address":"aws_db_subnet_group.database","mode":"managed","type":"aws_db_subnet_group","name":"database","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.database_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_group_name","var.name","var.tags","var.database_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.database_subnets","var.create_database_subnet_group"]}},{"address":"aws_default_network_acl.this","mode":"managed","type":"aws_default_network_acl","name":"this","provider_config_key":"aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.this[0].default_network_acl_id","aws_vpc.this[0]","aws_vpc.this"]},"subnet_ids":{"constant_value":null},"tags":{"references":["var.default_network_acl_name","var.name","var.tags","var.default_network_acl_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.manage_default_network_acl"]}},{"address":"aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_config_key":"aws","expressions":{"default_route_table_id":{"references":["aws_vpc.this[0].default_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"propagating_vgws":{"references":["var.default_route_table_propagating_vgws"]},"tags":{"references":["var.default_route_table_name","var.name","var.tags","var.default_route_table_tags"]},"timeouts":{"create":{"constant_value":"5m"},"update":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.manage_default_route_table"]}},{"address":"aws_default_security_group.this","mode":"managed","type":"aws_default_security_group","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.default_security_group_name","var.name","var.tags","var.default_security_group_tags"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.manage_default_security_group"]}},{"address":"aws_default_vpc.this","mode":"managed","type":"aws_default_vpc","name":"this","provider_config_key":"aws","expressions":{"enable_classiclink":{"references":["var.default_vpc_enable_classiclink"]},"enable_dns_hostnames":{"references":["var.default_vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.default_vpc_enable_dns_support"]},"tags":{"references":["var.default_vpc_name","var.tags","var.default_vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.manage_default_vpc"]}},{"address":"aws_egress_only_internet_gateway.this","mode":"managed","type":"aws_egress_only_internet_gateway","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_egress_only_igw","var.enable_ipv6","local.max_subnet_length"]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_eip_tags"]},"vpc":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","var.reuse_nat_ips","local.nat_gateway_count"]}},{"address":"aws_elasticache_subnet_group.elasticache","mode":"managed","type":"aws_elasticache_subnet_group","name":"elasticache","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.elasticache_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_group_name","var.name","var.tags","var.elasticache_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.elasticache_subnets","var.create_elasticache_subnet_group"]}},{"address":"aws_flow_log.this","mode":"managed","type":"aws_flow_log","name":"this","provider_config_key":"aws","expressions":{"iam_role_arn":{"references":["local.flow_log_iam_role_arn"]},"log_destination":{"references":["local.flow_log_destination_arn"]},"log_destination_type":{"references":["var.flow_log_destination_type"]},"log_format":{"references":["var.flow_log_log_format"]},"max_aggregation_interval":{"references":["var.flow_log_max_aggregation_interval"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]},"traffic_type":{"references":["var.flow_log_traffic_type"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.enable_flow_log"]}},{"address":"aws_iam_policy.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_policy","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"name_prefix":{"constant_value":"vpc-flow-log-to-cloudwatch-"},"policy":{"references":["data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0].json","data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0]","data.aws_iam_policy_document.vpc_flow_log_cloudwatch"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0].json","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0]","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role"]},"name_prefix":{"constant_value":"vpc-flow-log-role-"},"permissions_boundary":{"references":["var.vpc_flow_log_permissions_boundary"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role_policy_attachment.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role_policy_attachment","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.vpc_flow_log_cloudwatch[0].arn","aws_iam_policy.vpc_flow_log_cloudwatch[0]","aws_iam_policy.vpc_flow_log_cloudwatch"]},"role":{"references":["aws_iam_role.vpc_flow_log_cloudwatch[0].name","aws_iam_role.vpc_flow_log_cloudwatch[0]","aws_iam_role.vpc_flow_log_cloudwatch"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_igw","var.public_subnets"]}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_gateway_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"]},{"address":"aws_network_acl.database","mode":"managed","type":"aws_network_acl","name":"database","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.name","var.database_subnet_suffix","var.tags","var.database_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.database_dedicated_network_acl","var.database_subnets"]}},{"address":"aws_network_acl.elasticache","mode":"managed","type":"aws_network_acl","name":"elasticache","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets"]}},{"address":"aws_network_acl.intra","mode":"managed","type":"aws_network_acl","name":"intra","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.intra"]},"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets"]}},{"address":"aws_network_acl.outpost","mode":"managed","type":"aws_network_acl","name":"outpost","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.outpost"]},"tags":{"references":["var.name","var.outpost_subnet_suffix","var.tags","var.outpost_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets"]}},{"address":"aws_network_acl.private","mode":"managed","type":"aws_network_acl","name":"private","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.name","var.private_subnet_suffix","var.tags","var.private_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.private_dedicated_network_acl","var.private_subnets"]}},{"address":"aws_network_acl.public","mode":"managed","type":"aws_network_acl","name":"public","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.public"]},"tags":{"references":["var.name","var.public_subnet_suffix","var.tags","var.public_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.public_dedicated_network_acl","var.public_subnets"]}},{"address":"aws_network_acl.redshift","mode":"managed","type":"aws_network_acl","name":"redshift","provider_config_key":"aws","expressions":{"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_acl_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets"]}},{"address":"aws_network_acl_rule.database_inbound","mode":"managed","type":"aws_network_acl_rule","name":"database_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_inbound_acl_rules","count.index"]},"to_port":{"references":["var.database_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.database_outbound","mode":"managed","type":"aws_network_acl_rule","name":"database_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_outbound_acl_rules","count.index"]},"to_port":{"references":["var.database_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_inbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_outbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_inbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_inbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_outbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_outbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_inbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_inbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_outbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_outbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_inbound","mode":"managed","type":"aws_network_acl_rule","name":"private_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_inbound_acl_rules","count.index"]},"to_port":{"references":["var.private_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_outbound","mode":"managed","type":"aws_network_acl_rule","name":"private_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_outbound_acl_rules","count.index"]},"to_port":{"references":["var.private_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_inbound","mode":"managed","type":"aws_network_acl_rule","name":"public_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_inbound_acl_rules","count.index"]},"to_port":{"references":["var.public_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_outbound","mode":"managed","type":"aws_network_acl_rule","name":"public_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_outbound_acl_rules","count.index"]},"to_port":{"references":["var.public_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_inbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_inbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_inbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_outbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_outbound","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_outbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_outbound_acl_rules"]}},{"address":"aws_redshift_subnet_group.redshift","mode":"managed","type":"aws_redshift_subnet_group","name":"redshift","provider_config_key":"aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.redshift_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_group_name","var.name","var.tags","var.redshift_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_subnets","var.create_redshift_subnet_group"]}},{"address":"aws_route.database_internet_gateway","mode":"managed","type":"aws_route","name":"database_internet_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_igw","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route"]}},{"address":"aws_route.database_ipv6_egress","mode":"managed","type":"aws_route","name":"database_ipv6_egress","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this[0].id","aws_egress_only_internet_gateway.this[0]","aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route"]}},{"address":"aws_route.database_nat_gateway","mode":"managed","type":"aws_route","name":"database_nat_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.database","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","var.single_nat_gateway","var.database_subnets"]}},{"address":"aws_route.private_ipv6_egress","mode":"managed","type":"aws_route","name":"private_ipv6_egress","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.private","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.private_subnets"]}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"references":["var.nat_gateway_destination_cidr_block"]},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_igw","var.public_subnets"]}},{"address":"aws_route.public_internet_gateway_ipv6","mode":"managed","type":"aws_route","name":"public_internet_gateway_ipv6","provider_config_key":"aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_igw","var.enable_ipv6","var.public_subnets"]}},{"address":"aws_route_table.database","mode":"managed","type":"aws_route_table","name":"database","provider_config_key":"aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.create_database_internet_gateway_route","var.name","var.database_subnet_suffix","var.name","var.database_subnet_suffix","var.azs","count.index","var.tags","var.database_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.single_nat_gateway","var.create_database_internet_gateway_route","var.database_subnets"]}},{"address":"aws_route_table.elasticache","mode":"managed","type":"aws_route_table","name":"elasticache","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_elasticache_subnet_route_table","var.elasticache_subnets"]}},{"address":"aws_route_table.intra","mode":"managed","type":"aws_route_table","name":"intra","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.intra_subnets"]}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.name","var.private_subnet_suffix","var.name","var.private_subnet_suffix","var.azs","count.index","var.tags","var.private_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","local.max_subnet_length","local.nat_gateway_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.public_subnet_suffix","var.tags","var.public_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.public_subnets"]}},{"address":"aws_route_table.redshift","mode":"managed","type":"aws_route_table","name":"redshift","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.create_redshift_subnet_route_table","var.redshift_subnets"]}},{"address":"aws_route_table_association.database","mode":"managed","type":"aws_route_table_association","name":"database","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.database","aws_route_table.private","var.create_database_subnet_route_table","var.single_nat_gateway","var.create_database_internet_gateway_route","count.index","count.index"]},"subnet_id":{"references":["aws_subnet.database","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.database_subnets","var.database_subnets"]}},{"address":"aws_route_table_association.elasticache","mode":"managed","type":"aws_route_table_association","name":"elasticache","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.elasticache","aws_route_table.private","var.single_nat_gateway","var.create_elasticache_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.elasticache","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]}},{"address":"aws_route_table_association.intra","mode":"managed","type":"aws_route_table_association","name":"intra","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"subnet_id":{"references":["aws_subnet.intra","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.intra_subnets","var.intra_subnets"]}},{"address":"aws_route_table_association.outpost","mode":"managed","type":"aws_route_table_association","name":"outpost","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.outpost","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.outpost_subnets","var.outpost_subnets"]}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.private_subnets","var.private_subnets"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.public_subnets","var.public_subnets"]}},{"address":"aws_route_table_association.redshift","mode":"managed","type":"aws_route_table_association","name":"redshift","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.private","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]}},{"address":"aws_route_table_association.redshift_public","mode":"managed","type":"aws_route_table_association","name":"redshift_public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.public","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]}},{"address":"aws_subnet.database","mode":"managed","type":"aws_subnet","name":"database","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.database_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.database_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.database_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.database_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.database_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.name","var.database_subnet_suffix","var.azs","count.index","var.tags","var.database_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.database_subnets","var.database_subnets"]}},{"address":"aws_subnet.elasticache","mode":"managed","type":"aws_subnet","name":"elasticache","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.elasticache_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.elasticache_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.elasticache_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.elasticache_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.azs","count.index","var.tags","var.elasticache_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]}},{"address":"aws_subnet.intra","mode":"managed","type":"aws_subnet","name":"intra","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.intra_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.intra_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.intra_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.intra_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.name","var.intra_subnet_suffix","var.azs","count.index","var.tags","var.intra_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.intra_subnets","var.intra_subnets"]}},{"address":"aws_subnet.outpost","mode":"managed","type":"aws_subnet","name":"outpost","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.outpost_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.outpost_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.outpost_az"]},"cidr_block":{"references":["var.outpost_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.outpost_subnet_ipv6_prefixes","count.index"]},"outpost_arn":{"references":["var.outpost_arn"]},"tags":{"references":["var.name","var.outpost_subnet_suffix","var.outpost_az","var.tags","var.outpost_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.outpost_subnets","var.outpost_subnets"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.private_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.private_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.private_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.private_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.private_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.name","var.private_subnet_suffix","var.azs","count.index","var.tags","var.private_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.private_subnets","var.private_subnets"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.public_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.public_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.public_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.public_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.public_subnet_ipv6_prefixes","count.index"]},"map_public_ip_on_launch":{"references":["var.map_public_ip_on_launch"]},"tags":{"references":["var.name","var.public_subnet_suffix","var.azs","count.index","var.tags","var.public_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.public_subnets","var.one_nat_gateway_per_az","var.public_subnets","var.azs","var.public_subnets"]}},{"address":"aws_subnet.redshift","mode":"managed","type":"aws_subnet","name":"redshift","provider_config_key":"aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.redshift_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.redshift_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.redshift_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.redshift_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.name","var.redshift_subnet_suffix","var.azs","count.index","var.tags","var.redshift_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc","var.redshift_subnets","var.redshift_subnets"]}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"aws","expressions":{"assign_generated_ipv6_cidr_block":{"references":["var.enable_ipv6"]},"cidr_block":{"references":["var.cidr"]},"enable_classiclink":{"references":["var.enable_classiclink"]},"enable_classiclink_dns_support":{"references":["var.enable_classiclink_dns_support"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"instance_tenancy":{"references":["var.instance_tenancy"]},"tags":{"references":["var.name","var.tags","var.vpc_tags"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc"]}},{"address":"aws_vpc_dhcp_options.this","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","provider_config_key":"aws","expressions":{"domain_name":{"references":["var.dhcp_options_domain_name"]},"domain_name_servers":{"references":["var.dhcp_options_domain_name_servers"]},"netbios_name_servers":{"references":["var.dhcp_options_netbios_name_servers"]},"netbios_node_type":{"references":["var.dhcp_options_netbios_node_type"]},"ntp_servers":{"references":["var.dhcp_options_ntp_servers"]},"tags":{"references":["var.name","var.tags","var.dhcp_options_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_dhcp_options_association.this","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","provider_config_key":"aws","expressions":{"dhcp_options_id":{"references":["aws_vpc_dhcp_options.this[0].id","aws_vpc_dhcp_options.this[0]","aws_vpc_dhcp_options.this"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_ipv4_cidr_block_association.this","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"this","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.secondary_cidr_blocks","count.index"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.secondary_cidr_blocks","var.secondary_cidr_blocks"]}},{"address":"aws_vpn_gateway.this","mode":"managed","type":"aws_vpn_gateway","name":"this","provider_config_key":"aws","expressions":{"amazon_side_asn":{"references":["var.amazon_side_asn"]},"availability_zone":{"references":["var.vpn_gateway_az"]},"tags":{"references":["var.name","var.tags","var.vpn_gateway_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.enable_vpn_gateway"]}},{"address":"aws_vpn_gateway_attachment.this","mode":"managed","type":"aws_vpn_gateway_attachment","name":"this","provider_config_key":"aws","expressions":{"vpc_id":{"references":["local.vpc_id"]},"vpn_gateway_id":{"references":["var.vpn_gateway_id"]}},"schema_version":0,"count_expression":{"references":["var.vpn_gateway_id"]}},{"address":"aws_vpn_gateway_route_propagation.intra","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"intra","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.intra","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_intra_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.intra_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.private","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_private_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.private_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.public","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc","var.propagate_public_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id"]}},{"address":"data.aws_iam_policy_document.flow_log_cloudwatch_assume_role","mode":"data","type":"aws_iam_policy_document","name":"flow_log_cloudwatch_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"AWSVPCFlowLogsAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"data.aws_iam_policy_document.vpc_flow_log_cloudwatch","mode":"data","type":"aws_iam_policy_document","name":"vpc_flow_log_cloudwatch","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AWSVPCFlowLogsPushToCloudWatch"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}}],"variables":{"amazon_side_asn":{"default":"64512","description":"The Autonomous System Number (ASN) for the Amazon side of the gateway. By default the virtual private gateway is created with the current default Amazon ASN."},"assign_ipv6_address_on_creation":{"default":false,"description":"Assign IPv6 address on subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"azs":{"default":[],"description":"A list of availability zones names or ids in the region"},"cidr":{"default":"0.0.0.0/0","description":"The CIDR block for the VPC. Default value is a valid CIDR, but not acceptable by AWS and should be overridden"},"create_database_internet_gateway_route":{"default":false,"description":"Controls if an internet gateway route for public database access should be created"},"create_database_nat_gateway_route":{"default":false,"description":"Controls if a nat gateway route should be created to give internet access to the database subnets"},"create_database_subnet_group":{"default":true,"description":"Controls if database subnet group should be created (n.b. database_subnets must also be set)"},"create_database_subnet_route_table":{"default":false,"description":"Controls if separate route table for database should be created"},"create_egress_only_igw":{"default":true,"description":"Controls if an Egress Only Internet Gateway is created and its related routes."},"create_elasticache_subnet_group":{"default":true,"description":"Controls if elasticache subnet group should be created"},"create_elasticache_subnet_route_table":{"default":false,"description":"Controls if separate route table for elasticache should be created"},"create_flow_log_cloudwatch_iam_role":{"default":false,"description":"Whether to create IAM role for VPC Flow Logs"},"create_flow_log_cloudwatch_log_group":{"default":false,"description":"Whether to create CloudWatch log group for VPC Flow Logs"},"create_igw":{"default":true,"description":"Controls if an Internet Gateway is created for public subnets and the related routes that connect them."},"create_redshift_subnet_group":{"default":true,"description":"Controls if redshift subnet group should be created"},"create_redshift_subnet_route_table":{"default":false,"description":"Controls if separate route table for redshift should be created"},"create_vpc":{"default":true,"description":"Controls if VPC should be created (it affects almost all resources)"},"customer_gateway_tags":{"default":{},"description":"Additional tags for the Customer Gateway"},"customer_gateways":{"default":{},"description":"Maps of Customer Gateway's attributes (BGP ASN and Gateway's Internet-routable external IP address)"},"database_acl_tags":{"default":{},"description":"Additional tags for the database subnets network ACL"},"database_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for database subnets"},"database_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets inbound network ACL rules"},"database_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets outbound network ACL rules"},"database_route_table_tags":{"default":{},"description":"Additional tags for the database route tables"},"database_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on database subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"database_subnet_group_name":{"default":null,"description":"Name of database subnet group"},"database_subnet_group_tags":{"default":{},"description":"Additional tags for the database subnet group"},"database_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 database subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"database_subnet_suffix":{"default":"db","description":"Suffix to append to database subnets name"},"database_subnet_tags":{"default":{},"description":"Additional tags for the database subnets"},"database_subnets":{"default":[],"description":"A list of database subnets"},"default_network_acl_egress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of egress rules to set on the Default Network ACL"},"default_network_acl_ingress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of ingress rules to set on the Default Network ACL"},"default_network_acl_name":{"default":null,"description":"Name to be used on the Default Network ACL"},"default_network_acl_tags":{"default":{},"description":"Additional tags for the Default Network ACL"},"default_route_table_name":{"default":null,"description":"Name to be used on the default route table"},"default_route_table_propagating_vgws":{"default":[],"description":"List of virtual gateways for propagation"},"default_route_table_routes":{"default":[],"description":"Configuration block of routes. See https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/default_route_table#route"},"default_route_table_tags":{"default":{},"description":"Additional tags for the default route table"},"default_security_group_egress":{"default":[],"description":"List of maps of egress rules to set on the default security group"},"default_security_group_ingress":{"default":[],"description":"List of maps of ingress rules to set on the default security group"},"default_security_group_name":{"default":null,"description":"Name to be used on the default security group"},"default_security_group_tags":{"default":{},"description":"Additional tags for the default security group"},"default_vpc_enable_classiclink":{"default":false,"description":"Should be true to enable ClassicLink in the Default VPC"},"default_vpc_enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the Default VPC"},"default_vpc_enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the Default VPC"},"default_vpc_name":{"default":null,"description":"Name to be used on the Default VPC"},"default_vpc_tags":{"default":{},"description":"Additional tags for the Default VPC"},"dhcp_options_domain_name":{"default":"","description":"Specifies DNS name for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_domain_name_servers":{"default":["AmazonProvidedDNS"],"description":"Specify a list of DNS server addresses for DHCP options set, default to AWS provided (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_name_servers":{"default":[],"description":"Specify a list of netbios servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_node_type":{"default":"","description":"Specify netbios node_type for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_ntp_servers":{"default":[],"description":"Specify a list of NTP servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_tags":{"default":{},"description":"Additional tags for the DHCP option set (requires enable_dhcp_options set to true)"},"elasticache_acl_tags":{"default":{},"description":"Additional tags for the elasticache subnets network ACL"},"elasticache_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for elasticache subnets"},"elasticache_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets inbound network ACL rules"},"elasticache_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets outbound network ACL rules"},"elasticache_route_table_tags":{"default":{},"description":"Additional tags for the elasticache route tables"},"elasticache_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on elasticache subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"elasticache_subnet_group_name":{"default":null,"description":"Name of elasticache subnet group"},"elasticache_subnet_group_tags":{"default":{},"description":"Additional tags for the elasticache subnet group"},"elasticache_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 elasticache subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"elasticache_subnet_suffix":{"default":"elasticache","description":"Suffix to append to elasticache subnets name"},"elasticache_subnet_tags":{"default":{},"description":"Additional tags for the elasticache subnets"},"elasticache_subnets":{"default":[],"description":"A list of elasticache subnets"},"enable_classiclink":{"default":null,"description":"Should be true to enable ClassicLink for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_classiclink_dns_support":{"default":null,"description":"Should be true to enable ClassicLink DNS Support for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_dhcp_options":{"default":false,"description":"Should be true if you want to specify a DHCP options set with a custom domain name, DNS servers, NTP servers, netbios servers, and/or netbios server type"},"enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the VPC"},"enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the VPC"},"enable_flow_log":{"default":false,"description":"Whether or not to enable VPC Flow Logs"},"enable_ipv6":{"default":false,"description":"Requests an Amazon-provided IPv6 CIDR block with a /56 prefix length for the VPC. You cannot specify the range of IP addresses, or the size of the CIDR block."},"enable_nat_gateway":{"default":false,"description":"Should be true if you want to provision NAT Gateways for each of your private networks"},"enable_public_redshift":{"default":false,"description":"Controls if redshift should have public routing table"},"enable_vpn_gateway":{"default":false,"description":"Should be true if you want to create a new VPN Gateway resource and attach it to the VPC"},"external_nat_ip_ids":{"default":[],"description":"List of EIP IDs to be assigned to the NAT Gateways (used in combination with reuse_nat_ips)"},"external_nat_ips":{"default":[],"description":"List of EIPs to be used for `nat_public_ips` output (used in combination with reuse_nat_ips and external_nat_ip_ids)"},"flow_log_cloudwatch_iam_role_arn":{"default":"","description":"The ARN for the IAM role that's used to post flow logs to a CloudWatch Logs log group. When flow_log_destination_arn is set to ARN of Cloudwatch Logs, this argument needs to be provided."},"flow_log_cloudwatch_log_group_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data for VPC flow logs."},"flow_log_cloudwatch_log_group_name_prefix":{"default":"/aws/vpc-flow-log/","description":"Specifies the name prefix of CloudWatch Log Group for VPC flow logs."},"flow_log_cloudwatch_log_group_retention_in_days":{"default":null,"description":"Specifies the number of days you want to retain log events in the specified log group for VPC flow logs."},"flow_log_destination_arn":{"default":"","description":"The ARN of the CloudWatch log group or S3 bucket where VPC Flow Logs will be pushed. If this ARN is a S3 bucket the appropriate permissions need to be set on that bucket's policy. When create_flow_log_cloudwatch_log_group is set to false this argument must be provided."},"flow_log_destination_type":{"default":"cloud-watch-logs","description":"Type of flow log destination. Can be s3 or cloud-watch-logs."},"flow_log_file_format":{"default":"plain-text","description":"(Optional) The format for the flow log. Valid values: `plain-text`, `parquet`."},"flow_log_hive_compatible_partitions":{"default":false,"description":"(Optional) Indicates whether to use Hive-compatible prefixes for flow logs stored in Amazon S3."},"flow_log_log_format":{"default":null,"description":"The fields to include in the flow log record, in the order in which they should appear."},"flow_log_max_aggregation_interval":{"default":600,"description":"The maximum interval of time during which a flow of packets is captured and aggregated into a flow log record. Valid Values: `60` seconds or `600` seconds."},"flow_log_per_hour_partition":{"default":false,"description":"(Optional) Indicates whether to partition the flow log per hour. This reduces the cost and response time for queries."},"flow_log_traffic_type":{"default":"ALL","description":"The type of traffic to capture. Valid values: ACCEPT, REJECT, ALL."},"igw_tags":{"default":{},"description":"Additional tags for the internet gateway"},"instance_tenancy":{"default":"default","description":"A tenancy option for instances launched into the VPC"},"intra_acl_tags":{"default":{},"description":"Additional tags for the intra subnets network ACL"},"intra_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for intra subnets"},"intra_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets inbound network ACLs"},"intra_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets outbound network ACLs"},"intra_route_table_tags":{"default":{},"description":"Additional tags for the intra route tables"},"intra_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on intra subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"intra_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 intra subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"intra_subnet_suffix":{"default":"intra","description":"Suffix to append to intra subnets name"},"intra_subnet_tags":{"default":{},"description":"Additional tags for the intra subnets"},"intra_subnets":{"default":[],"description":"A list of intra subnets"},"manage_default_network_acl":{"default":false,"description":"Should be true to adopt and manage Default Network ACL"},"manage_default_route_table":{"default":false,"description":"Should be true to manage default route table"},"manage_default_security_group":{"default":false,"description":"Should be true to adopt and manage default security group"},"manage_default_vpc":{"default":false,"description":"Should be true to adopt and manage Default VPC"},"map_public_ip_on_launch":{"default":true,"description":"Should be false if you do not want to auto-assign public IP on launch"},"name":{"default":"","description":"Name to be used on all the resources as identifier"},"nat_eip_tags":{"default":{},"description":"Additional tags for the NAT EIP"},"nat_gateway_destination_cidr_block":{"default":"0.0.0.0/0","description":"Used to pass a custom destination route for private NAT Gateway. If not specified, the default 0.0.0.0/0 is used as a destination route."},"nat_gateway_tags":{"default":{},"description":"Additional tags for the NAT gateways"},"one_nat_gateway_per_az":{"default":false,"description":"Should be true if you want only one NAT Gateway per availability zone. Requires `var.azs` to be set, and the number of `public_subnets` created to be greater than or equal to the number of availability zones specified in `var.azs`."},"outpost_acl_tags":{"default":{},"description":"Additional tags for the outpost subnets network ACL"},"outpost_arn":{"default":null,"description":"ARN of Outpost you want to create a subnet in."},"outpost_az":{"default":null,"description":"AZ where Outpost is anchored."},"outpost_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for outpost subnets"},"outpost_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets inbound network ACLs"},"outpost_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets outbound network ACLs"},"outpost_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on outpost subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"outpost_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 outpost subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"outpost_subnet_suffix":{"default":"outpost","description":"Suffix to append to outpost subnets name"},"outpost_subnet_tags":{"default":{},"description":"Additional tags for the outpost subnets"},"outpost_subnets":{"default":[],"description":"A list of outpost subnets inside the VPC"},"private_acl_tags":{"default":{},"description":"Additional tags for the private subnets network ACL"},"private_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for private subnets"},"private_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets inbound network ACLs"},"private_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets outbound network ACLs"},"private_route_table_tags":{"default":{},"description":"Additional tags for the private route tables"},"private_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on private subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"private_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 private subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"private_subnet_suffix":{"default":"private","description":"Suffix to append to private subnets name"},"private_subnet_tags":{"default":{},"description":"Additional tags for the private subnets"},"private_subnets":{"default":[],"description":"A list of private subnets inside the VPC"},"propagate_intra_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_private_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_public_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"public_acl_tags":{"default":{},"description":"Additional tags for the public subnets network ACL"},"public_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for public subnets"},"public_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets inbound network ACLs"},"public_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets outbound network ACLs"},"public_route_table_tags":{"default":{},"description":"Additional tags for the public route tables"},"public_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on public subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"public_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 public subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"public_subnet_suffix":{"default":"public","description":"Suffix to append to public subnets name"},"public_subnet_tags":{"default":{},"description":"Additional tags for the public subnets"},"public_subnets":{"default":[],"description":"A list of public subnets inside the VPC"},"putin_khuylo":{"default":true,"description":"Do you agree that Putin doesn't respect Ukrainian sovereignty and territorial integrity? More info: https://en.wikipedia.org/wiki/Putin_khuylo!"},"redshift_acl_tags":{"default":{},"description":"Additional tags for the redshift subnets network ACL"},"redshift_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for redshift subnets"},"redshift_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets inbound network ACL rules"},"redshift_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets outbound network ACL rules"},"redshift_route_table_tags":{"default":{},"description":"Additional tags for the redshift route tables"},"redshift_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on redshift subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"redshift_subnet_group_name":{"default":null,"description":"Name of redshift subnet group"},"redshift_subnet_group_tags":{"default":{},"description":"Additional tags for the redshift subnet group"},"redshift_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 redshift subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"redshift_subnet_suffix":{"default":"redshift","description":"Suffix to append to redshift subnets name"},"redshift_subnet_tags":{"default":{},"description":"Additional tags for the redshift subnets"},"redshift_subnets":{"default":[],"description":"A list of redshift subnets"},"reuse_nat_ips":{"default":false,"description":"Should be true if you don't want EIPs to be created for your NAT Gateways and will instead pass them in via the 'external_nat_ip_ids' variable"},"secondary_cidr_blocks":{"default":[],"description":"List of secondary CIDR blocks to associate with the VPC to extend the IP Address pool"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"vpc_flow_log_permissions_boundary":{"default":null,"description":"The ARN of the Permissions Boundary for the VPC Flow Log IAM Role"},"vpc_flow_log_tags":{"default":{},"description":"Additional tags for the VPC Flow Logs"},"vpc_tags":{"default":{},"description":"Additional tags for the VPC"},"vpn_gateway_az":{"default":null,"description":"The Availability Zone for the VPN Gateway"},"vpn_gateway_id":{"default":"","description":"ID of VPN Gateway to attach to the VPC"},"vpn_gateway_tags":{"default":{},"description":"Additional tags for the VPN gateway"}}},"version_constraint":"~\u003e 3.0"}}}},"relevant_attributes":[{"resource":"module.eks_blueprints.module.aws_eks.data.aws_iam_policy_document.assume_role_policy[0]","attribute":["json"]},{"resource":"module.vpc.aws_route_table.intra","attribute":[]},{"resource":"module.vpc.aws_network_acl.private[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_launch_template.managed_node_groups","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_security_group.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["name"]},{"resource":"module.vpc.aws_nat_gateway.this","attribute":[]},{"resource":"module.vpc.aws_route.database_internet_gateway[0]","attribute":["id"]},{"resource":"module.vpc.aws_route_table.redshift","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_iam_instance_profile.managed_ng","attribute":[]},{"resource":"module.kubernetes-addons.data.aws_caller_identity.current","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_instance_profile.managed_ng","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_fargate_profiles.aws_iam_role.fargate[0]","attribute":["arn"]},{"resource":"module.kubernetes-addons.module.prometheus[0].aws_iam_policy.ingest[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_security_group.cluster[0]","attribute":["id"]},{"resource":"data.aws_availability_zones.available","attribute":["names"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["owner_id"]},{"resource":"module.vpc.aws_route_table.database","attribute":[]},{"resource":"module.vpc.aws_route_table_association.private","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.aws_iam_role.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_redshift_subnet_group.redshift[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.aws_autoscaling_group.self_managed_ng","attribute":[]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["default_security_group_id"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.aws_iam_instance_profile.self_managed_ng","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.data.aws_iam_policy_document.managed_ng_assume_role_policy","attribute":["json"]},{"resource":"module.vpc.aws_elasticache_subnet_group.elasticache[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_eks_fargate_profile.this[0]","attribute":["id"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["default_route_table_id"]},{"resource":"module.vpc.aws_network_acl.outpost[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_teams.data.aws_eks_cluster.eks_cluster","attribute":["name"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["enable_dns_hostnames"]},{"resource":"module.vpc.aws_network_acl.intra[0]","attribute":["arn"]},{"resource":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role.irsa[0]","attribute":["arn"]},{"resource":"module.vpc.aws_subnet.redshift","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["certificate_authority",0,"data"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_iam_role.this[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_security_group.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_iam_role.this[0]","attribute":["name"]},{"resource":"module.vpc.aws_cloudwatch_log_group.flow_log[0]","attribute":["arn"]},{"resource":"module.vpc.aws_subnet.elasticache","attribute":[]},{"resource":"module.vpc.aws_route_table_association.redshift","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams.aws_iam_role.platform_team","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams.data.aws_region.current","attribute":["id"]},{"resource":"module.aws_controllers.data.aws_region.current","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_iam_policy_document.platform_team_eks_access[0]","attribute":["json"]},{"resource":"module.vpc.aws_vpc_dhcp_options.this[0]","attribute":["id"]},{"resource":"module.kubernetes-addons.data.aws_eks_cluster.eks_cluster","attribute":["endpoint"]},{"resource":"module.eks_blueprints.module.aws_eks.data.aws_partition.current","attribute":["partition"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_fargate_profiles.aws_iam_role.fargate","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_security_group.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_security_group.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_instance_profile.this[0]","attribute":["unique_id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["max_size"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_launch_template.this[0]","attribute":["latest_version"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_iam_role.managed_ng","attribute":[]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_launch_template.managed_node_groups[0]","attribute":["default_version"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_security_group.cluster[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng[0]","attribute":["id"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["main_route_table_id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_security_group.node[0]","attribute":["arn"]},{"resource":"module.aws_controllers.module.aws_load_balancer_controller[0].aws_iam_policy.aws_load_balancer_controller","attribute":["arn"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["default_network_acl_id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_security_group.node[0]","attribute":["id"]},{"resource":"module.vpc.aws_vpn_gateway.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["platform_version"]},{"resource":"module.eks_blueprints.module.aws_eks_teams.aws_iam_role.team_sa_irsa","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_eks_fargate_profile.this[0]","attribute":["pod_execution_role_arn"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["default_security_group_id"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["cidr_block"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_iam_role.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_egress_only_internet_gateway.this","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_launch_template.managed_node_groups","attribute":[]},{"resource":"module.kubernetes-addons.module.ondat[0].kubernetes_secret.etcd[0]","attribute":["metadata",0,"name"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_iam_role.this[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_iam_role.this[0]","attribute":["unique_id"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].kubernetes_namespace.team","attribute":[]},{"resource":"module.vpc.aws_network_acl.database[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["status"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_identity_provider_config.this","attribute":[]},{"resource":"module.eks_blueprints.data.aws_caller_identity.current","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_role.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.module.launch_template_self_managed_ng.aws_launch_template.this","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_eks_cluster.eks_cluster","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.eks_blueprints.module.emr_on_eks.aws_iam_role.emr_on_eks_execution","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_eks_node_group.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_eks_node_group.managed_ng","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.module.launch_template_self_managed_ng.data.aws_eks_cluster.eks","attribute":["endpoint"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["default_network_acl_id"]},{"resource":"module.vpc.aws_subnet.database","attribute":[]},{"resource":"module.vpc.aws_route.private_ipv6_egress","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams.aws_iam_policy.platform_team_eks_access[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.data.aws_partition.current","attribute":["dns_suffix"]},{"resource":"module.vpc.aws_vpn_gateway.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_elasticache_subnet_group.elasticache[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_iam_openid_connect_provider.oidc_provider[0]","attribute":["arn"]},{"resource":"module.vpc.aws_iam_role.vpc_flow_log_cloudwatch[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_iam_role.managed_ng[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_instance_profile.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_eks_node_group.managed_ng","attribute":[]},{"resource":"module.aws_controllers.module.aws_load_balancer_controller[0].module.helm_addon.module.irsa[0].aws_iam_role.irsa[0]","attribute":["name"]},{"resource":"module.vpc.aws_route.public_internet_gateway[0]","attribute":["id"]},{"resource":"module.vpc.aws_route_table_association.public","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_fargate_profiles.data.aws_iam_policy_document.fargate_assume_role_policy","attribute":["json"]},{"resource":"module.kubernetes-addons.module.ondat[0].kubernetes_secret.etcd[0]","attribute":["metadata",0,"namespace"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["ipv6_cidr_block"]},{"resource":"module.eks_blueprints.module.kms[0].aws_kms_key.this","attribute":["arn"]},{"resource":"module.eks_blueprints.data.aws_iam_policy_document.eks_key","attribute":["json"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].data.aws_iam_policy_document.managed_ng_assume_role_policy","attribute":["json"]},{"resource":"module.vpc.aws_internet_gateway.this[0]","attribute":["arn"]},{"resource":"module.kubernetes-addons.data.aws_region.current","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.aws_iam_role.self_managed_ng[0]","attribute":["name"]},{"resource":"module.eks_blueprints.data.aws_eks_cluster.cluster[0]","attribute":["endpoint"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_iam_role.this[0]","attribute":["unique_id"]},{"resource":"data.aws_caller_identity.current","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.module.launch_template_self_managed_ng.data.aws_eks_cluster.eks","attribute":["certificate_authority",0,"data"]},{"resource":"module.aws_controllers.data.aws_eks_cluster.eks_cluster","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.eks_blueprints.data.aws_eks_cluster.cluster[0]","attribute":["certificate_authority",0,"data"]},{"resource":"module.vpc.aws_vpn_gateway_attachment.this[0]","attribute":["vpn_gateway_id"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_region.current","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["health_check_grace_period"]},{"resource":"module.kubernetes-addons.data.aws_partition.current","attribute":["partition"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.kubernetes-addons.data.aws_eks_cluster.eks_cluster","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.vpc.aws_network_acl.database[0]","attribute":["id"]},{"resource":"module.vpc.aws_network_acl.public[0]","attribute":["id"]},{"resource":"module.vpc.aws_subnet.private","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_launch_template.managed_node_groups[0]","attribute":["default_version"]},{"resource":"module.eks_blueprints.data.aws_region.current","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_launch_template.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_internet_gateway.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.data.aws_partition.current","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_instance_profile.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_teams.data.aws_partition.current","attribute":["partition"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.eks_blueprints.module.aws_eks.data.tls_certificate.this[0]","attribute":["certificates",0,"sha1_fingerprint"]},{"resource":"module.aws_controllers.module.aws_load_balancer_controller[0].data.aws_iam_policy_document.aws_lb","attribute":["json"]},{"resource":"module.vpc.aws_network_acl.outpost[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_schedule.this","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_iam_role.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_iam_role.managed_ng[0]","attribute":["name"]},{"resource":"module.vpc.aws_subnet.public","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_launch_template.managed_node_groups[0]","attribute":["id"]},{"resource":"module.vpc.aws_subnet.intra","attribute":[]},{"resource":"module.vpc.aws_network_acl.private[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_eks_fargate_profile.this[0]","attribute":["arn"]},{"resource":"module.kubernetes-addons.module.aws_for_fluent_bit[0].aws_cloudwatch_log_group.aws_for_fluent_bit","attribute":["name"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["ipv6_association_id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["availability_zones"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["cidr_block"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["instance_tenancy"]},{"resource":"module.vpc.aws_network_acl.elasticache[0]","attribute":["id"]},{"resource":"module.vpc.aws_network_acl.redshift[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_teams.aws_iam_role.team_access","attribute":[]},{"resource":"module.vpc.aws_route_table_association.intra","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["default_cooldown"]},{"resource":"module.eks_blueprints.module.aws_eks.module.fargate_profile.aws_eks_fargate_profile.this[0]","attribute":["status"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.aws_iam_role.self_managed_ng","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.aws_cloudwatch_log_group.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_network_acl.redshift[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.data.aws_iam_policy_document.self_managed_ng_assume_role_policy","attribute":["json"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.aws_iam_instance_profile.self_managed_ng[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks_self_managed_node_groups.data.aws_ami.predefined","attribute":[]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["instance_tenancy"]},{"resource":"module.vpc.aws_route_table_association.redshift_public","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_eks_node_group.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.eks_blueprints.module.aws_eks_teams.data.aws_eks_cluster.eks_cluster","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["enable_dns_support"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng","attribute":[]},{"resource":"module.eks_blueprints.data.aws_partition.current","attribute":["dns_suffix"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_role.this[0]","attribute":["unique_id"]},{"resource":"module.eks_blueprints.module.emr_on_eks.data.aws_iam_policy_document.emr_assume_role","attribute":["json"]},{"resource":"module.vpc.aws_subnet.outpost","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_launch_template.this[0]","attribute":["latest_version"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_launch_template.this[0]","attribute":["id"]},{"resource":"module.kubernetes-addons.module.external_dns[0].data.aws_route53_zone.selected","attribute":["zone_id"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_sa_irsa","attribute":[]},{"resource":"module.vpc.aws_flow_log.this[0]","attribute":["id"]},{"resource":"module.vpc.aws_eip.nat","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_fargate_profiles.aws_eks_fargate_profile.eks_fargate","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.kms[0].aws_kms_key.this","attribute":["key_id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["vpc_zone_identifier"]},{"resource":"module.vpc.aws_network_acl.elasticache[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups.aws_launch_template.managed_node_groups[0]","attribute":["id"]},{"resource":"module.vpc.aws_vpc_ipv4_cidr_block_association.this","attribute":[]},{"resource":"module.vpc.aws_route.database_ipv6_egress[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_iam_role.this[0]","attribute":["name"]},{"resource":"module.vpc.aws_route_table.private","attribute":[]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["arn"]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["main_route_table_id"]},{"resource":"module.vpc.aws_route.database_nat_gateway","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["version"]},{"resource":"module.eks_blueprints.module.aws_eks_managed_node_groups[\"mg_5\"].aws_iam_role.managed_ng[0]","attribute":["name"]},{"resource":"module.vpc.aws_route_table_association.database","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_partition.current","attribute":["partition"]},{"resource":"module.vpc.aws_route_table.public[0]","attribute":["id"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["enable_dns_hostnames"]},{"resource":"module.vpc.aws_db_subnet_group.database[0]","attribute":["id"]},{"resource":"module.vpc.aws_db_subnet_group.database[0]","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_launch_template.this[0]","attribute":["id"]},{"resource":"module.aws_controllers.data.aws_caller_identity.current","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_policy.platform_team_eks_access[0]","attribute":["arn"]},{"resource":"module.vpc.aws_route.private_nat_gateway","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["arn"]},{"resource":"module.aws_controllers.data.aws_partition.current","attribute":["partition"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["min_size"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_cloudwatch_log_group.this[0]","attribute":["name"]},{"resource":"module.vpc.aws_customer_gateway.this","attribute":[]},{"resource":"module.vpc.aws_vpc.this[0]","attribute":["enable_dns_support"]},{"resource":"module.vpc.aws_egress_only_internet_gateway.this[0]","attribute":["id"]},{"resource":"module.vpc.aws_network_acl.public[0]","attribute":["arn"]},{"resource":"module.vpc.aws_route_table.elasticache","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["endpoint"]},{"resource":"module.vpc.aws_route_table_association.elasticache","attribute":[]},{"resource":"module.vpc.aws_vpc_ipv4_cidr_block_association.this[0]","attribute":["vpc_id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_cluster.this[0]","attribute":["vpc_config",0,"cluster_security_group_id"]},{"resource":"module.vpc.aws_route_table.public","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.team_access","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].aws_iam_role.platform_team","attribute":[]},{"resource":"module.kubernetes-addons.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.vpc.aws_route.public_internet_gateway_ipv6[0]","attribute":["id"]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_eks_cluster.eks_cluster","attribute":["arn"]},{"resource":"module.vpc.aws_default_vpc.this[0]","attribute":["default_route_table_id"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_launch_template.this[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["health_check_type"]},{"resource":"module.eks_blueprints.module.aws_eks.module.self_managed_node_group.aws_autoscaling_group.this[0]","attribute":["desired_capacity"]},{"resource":"module.aws_controllers.data.aws_eks_cluster.eks_cluster","attribute":["endpoint"]},{"resource":"module.vpc.aws_network_acl.intra[0]","attribute":["id"]},{"resource":"module.kubernetes-addons.module.prometheus[0].module.irsa_amp_ingest[0].aws_iam_role.irsa[0]","attribute":["arn"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_iam_role.this[0]","attribute":["unique_id"]},{"resource":"module.eks_blueprints.module.aws_eks.aws_eks_addon.this","attribute":[]},{"resource":"module.eks_blueprints.module.aws_eks_teams[0].data.aws_eks_cluster.eks_cluster","attribute":["name"]},{"resource":"module.eks_blueprints.module.aws_eks.module.eks_managed_node_group.aws_eks_node_group.this[0]","attribute":["resources"]},{"resource":"module.aws_controllers.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.kubernetes-addons.module.argocd[0].data.aws_secretsmanager_secret_version.admin_password_version[0]","attribute":["secret_string"]}]}
